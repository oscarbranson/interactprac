(this["webpackJsonpcarbon-live-js"]=this["webpackJsonpcarbon-live-js"]||[]).push([[0],{146:function(t,a,e){t.exports=e(162)},151:function(t,a,e){},161:function(t,a,e){},162:function(t,a,e){"use strict";e.r(a);var l=e(0),i=e.n(l),s=e(28),o=e.n(s),n=(e(151),e(3)),r=e(5),p=e(6),h=e(4),c=e(8),m=e(7);function _(t){return 1e-15*t*12}function u(t){return t/2.13}function d(t){var a=t.Tc,e=t.Sal,l=Math.sqrt(e),i=a+273.15,s=Math.log(i),o=Math.exp(9345.17/i-60.2409+23.3585*Math.log(i/100)+e*(.023517-.023656*i/100+i/100*.0047036*(i/100))),n=Math.pow(10,-3633.86/i+61.2172-9.6777*s+.011555*e-1152e-7*e*e),r=Math.pow(10,-471.78/i-25.929+3.16967*s+.01781*e-1122e-7*e*e),p=Math.exp(148.9652-13847.26/i-23.6521*s+(118.67/i-5.977+1.0495*s)*l-.01615*e),h=Math.exp((-8966.9-2890.53*l-77.942*e+1.728*e*l-.0996*e*e)/i+(148.0248+137.1942*l+1.62142*e)+(-24.4344-25.085*l-.2474*e)*s+.053105*l*i),c=Math.pow(10,-171.9065-.077993*i+2839.319/i+71.595*Math.log10(i)+(.0028426*i-.77712+178.34/i)*l-.07711*e+.0041249*e*l);return{K0:o,K1:n,K2:r,KB:h,KW:p,KspA:Math.pow(10,-171.945-.077993*i+2903.293/i+71.595*Math.log10(i)+(.0017276*i-.068393+88.135/i)*l-.10018*e+.0059415*e*l),KspC:c}}function v(t){var a=t.DIC,e=t.TA,l=t.Sal,i=t.Ks,s=function(t){for(var a=t.DIC,e=t.TA,l=t.Sal,i=t.Ks,s=4157e-7/35*l,o=Math.pow(10,-8),n=o,r=null,p=null,h=null;Math.abs(n)>1e-15;)o-=n=(e-((r=a/(1+o/i.K1+i.K2/o))+2*(p=a/(1+o/i.K2+Math.pow(o,2)/(i.K1*i.K2))))-s*i.KB/(i.KB+o)-(h=i.KW/o)+o)/(1+(2*p+r+h)/o+s*i.KB/Math.pow(i.KB+o,2));return o}({DIC:a*=1e-6,TA:e*=1e-6,Sal:l,Ks:i}),o=-Math.log10(s),n=1e6*a/(1+i.K1/s+i.K1*i.K2/Math.pow(s,2)),r=1e6*a/(1+s/i.K1+i.K2/s),p=1e6*a/(1+s/i.K2+Math.pow(s,2)/(i.K1*i.K2));return{pH:o,fCO2:n/i.K0,CO2:n,HCO3:r,CO3:p,c:1e-6*p/(i.KspC/.0102)}}var b={PO4:"[PO<sub>4</sub>]",c:"\u03a9",DIC:"DIC",TA:"TA",fCO2:"fCO<sub>2</sub>",pH:"pH",CO3:"[CO<sub>3</sub><sup>2-</sup>]",HCO3:"[HCO<sub>3</sub><sup>-</sup>]"},O=358e12,C={kas:.02,vmix:189e13,vthermo:63072e10,tau_hilat:50,tau_lolat:1,percent_CaCO3_hilat:10,percent_CaCO3_lolat:20,depth_lolat:100,depth_hilat:200,vol_ocean:134e16,vol_deep:129883e13,vol_lolat:3043e13,vol_hilat:1074e13,mass_atmos:5132e15,moles_atmos:1773e17,SA_ocean:O,fSA_hilat:.15,fSA_lolat:.85,SA_hilat:.15*O,SA_lolat:.85*O,temp_deep:1.92,temp_hilat:3.715,temp_lolat:22.85,sal_lolat:35.15,sal_hilat:33.5,sal_deep:34.72,PO4_lolat:.0484,PO4_hilat:1.66,PO4_deep:2.38,DIC_lolat:1972,DIC_hilat:2192,DIC_deep:2279,TA_lolat:2244,TA_hilat:2341,TA_deep:2380.4,c_lolat:1,c_hilat:1,c_deep:1,fCO2_lolat:399,fCO2_hilat:369,fCO2_deep:502,pH_lolat:7.99,pH_hilat:8.23,pH_deep:7.97,CO2_lolat:9,CO2_hilat:9,CO2_deep:9,HCO3_lolat:1900,HCO3_hilat:1900,HCO3_deep:1900,CO3_lolat:300,CO3_hilat:300,CO3_deep:300,pCO2_atmos:389};function y(t){var a={};a.vmix_PO4_hilat=t.vmix*(t.PO4_hilat-t.PO4_deep),a.vmix_PO4_lolat=t.vmix*(t.PO4_lolat-t.PO4_deep),a.vmix_DIC_hilat=t.vmix*(t.DIC_hilat-t.DIC_deep),a.vmix_DIC_lolat=t.vmix*(t.DIC_lolat-t.DIC_deep),a.vmix_TA_hilat=t.vmix*(t.TA_hilat-t.TA_deep),a.vmix_TA_lolat=t.vmix*(t.TA_lolat-t.TA_deep),a.vthermo_PO4_deep=t.vthermo*(t.PO4_hilat-t.PO4_deep),a.vthermo_PO4_lolat=t.vthermo*(t.PO4_deep-t.PO4_lolat),a.vthermo_PO4_hilat=t.vthermo*(t.PO4_lolat-t.PO4_hilat),a.vthermo_DIC_deep=t.vthermo*(t.DIC_hilat-t.DIC_deep),a.vthermo_DIC_lolat=t.vthermo*(t.DIC_deep-t.DIC_lolat),a.vthermo_DIC_hilat=t.vthermo*(t.DIC_lolat-t.DIC_hilat),a.vthermo_TA_deep=t.vthermo*(t.TA_hilat-t.TA_deep),a.vthermo_TA_lolat=t.vthermo*(t.TA_deep-t.TA_lolat),a.vthermo_TA_hilat=t.vthermo*(t.TA_lolat-t.TA_hilat),a.prod_PO4_hilat=t.PO4_hilat*t.vol_hilat/t.tau_hilat,a.prod_PO4_lolat=t.PO4_lolat*t.vol_lolat/t.tau_lolat;var e=106+106*t.percent_CaCO3_lolat/100,l=106+106*t.percent_CaCO3_hilat/100;a.prod_DIC_hilat=a.prod_PO4_hilat*l,a.prod_DIC_lolat=a.prod_PO4_lolat*e;var i=.15*106+212*t.percent_CaCO3_lolat/100,s=.15*106+212*t.percent_CaCO3_hilat/100;return a.prod_TA_hilat=a.prod_PO4_hilat*s,a.prod_TA_lolat=a.prod_PO4_lolat*i,a.exCO2_lolat=t.kas*t.SA_lolat*(t.pCO2_atmos-t.fCO2_lolat),a.exCO2_hilat=t.kas*t.SA_hilat*(t.pCO2_atmos-t.fCO2_hilat),a}function f(t,a,e){var l=Object.assign({},t);return l.PO4_deep+=(a.vmix_PO4_hilat+a.vmix_PO4_lolat+a.vthermo_PO4_deep+a.prod_PO4_hilat+a.prod_PO4_lolat)/t.vol_deep,l.PO4_hilat+=(-a.vmix_PO4_hilat+a.vthermo_PO4_hilat-a.prod_PO4_hilat)/t.vol_hilat,l.PO4_lolat+=(-a.vmix_PO4_lolat+a.vthermo_PO4_lolat-a.prod_PO4_lolat)/t.vol_lolat,l.DIC_deep+=(a.vmix_DIC_hilat+a.vmix_DIC_lolat+a.vthermo_DIC_deep+a.prod_DIC_hilat+a.prod_DIC_lolat)/t.vol_deep,l.DIC_hilat+=(-a.vmix_DIC_hilat+a.vthermo_DIC_hilat-a.prod_DIC_hilat+1e3*a.exCO2_hilat)/t.vol_hilat,l.DIC_lolat+=(-a.vmix_DIC_lolat+a.vthermo_DIC_lolat-a.prod_DIC_lolat+1e3*a.exCO2_lolat)/t.vol_lolat,l.TA_deep+=(a.vmix_TA_hilat+a.vmix_TA_lolat+a.vthermo_TA_deep+a.prod_TA_hilat+a.prod_TA_lolat)/t.vol_deep,l.TA_hilat+=(-a.vmix_TA_hilat+a.vthermo_TA_hilat-a.prod_TA_hilat)/t.vol_hilat,l.TA_lolat+=(-a.vmix_TA_lolat+a.vthermo_TA_lolat-a.prod_TA_lolat)/t.vol_lolat,l.pCO2_atmos+=12*(-a.exCO2_hilat-a.exCO2_lolat)/213e13,l=function(t,a){for(var e=v({DIC:t.DIC_deep,TA:t.TA_deep,Sal:t.sal_deep,Ks:a.deep}),l=v({DIC:t.DIC_hilat,TA:t.TA_hilat,Sal:t.sal_hilat,Ks:a.hilat}),i=v({DIC:t.DIC_lolat,TA:t.TA_lolat,Sal:t.sal_lolat,Ks:a.lolat}),s=0,o=["pH","fCO2","CO2","HCO3","CO3","c"];s<o.length;s++){var n=o[s];t[n+"_deep"]=e[n],t[n+"_lolat"]=i[n],t[n+"_hilat"]=l[n]}return t}(l,e)}var g,x,j={vmix:{label:"Mixing Rate (m3 / yr)",ymin:null,ymax:null,precision:null},vthermo:{label:"Thermohaline Mixing Rate (m3 / yr)",ymin:null,ymax:null,precision:null},tau_lolat:{label:"Productivity (tau)",ymin:null,ymax:null,precision:null},tau_hilat:{label:"Productivity (tau)",ymin:null,ymax:null,precision:null},percent_CaCO3_lolat:{label:"% CaCO3",ymin:0,ymax:100,precision:1},percent_CaCO3:{label:"% CaCO3",ymin:0,ymax:100,precision:1},vol_deep:{label:"Ocean Volume (m3)",ymin:null,ymax:null,precision:null},vol_lolat:{label:"Ocean Volume (m3)",ymin:null,ymax:null,precision:null},vol_hilat:{label:"Ocean Volume (m3)",ymin:null,ymax:null,precision:null},PO4_lolat:{label:"[PO4]",ymin:0,ymax:1,precision:3},PO4_hilat:{label:"[PO4]",ymin:0,ymax:1,precision:3},PO4_deep:{label:"[PO4]",ymin:2.4,ymax:2.6,precision:3},DIC_hilat:{label:"[DIC]",ymin:1800,ymax:2e3,precision:4},DIC_lolat:{label:"[DIC]",ymin:1800,ymax:2e3,precision:4},DIC_deep:{label:"[DIC]",ymin:2130,ymax:2150,precision:5},TA_lolat:{label:"Alkalinity",ymin:2200,ymax:2400,precision:4},TA_hilat:{label:"Alkalinity",ymin:2200,ymax:2400,precision:4},TA_deep:{label:"Alkalinity",ymin:2390,ymax:2410,precision:5},pH_deep:{label:"pH",ymin:7.5,ymax:8.5,precision:3},fCO2_deep:{label:"fCO2",ymin:350,ymax:450,precision:3},CO2_deep:{label:"[CO2]",ymin:5,ymax:15,precision:3},HCO3_deep:{label:"[HCO3]",ymin:1500,ymax:2e3,precision:4},CO3_deep:{label:"[CO3]",ymin:70,ymax:120,precision:3},pH_hilat:{label:"pH",ymin:7.5,ymax:8.5,precision:3},fCO2_hilat:{label:"fCO2",ymin:350,ymax:450,precision:3},CO2_hilat:{label:"[CO2]",ymin:5,ymax:15,precision:3},HCO3_hilat:{label:"[HCO3]",ymin:1500,ymax:2e3,precision:4},CO3_hilat:{label:"[CO3]",ymin:70,ymax:120,precision:3},pH_lolat:{label:"pH",ymin:7.5,ymax:8.5,precision:3},fCO2_lolat:{label:"fCO2",ymin:350,ymax:450,precision:3},CO2_lolat:{label:"[CO2]",ymin:5,ymax:15,precision:3},HCO3_lolat:{label:"[HCO3]",ymin:1500,ymax:2e3,precision:4},CO3_lolat:{label:"[CO3]",ymin:70,ymax:120,precision:3},c_deep:{label:"\u03a9",ymin:0,ymax:1,precision:2},c_lolat:{label:"\u03a9",ymin:0,ymax:1,precision:2},c_hilat:{label:"\u03a9",ymin:0,ymax:1,precision:2},pCO2_atmos:{label:"pCO2",ymin:350,ymax:450,precision:4},temp_lolat:{label:"Temp",ymin:20,ymax:25,precision:3},temp_hilat:{label:"Temp",ymin:2,ymax:6,precision:3},temp_deep:{label:"Temp",ymin:0,ymax:4,precision:3},sal_lolat:{label:"Temp",ymin:36,ymax:34,precision:3},sal_hilat:{label:"Temp",ymin:36,ymax:34,precision:3},sal_deep:{label:"Temp",ymin:36,ymax:34,precision:3}},P=e(14),E=e(17),A=e(12),T=e(54),k=e.n(T),D=(e(158),i.a.Component,function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(t){var l;return Object(r.a)(this,e),(l=a.call(this,t)).handleChange=function(t){l.props.handleChange(t)},l.handleChange=l.handleChange.bind(Object(h.a)(l)),l.fmtLabel=l.fmtLabel.bind(Object(h.a)(l)),l}return Object(p.a)(e,[{key:"fmtLabel",value:function(t){return this.props.fmt_info[0](t,this.props.fmt_info[1])}},{key:"render",value:function(){return i.a.createElement(k.a,{value:this.props.value,min:this.props.min,max:this.props.max,orientation:"vertical",onChange:this.handleChange,format:this.fmtLabel,labels:this.props.labels})}}]),e}(i.a.Component));function S(t,a){return t.toExponential(a)}function I(t,a){return t.toPrecision(a)}var w={vthermo:[S,2,.5*C.vthermo,2*C.vthermo],vmix:[S,2,.5*C.vmix,2*C.vmix],tau_hilat:[I,2,1,80],tau_lolat:[I,2,1,80],percent_CaCO3_hilat:[I,2,0,50],percent_CaCO3_lolat:[I,2,0,50],temp_hilat:[I,2,0,10],temp_lolat:[I,2,20,30]},M={vthermo:(g={},Object(A.a)(g,C.vthermo,""),Object(A.a)(g,2*C.vthermo,"x2"),Object(A.a)(g,C.vthermo/2,"/2"),g),vmix:(x={},Object(A.a)(x,C.vmix,""),Object(A.a)(x,2*C.vmix,"x2"),Object(A.a)(x,C.vmix/2,"/2"),x),tau_hilat:Object(A.a)({},C.tau_hilat,""),tau_lolat:Object(A.a)({},C.tau_lolat,""),percent_CaCO3_hilat:Object(A.a)({},C.percent_CaCO3_hilat,""),percent_CaCO3_lolat:Object(A.a)({},C.percent_CaCO3_lolat,""),temp_hilat:Object(A.a)({},C.temp_hilat,""),temp_lolat:Object(A.a)({},C.temp_lolat,"")},H={vthermo:"V<sub>thermo</sub>",vmix:"V<sub>mix</sub>",tau_hilat:"&tau;",tau_lolat:"&tau;",percent_CaCO3_hilat:"% CaCO<sub>3</sub>",percent_CaCO3_lolat:"% CaCO<sub>3</sub>",temp_hilat:"Temp",temp_lolat:"Temp"},K=function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(t){var l;return Object(r.a)(this,e),(l=a.call(this,t)).handleDouble=l.handleDouble.bind(Object(h.a)(l)),l.handleHalve=l.handleHalve.bind(Object(h.a)(l)),l.handleSliderChange=l.handleSliderChange.bind(Object(h.a)(l)),l}return Object(p.a)(e,[{key:"handleDouble",value:function(t){this.props.handleUpdate(this.props.param,2*this.props.value)}},{key:"handleHalve",value:function(t){this.props.handleUpdate(this.props.param,this.props.value/2)}},{key:"handleSliderChange",value:function(t){this.props.handleUpdate(this.props.param,t)}},{key:"render",value:function(){var t=w[this.props.param][2],a=w[this.props.param][3];return i.a.createElement("div",{className:"control-set"},i.a.createElement("h3",{dangerouslySetInnerHTML:{__html:H[this.props.param]}}),i.a.createElement(D,{value:this.props.value,min:t,max:a,handleChange:this.handleSliderChange,fmt_info:w[this.props.param],labels:M[this.props.param]}),i.a.createElement("div",{className:"control-value"},w[this.props.param][0](this.props.value,w[this.props.param][1])))}}]),e}(i.a.Component),L=function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(t){var l;return Object(r.a)(this,e),(l=a.call(this,t)).state={GtC_pinutubo:.05*.272,emitLabel:"Burn!"},l.handleVolcano=l.handleVolcano.bind(Object(h.a)(l)),l.handleEmissions=l.handleEmissions.bind(Object(h.a)(l)),l}return Object(p.a)(e,[{key:"handleVolcano",value:function(){this.props.handleVolcano(this.state.GtC_pinutubo)}},{key:"handleEmissions",value:function(){this.props.handleEmissions(),"Burn!"===this.state.emitLabel?this.state.emitLabel="IPCC":this.state.emitLabel="Burn!"}},{key:"render",value:function(){return i.a.createElement("div",{className:"control-section disasters",style:{zIndex:5}},i.a.createElement("h2",null,"Carbon Release: ",this.props.GtC_released.toFixed(2)," GtC"),i.a.createElement("div",{className:"model-controls"},i.a.createElement("div",{className:"control-set"},i.a.createElement("h3",null,"Fossil Fuels"),i.a.createElement(P.a,{onClick:this.handleEmissions,size:"sm"},this.state.emitLabel)),i.a.createElement("div",{className:"control-set"},i.a.createElement("h3",null,"Volcano"),i.a.createElement(P.a,{onClick:this.handleVolcano,size:"sm"},"Pinatubo"))))}}]),e}(i.a.Component),N=function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(){return Object(r.a)(this,e),a.apply(this,arguments)}return Object(p.a)(e,[{key:"render",value:function(){var t,a=[],e=Object(n.a)(this.props.params);try{for(e.s();!(t=e.n()).done;){var l=t.value;a.push(i.a.createElement(K,{key:l,param:l,value:this.props.now[l],handleUpdate:this.props.handleUpdate}))}}catch(s){e.e(s)}finally{e.f()}return i.a.createElement("div",{className:"control-section"},i.a.createElement("h2",null,this.props.title),i.a.createElement("div",{className:"model-controls"},a))}}]),e}(i.a.Component),V=e(9);var U=function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(t){var l;return Object(r.a)(this,e),(l=a.call(this,t)).interval=null,l.graph={},l}return Object(p.a)(e,[{key:"getLimits",value:function(t,a){var e=V.d(t),l=V.e(t);l>this.props.min&&(l=this.props.min),e<this.props.max&&(e=this.props.max);var i=e-l;return 0===i&&(i=10),[l-i*a,e+i*a]}},{key:"initGraph",value:function(){var t=this;this.graph.bb=V.g("#"+this.props.id).node().getBoundingClientRect();var a=this.graph.bb.height,e=this.graph.bb.width,l=a-10-40,i=e-10-40;this.graph.xScale=V.f().domain([0,this.props.npoints]).range([0,i]),this.graph.yScale=V.f().domain(this.getLimits(this.props.data[this.props.param],.05)).range([l,0]),this.graph.svg=V.g("#"+this.props.id).append("svg").attr("id","svg_"+this.props.id).attr("width",e).attr("height",a).append("g").attr("transform","translate(40, 10)"),this.graph.yAxis=V.b(this.graph.yScale).ticks(5),this.graph.svg.append("g").attr("class","y axis").call(this.graph.yAxis),this.graph.svg.append("g").attr("class","x axis").attr("transform","translate(0, "+l+")").call(V.a(this.graph.xScale)),this.graph.svg.append("text").attr("x",10).attr("y",l-10).style("text-anchor","start").text(this.props.ylabel).attr("class","ylabel"),this.graph.dataLabel=this.graph.svg.append("text").data([this.props.data[this.props.param][this.props.npoints-1].toPrecision(this.props.precision)]).attr("x",i).attr("y",10).style("text-anchor","end").attr("class","data-label").text((function(t){return t})),this.graph.line=V.c().x((function(a,e){return t.graph.xScale(e)})).y((function(a){return t.graph.yScale(a)})),this.graph.svg.append("path").attr("id","dataline").attr("d",this.graph.line(this.props.data[this.props.param]))}},{key:"updateLine",value:function(){this.graph.svg.selectAll("path#dataline").data([this.props.data[this.props.param]]).attr("d",this.graph.line)}},{key:"updateDataLabel",value:function(){this.graph.dataLabel.data([this.props.data[this.props.param][this.props.npoints-1].toPrecision(this.props.precision)]).text((function(t){return t}))}},{key:"updateYlim",value:function(){this.graph.yScale.domain(this.getLimits(this.props.data[this.props.param],.05)),this.graph.yAxis.scale(this.graph.yScale),V.g("#"+this.props.id).select(".y").transition(50).call(this.graph.yAxis)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidMount",value:function(){this.initGraph()}},{key:"componentDidUpdate",value:function(){this.updateYlim(),this.updateLine(),this.updateDataLabel()}},{key:"render",value:function(){return i.a.createElement("div",{className:"graph",id:this.props.id})}}]),e}(l.Component),z=function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(t){var l;return Object(r.a)(this,e),(l=a.call(this,t)).interval=null,l.graph={},l}return Object(p.a)(e,[{key:"getLimits",value:function(t,a){var e=V.d(t),l=V.e(t);l>this.props.min&&(l=this.props.min),e<this.props.max&&(e=this.props.max);var i=e-l;return 0===i&&(i=10),[l-i*a,e+i*a]}},{key:"initGraph",value:function(){var t=this;this.graph.bb=V.g("#"+this.props.id).node().getBoundingClientRect();var a=this.graph.bb.height,e=this.graph.bb.width,l=a-12,i=e-35;this.graph.xScale=V.f().domain([0,this.props.npoints]).range([0,i]),this.graph.yScale=V.f().domain(this.getLimits(this.props.data[this.props.param],.05)).range([l,0]),this.graph.svg=V.g("#"+this.props.id).append("svg").attr("id","svg_"+this.props.id).attr("viewBox","0 0 ".concat(e," ").concat(a)).append("g").attr("transform","translate(35, 6)"),this.graph.yAxis=V.b(this.graph.yScale).ticks(2),this.graph.svg.append("g").attr("class","y axis").call(this.graph.yAxis),this.graph.line=V.c().x((function(a,e){return t.graph.xScale(e)})).y((function(a){return t.graph.yScale(a)})),this.graph.svg.append("path").attr("id","dataline").attr("d",this.graph.line(this.props.data[this.props.param]))}},{key:"updateLine",value:function(){this.graph.svg.selectAll("path#dataline").data([this.props.data[this.props.param]]).attr("d",this.graph.line)}},{key:"updateDataLabel",value:function(){this.graph.dataLabel.data([this.props.data[this.props.param][this.props.npoints-1].toPrecision(this.props.precision)]).text((function(t){return t}))}},{key:"updateYlim",value:function(){this.graph.yScale.domain(this.getLimits(this.props.data[this.props.param],.05)),this.graph.yAxis.scale(this.graph.yScale),V.g("#"+this.props.id).select(".y").transition(50).call(this.graph.yAxis)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidMount",value:function(){this.initGraph()}},{key:"componentDidUpdate",value:function(){this.updateYlim(),this.updateLine()}},{key:"render",value:function(){return i.a.createElement("div",{className:"subgraph",id:this.props.id,style:{height:this.props.height}},i.a.createElement("div",{className:"subgraph-label",dangerouslySetInnerHTML:{__html:this.props.label}}))}}]),e}(l.Component),G=(i.a.Component,function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(t){var l;return Object(r.a)(this,e),(l=a.call(this,t)).state={h:"49%"},l}return Object(p.a)(e,[{key:"render",value:function(){if(0===this.props.variables.length)return i.a.createElement("div",null);var t,a=[],e=1,l=Object(n.a)(this.props.variables);try{for(l.s();!(t=l.n()).done;){var s=t.value,o=this.props.var_info[s];a.push(i.a.createElement(z,{data:this.props.data,id:s,min:o.ymin,max:o.ymax,param:s,key:s,npoints:this.props.data[s].length,label:o.label})),e<this.props.variables.length&&a.push(i.a.createElement("hr",null)),e+=1}}catch(r){l.e(r)}finally{l.f()}return i.a.createElement("div",{className:"graph-pane",style:{left:this.props.pos[0]+"%",bottom:this.props.pos[1]+"%",width:this.props.pos[2]+"%",height:this.props.pos[3]+"%"}},a)}}]),e}(i.a.Component)),B=e(18),W=e(25),R=(e(36),i.a.Component,["CO<sub>2</sub>","[PO<sub>4</sub>]","[DIC]","Alkalinity"]),F=["#888e9b","#d3ca98","#e98787","#e7abef"],Y=function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(){return Object(r.a)(this,e),a.apply(this,arguments)}return Object(p.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"box",id:this.props.id,style:{left:this.props.pos[0]+"%",bottom:this.props.pos[1]+"%",width:this.props.pos[2]+"%",height:this.props.pos[3]+"%",backgroundColor:this.props.color}},i.a.createElement("div",{className:"box-label",id:this.props.id},this.props.value))}}]),e}(l.Component);function J(t,a,e,l,i){return 100*((1-.8)/2+.8*(1-(t-a)/(e-a)))}function q(t,a,e){return"hsl("+t+","+a+"%,"+e+"%)"}var $=function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(){return Object(r.a)(this,e),a.apply(this,arguments)}return Object(p.a)(e,[{key:"getLimits",value:function(){var t=Math.min(Math.min.apply(Math,Object(B.a)(this.props.data[this.props.param+"_deep"])),Math.min.apply(Math,Object(B.a)(this.props.data[this.props.param+"_hilat"])),Math.min.apply(Math,Object(B.a)(this.props.data[this.props.param+"_lolat"]))),a=Math.max(Math.max.apply(Math,Object(B.a)(this.props.data[this.props.param+"_deep"])),Math.max.apply(Math,Object(B.a)(this.props.data[this.props.param+"_hilat"])),Math.max.apply(Math,Object(B.a)(this.props.data[this.props.param+"_lolat"])));return t===a&&(t-=1,a+=1),[t,a]}},{key:"render",value:function(){for(var t=this.getLimits(),a=this.props.npoints-1,e=this.props.data.pCO2_atmos[a],l=this.props.data[this.props.param+"_deep"][a],s=q(200,51,J(l,t[0],t[1])),o=this.props.data[this.props.param+"_lolat"][a],n=q(200,51,J(o,t[0],t[1])),r=this.props.data[this.props.param+"_hilat"][a],p=q(200,51,J(r,t[0],t[1])),h=[],c=0;c<F.length;c++)h.push(i.a.createElement("div",{className:"legend item"},i.a.createElement("div",{className:"legend key",style:{backgroundColor:F[c]}}),i.a.createElement("div",{className:"legend label",dangerouslySetInnerHTML:{__html:R[c]}})));return i.a.createElement("div",{className:"schematic-container"},i.a.createElement("div",{className:"schematic",id:"threebox"},i.a.createElement(Y,{id:"atmos",pos:[0,80,100,20],color:"white",value:"pCO2: "+e.toPrecision(this.props.var_info.pCO2_atmos.precision)}),i.a.createElement(Y,{id:"deep",pos:[0,0,100,50],color:s,value:l.toPrecision(this.props.var_info[this.props.param+"_deep"].precision)}),i.a.createElement(Y,{id:"lolat",pos:[40,50,60,30],color:n,value:o.toPrecision(this.props.var_info[this.props.param+"_deep"].precision)}),i.a.createElement(Y,{id:"hilat",pos:[0,40,40,40],color:p,value:r.toPrecision(this.props.var_info[this.props.param+"_deep"].precision)}),i.a.createElement(G,{pos:[38,84,22,12],data:this.props.data,variables:["pCO2_atmos"],var_info:j,id:"g_atmos"}),i.a.createElement(G,{pos:[2,54,22,12],data:this.props.data,variables:this.props.plot_hilat,var_info:j,id:"g_hilat"}),i.a.createElement(G,{pos:[76,58,22,12],data:this.props.data,variables:this.props.plot_lolat,var_info:j,id:"g_lolat"}),i.a.createElement(G,{pos:[38,10,22,12],data:this.props.data,variables:this.props.plot_deep,var_info:j,id:"g_deep"}),i.a.createElement(Q,{fluxes:[_(-this.props.fluxes.exCO2_hilat)],sizes:[.3],centre:[18,20],colors:[F[0]],label:"Gas exch.",id:"gas"}),i.a.createElement(Q,{fluxes:[_(-this.props.fluxes.exCO2_lolat)],sizes:[.3],centre:[70,20],colors:[F[0]],label:"Gas exch.",id:"gas"}),i.a.createElement(Q,{fluxes:[this.props.fluxes.vthermo_PO4_hilat/this.props.data.vol_ocean[a],this.props.fluxes.vthermo_DIC_hilat/this.props.data.vol_ocean[a],this.props.fluxes.vthermo_TA_hilat/this.props.data.vol_ocean[a]],sizes:[.001,.1,.05],centre:[32,60],colors:F.slice(1),label:"V<sub>thermo</sub>"}),i.a.createElement(Q,{fluxes:[this.props.fluxes.vthermo_PO4_lolat/this.props.data.vol_ocean[a],this.props.fluxes.vthermo_DIC_lolat/this.props.data.vol_ocean[a],this.props.fluxes.vthermo_TA_lolat/this.props.data.vol_ocean[a]],sizes:[.001,.1,.05],centre:[48,50],colors:F.slice(1),label:"V<sub>thermo</sub>"}),i.a.createElement(Q,{fluxes:[this.props.fluxes.vthermo_PO4_hilat/this.props.data.vol_ocean[a],this.props.fluxes.vthermo_DIC_hilat/this.props.data.vol_ocean[a],this.props.fluxes.vthermo_TA_hilat/this.props.data.vol_ocean[a]],sizes:[.001,.1,.05],centre:[40,42],colors:F.slice(1),id:"lohi",label:"V<sub>thermo</sub>"}),i.a.createElement(Q,{fluxes:[-this.props.fluxes.vmix_PO4_hilat/this.props.data.vol_ocean[a],-this.props.fluxes.vmix_DIC_hilat/this.props.data.vol_ocean[a],-this.props.fluxes.vmix_TA_hilat/this.props.data.vol_ocean[a]],sizes:[.001,.1,.05],centre:[24,60],colors:F.slice(1),label:"V<sub>mix</sub>"}),i.a.createElement(Q,{fluxes:[-this.props.fluxes.vmix_PO4_lolat/this.props.data.vol_ocean[a],-this.props.fluxes.vmix_DIC_lolat/this.props.data.vol_ocean[a],-this.props.fluxes.vmix_TA_lolat/this.props.data.vol_ocean[a]],sizes:[.001,.1,.05],centre:[56,50],colors:F.slice(1),label:"V<sub>mix</sub>"}),i.a.createElement(Q,{fluxes:[-this.props.fluxes.prod_PO4_hilat/this.props.data.vol_ocean[a],-this.props.fluxes.prod_DIC_hilat/this.props.data.vol_ocean[a],-this.props.fluxes.prod_TA_hilat/this.props.data.vol_ocean[a]],sizes:[.001,.1,.05],centre:[16,60],colors:F.slice(1),label:"\u03c4"}),i.a.createElement(Q,{fluxes:[-this.props.fluxes.prod_PO4_lolat/this.props.data.vol_ocean[a],-this.props.fluxes.prod_DIC_lolat/this.props.data.vol_ocean[a],-this.props.fluxes.prod_TA_lolat/this.props.data.vol_ocean[a]],sizes:[.001,.1,.05],centre:[64,50],colors:F.slice(1),label:"\u03c4"}),i.a.createElement("div",{className:"legend box"},i.a.createElement("h3",null,"Net Fluxes"),h)))}}]),e}(l.Component),Q=function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(t){var l;return Object(r.a)(this,e),(l=a.call(this,t)).state={arrowWidthPercent:1,arrowHeightPercent:10},l.style={width:l.props.fluxes.length*l.state.arrowWidthPercent+"%",height:l.state.arrowHeightPercent+"%",left:l.props.centre[0]-l.props.fluxes.length*l.state.arrowWidthPercent/2+"%",top:l.props.centre[1]-.5*l.state.arrowHeightPercent+"%"},l}return Object(p.a)(e,[{key:"render",value:function(){for(var t=[],a=this.props.fluxes.length,e=0,l=0;l<a;l++)t.push(i.a.createElement(X,{direction:this.props.fluxes[l],width:100/a+"%",amplitude:this.props.sizes[l],color:this.props.colors[l]})),this.props.fluxes[l]>0?e+=1:e-=1;var s={};return e<0?s.bottom="55%":s.top="55%",i.a.createElement("div",{className:"flux-pane",id:this.props.id,style:this.style},i.a.createElement("div",{className:"flux-label",dangerouslySetInnerHTML:{__html:this.props.label},style:s}),t)}}]),e}(l.Component),X=function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(t){return Object(r.a)(this,e),a.call(this,t)}return Object(p.a)(e,[{key:"size_2_percent",value:function(t){return Math.abs(50*t/this.props.amplitude)+"%"}},{key:"render",value:function(){var t={width:"95%",left:"0%",backgroundColor:this.props.color};return this.props.direction>=0?(t.bottom="50%",t.height=this.size_2_percent(this.props.direction)):(t.top="50%",t.height=this.size_2_percent(this.props.direction)),i.a.createElement("div",{className:"flux-box",style:{width:this.props.width}},i.a.createElement("div",{className:"flux-arrow",style:t}))}}]),e}(l.Component),Z=e(38),tt=(i.a.Component,function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(){return Object(r.a)(this,e),a.apply(this,arguments)}return Object(p.a)(e,[{key:"render",value:function(){var t,a=[],e=Object(n.a)(this.props.params);try{for(e.s();!(t=e.n()).done;){var l=t.value;a.push(i.a.createElement(E.a,{key:l,value:l},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:b[l]}})))}}catch(s){e.e(s)}finally{e.f()}return i.a.createElement(Z.a,{type:"radio",name:"plot_params",size:"sm",onChange:this.props.onChange,defaultValue:this.props.defaultValue},a)}}]),e}(i.a.Component)),at=function(t){Object(c.a)(e,t);var a=Object(m.a)(e);function e(t){var l;for(var i in Object(r.a)(this,e),(l=a.call(this,t)).state={start_state:C,now:C,history:{},fluxes:y(C)},l.state.Ks=l.genKs(C),l.state.now)l.state.history[i]=new Array(200).fill(l.state.now[i]);l.state.schematicParam="fCO2",l.state.model_global_params=["vmix","vthermo"],l.state.model_hilat_params=["tau_hilat","percent_CaCO3_hilat","temp_hilat"],l.state.model_lolat_params=["tau_lolat","percent_CaCO3_lolat","temp_lolat"],l.state.ocean_vars=["fCO2","DIC","TA","pH","CO3","HCO3","c","PO4"],l.state.plot_atmos=["pCO2_atmos"],l.state.plot_ocean=["fCO2"];for(var s=0,o=["_deep","_hilat","_lolat"];s<o.length;s++){var n=o[s];l.state["plot"+n]=[l.state.plot_ocean[0]+n]}return l.state.start_stop_button="Stop",l.state.running=!0,l.interval=null,l.emitting=!1,l.state.GtC_released=0,l.stepModel=l.stepModel.bind(Object(h.a)(l)),l.startSimulation=l.startSimulation.bind(Object(h.a)(l)),l.stopSimulation=l.stopSimulation.bind(Object(h.a)(l)),l.resetModel=l.resetModel.bind(Object(h.a)(l)),l.toggleSimulation=l.toggleSimulation.bind(Object(h.a)(l)),l.genPlotVars=l.genPlotVars.bind(Object(h.a)(l)),l.genKs=l.genKs.bind(Object(h.a)(l)),l.handleDropdownSelect=l.handleDropdownSelect.bind(Object(h.a)(l)),l.handleParamButtonChange=l.handleParamButtonChange.bind(Object(h.a)(l)),l.handleParamToggle=l.handleParamToggle.bind(Object(h.a)(l)),l.handleParamUpdate=l.handleParamUpdate.bind(Object(h.a)(l)),l.handleVolcano=l.handleVolcano.bind(Object(h.a)(l)),l.toggleEmissions=l.toggleEmissions.bind(Object(h.a)(l)),l}return Object(p.a)(e,[{key:"startSimulation",value:function(){var t=this;null==this.interval&&(this.interval=setInterval((function(){t.stepModel()}),50)),this.setState({running:!0})}},{key:"stopSimulation",value:function(){clearInterval(this.interval),this.interval=null,this.setState({running:!1})}},{key:"toggleSimulation",value:function(){null===this.interval?(this.startSimulation(),this.setState({start_stop_button:"Stop"})):(this.stopSimulation(),this.setState({start_stop_button:"Run"}))}},{key:"resetModel",value:function(){this.setState({now:C,fluxes:y(C),history:this.updateHistory(C),Ks:this.genKs(C),GtC_released:0})}},{key:"stepModel",value:function(){var t=this.state.now,a=0;this.emitting&&(t.pCO2_atmos+=u(2),a=2);var e=y(t);t=f(t,e,this.state.Ks),this.setState({now:t,fluxes:e,history:this.updateHistory(t),emissions:this.state.GtC_released+=a})}},{key:"updateHistory",value:function(t){var a=this.state.history;for(var e in this.state.now)a[e].shift(),a[e].push(t[e]);return a}},{key:"handleParamButtonChange",value:function(t){this.setState(this.genPlotVars(t))}},{key:"handleParamToggle",value:function(t){var a=this.genPlotVars([t]);a.schematicParam=t,this.setState(a)}},{key:"handleVolcano",value:function(t){var a=this.state.now;a.pCO2_atmos+=u(t),this.setState({now:a,GtC_released:this.state.GtC_released+t})}},{key:"toggleEmissions",value:function(){this.emitting?this.emitting=!1:this.emitting=!0}},{key:"genPlotVars",value:function(t){for(var a={plot_ocean:t,plot_atmos:["pCO2_atmos"]},e=0,l=["_deep","_hilat","_lolat"];e<l.length;e++){var i=l[e];a["plot"+i]=[];var s,o=Object(n.a)(t);try{for(o.s();!(s=o.n()).done;){var r=s.value;a["plot"+i].push(r+i)}}catch(p){o.e(p)}finally{o.f()}}return a}},{key:"genKs",value:function(t){var a={};return a.deep=d({Tc:t.temp_deep,Sal:t.sal_deep}),a.hilat=d({Tc:t.temp_hilat,Sal:t.sal_hilat}),a.lolat=d({Tc:t.temp_lolat,Sal:t.sal_lolat}),a}},{key:"componentDidMount",value:function(){this.startSimulation()}},{key:"componentWillUnmount",value:function(){this.stopSimulation()}},{key:"handleDropdownSelect",value:function(t){this.setState({schematicParam:t})}},{key:"handleParamUpdate",value:function(t,a){var e=this.state.now;e[t]=a,this.setState({now:e,Ks:this.genKs(e)})}},{key:"render",value:function(){return i.a.createElement("div",{id:"main-panel"},i.a.createElement("div",{className:"top-bar"},i.a.createElement("div",{className:"control-container"},i.a.createElement(N,{title:"Global",params:this.state.model_global_params,now:this.state.now,handleUpdate:this.handleParamUpdate}),i.a.createElement(N,{title:"High Latitude",params:this.state.model_hilat_params,now:this.state.now,handleUpdate:this.handleParamUpdate}),i.a.createElement(N,{title:"Low Latitude",params:this.state.model_lolat_params,now:this.state.now,handleUpdate:this.handleParamUpdate}),i.a.createElement(L,{handleVolcano:this.handleVolcano,handleEmissions:this.toggleEmissions,GtC_released:this.state.GtC_released}))),i.a.createElement("div",{className:"main-display"},i.a.createElement($,{param:this.state.schematicParam,data:this.state.history,fluxes:this.state.fluxes,ocean_vars:this.state.ocean_vars,npoints:200,var_info:j,handleDropdownSelect:this.handleDropdownSelect,plot_hilat:this.state.plot_hilat,plot_lolat:this.state.plot_lolat,plot_deep:this.state.plot_deep})),i.a.createElement("div",{className:"bottom-bar"},i.a.createElement("div",{id:"plot-controls"},i.a.createElement(tt,{id:"plot-param-toggle",params:this.state.ocean_vars,defaultValue:this.state.plot_ocean,onChange:this.handleParamToggle}),i.a.createElement("div",{id:"start-stop"},i.a.createElement(P.a,{onClick:this.resetModel,variant:"outline-secondary",size:"sm",id:"model-reset"},"Reset"),i.a.createElement(E.a,{type:"checkbox",variant:"outline-secondary",onChange:this.toggleSimulation,value:1},this.state.start_stop_button)))))}}]),e}(i.a.Component);e(161);var et=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(at,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(et,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[146,1,2]]]);
//# sourceMappingURL=main.0e82ce98.chunk.js.map