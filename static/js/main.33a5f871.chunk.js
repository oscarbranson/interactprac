(this["webpackJsonpcarbon-live-js"]=this["webpackJsonpcarbon-live-js"]||[]).push([[0],{145:function(t,e,a){t.exports=a(161)},150:function(t,e,a){},160:function(t,e,a){},161:function(t,e,a){"use strict";a.r(e);var l=a(0),i=a.n(l),s=a(27),o=a.n(s),n=(a(150),a(3)),r=a(5),p=a(6),h=a(4),c=a(8),m=a(7);function _(t){return 1e-15*t*12}function d(t){return t/2.13}function u(t){var e=t.Tc,a=t.Sal,l=Math.sqrt(a),i=e+273.15,s=Math.log(i),o=Math.exp(9345.17/i-60.2409+23.3585*Math.log(i/100)+a*(.023517-.023656*i/100+i/100*.0047036*(i/100))),n=Math.pow(10,-3633.86/i+61.2172-9.6777*s+.011555*a-1152e-7*a*a),r=Math.pow(10,-471.78/i-25.929+3.16967*s+.01781*a-1122e-7*a*a),p=Math.exp(148.9652-13847.26/i-23.6521*s+(118.67/i-5.977+1.0495*s)*l-.01615*a),h=Math.exp((-8966.9-2890.53*l-77.942*a+1.728*a*l-.0996*a*a)/i+(148.0248+137.1942*l+1.62142*a)+(-24.4344-25.085*l-.2474*a)*s+.053105*l*i),c=Math.pow(10,-171.9065-.077993*i+2839.319/i+71.595*Math.log10(i)+(.0028426*i-.77712+178.34/i)*l-.07711*a+.0041249*a*l);return{K0:o,K1:n,K2:r,KB:h,KW:p,KspA:Math.pow(10,-171.945-.077993*i+2903.293/i+71.595*Math.log10(i)+(.0017276*i-.068393+88.135/i)*l-.10018*a+.0059415*a*l),KspC:c}}function v(t){var e=t.DIC,a=t.TA,l=t.Sal,i=t.Ks,s=function(t){for(var e=t.DIC,a=t.TA,l=t.Sal,i=t.Ks,s=4157e-7/35*l,o=Math.pow(10,-8),n=o,r=null,p=null,h=null;Math.abs(n)>1e-15;)o-=n=(a-((r=e/(1+o/i.K1+i.K2/o))+2*(p=e/(1+o/i.K2+Math.pow(o,2)/(i.K1*i.K2))))-s*i.KB/(i.KB+o)-(h=i.KW/o)+o)/(1+(2*p+r+h)/o+s*i.KB/Math.pow(i.KB+o,2));return o}({DIC:e*=1e-6,TA:a*=1e-6,Sal:l,Ks:i}),o=-Math.log10(s),n=1e6*e/(1+i.K1/s+i.K1*i.K2/Math.pow(s,2)),r=1e6*e/(1+s/i.K1+i.K2/s),p=1e6*e/(1+s/i.K2+Math.pow(s,2)/(i.K1*i.K2));return{pH:o,fCO2:n/i.K0,CO2:n,HCO3:r,CO3:p,c:1e-6*p/(i.KspC/.0102)}}var b={PO4:"[PO<sub>4</sub>]",c:"\u03a9",DIC:"DIC",TA:"TA",fCO2:"fCO<sub>2</sub>",pH:"pH",CO3:"[CO<sub>3</sub><sup>2-</sup>]",HCO3:"[HCO<sub>3</sub><sup>-</sup>]"},O=358e12,C={kas:.02,vmix:189e13,vthermo:63072e10,tau_hilat:50,tau_lolat:1,percent_CaCO3_hilat:10,percent_CaCO3_lolat:20,depth_lolat:100,depth_hilat:200,vol_ocean:134e16,vol_deep:129883e13,vol_lolat:3043e13,vol_hilat:1074e13,mass_atmos:5132e15,moles_atmos:1773e17,SA_ocean:O,fSA_hilat:.15,fSA_lolat:.85,SA_hilat:.15*O,SA_lolat:.85*O,temp_deep:1.92,temp_hilat:3.715,temp_lolat:22.85,sal_lolat:35.15,sal_hilat:33.5,sal_deep:34.72,PO4_lolat:.0484,PO4_hilat:1.66,PO4_deep:2.38,DIC_lolat:1958,DIC_hilat:2006,DIC_deep:2260,TA_lolat:2315,TA_hilat:2291,TA_deep:2380.4,c_lolat:1,c_hilat:1,c_deep:1,fCO2_lolat:399,fCO2_hilat:369,fCO2_deep:502,pH_lolat:7.99,pH_hilat:8.23,pH_deep:7.97,CO2_lolat:9,CO2_hilat:9,CO2_deep:9,HCO3_lolat:1900,HCO3_hilat:1900,HCO3_deep:1900,CO3_lolat:300,CO3_hilat:300,CO3_deep:300,pCO2_atmos:389};function y(t){var e={};e.vmix_PO4_hilat=t.vmix*(t.PO4_hilat-t.PO4_deep),e.vmix_PO4_lolat=t.vmix*(t.PO4_lolat-t.PO4_deep),e.vmix_DIC_hilat=t.vmix*(t.DIC_hilat-t.DIC_deep),e.vmix_DIC_lolat=t.vmix*(t.DIC_lolat-t.DIC_deep),e.vmix_TA_hilat=t.vmix*(t.TA_hilat-t.TA_deep),e.vmix_TA_lolat=t.vmix*(t.TA_lolat-t.TA_deep),e.vthermo_PO4_deep=t.vthermo*(t.PO4_hilat-t.PO4_deep),e.vthermo_PO4_lolat=t.vthermo*(t.PO4_deep-t.PO4_lolat),e.vthermo_PO4_hilat=t.vthermo*(t.PO4_lolat-t.PO4_hilat),e.vthermo_DIC_deep=t.vthermo*(t.DIC_hilat-t.DIC_deep),e.vthermo_DIC_lolat=t.vthermo*(t.DIC_deep-t.DIC_lolat),e.vthermo_DIC_hilat=t.vthermo*(t.DIC_lolat-t.DIC_hilat),e.vthermo_TA_deep=t.vthermo*(t.TA_hilat-t.TA_deep),e.vthermo_TA_lolat=t.vthermo*(t.TA_deep-t.TA_lolat),e.vthermo_TA_hilat=t.vthermo*(t.TA_lolat-t.TA_hilat),e.prod_PO4_hilat=t.PO4_hilat*t.vol_hilat/t.tau_hilat,e.prod_PO4_lolat=t.PO4_lolat*t.vol_lolat/t.tau_lolat;var a=106+106*t.percent_CaCO3_lolat/100,l=106+106*t.percent_CaCO3_hilat/100;e.prod_DIC_hilat=e.prod_PO4_hilat*l,e.prod_DIC_lolat=e.prod_PO4_lolat*a;var i=.15*106+212*t.percent_CaCO3_lolat/100,s=.15*106+212*t.percent_CaCO3_hilat/100;return e.prod_TA_hilat=e.prod_PO4_hilat*s,e.prod_TA_lolat=e.prod_PO4_lolat*i,e.exCO2_lolat=t.kas*t.SA_lolat*(t.pCO2_atmos-t.fCO2_lolat),e.exCO2_hilat=t.kas*t.SA_hilat*(t.pCO2_atmos-t.fCO2_hilat),e}function f(t,e,a){var l=Object.assign({},t);return l.PO4_deep+=(e.vmix_PO4_hilat+e.vmix_PO4_lolat+e.vthermo_PO4_deep+e.prod_PO4_hilat+e.prod_PO4_lolat)/t.vol_deep,l.PO4_hilat+=(-e.vmix_PO4_hilat+e.vthermo_PO4_hilat-e.prod_PO4_hilat)/t.vol_hilat,l.PO4_lolat+=(-e.vmix_PO4_lolat+e.vthermo_PO4_lolat-e.prod_PO4_lolat)/t.vol_lolat,l.DIC_deep+=(e.vmix_DIC_hilat+e.vmix_DIC_lolat+e.vthermo_DIC_deep+e.prod_DIC_hilat+e.prod_DIC_lolat)/t.vol_deep,l.DIC_hilat+=(-e.vmix_DIC_hilat+e.vthermo_DIC_hilat-e.prod_DIC_hilat+1e3*e.exCO2_hilat)/t.vol_hilat,l.DIC_lolat+=(-e.vmix_DIC_lolat+e.vthermo_DIC_lolat-e.prod_DIC_lolat+1e3*e.exCO2_lolat)/t.vol_lolat,l.TA_deep+=(e.vmix_TA_hilat+e.vmix_TA_lolat+e.vthermo_TA_deep+e.prod_TA_hilat+e.prod_TA_lolat)/t.vol_deep,l.TA_hilat+=(-e.vmix_TA_hilat+e.vthermo_TA_hilat-e.prod_TA_hilat)/t.vol_hilat,l.TA_lolat+=(-e.vmix_TA_lolat+e.vthermo_TA_lolat-e.prod_TA_lolat)/t.vol_lolat,l.pCO2_atmos+=12*(-e.exCO2_hilat-e.exCO2_lolat)/213e13,l=function(t,e){for(var a=v({DIC:t.DIC_deep,TA:t.TA_deep,Sal:t.sal_deep,Ks:e.deep}),l=v({DIC:t.DIC_hilat,TA:t.TA_hilat,Sal:t.sal_hilat,Ks:e.hilat}),i=v({DIC:t.DIC_lolat,TA:t.TA_lolat,Sal:t.sal_lolat,Ks:e.lolat}),s=0,o=["pH","fCO2","CO2","HCO3","CO3","c"];s<o.length;s++){var n=o[s];t[n+"_deep"]=a[n],t[n+"_lolat"]=i[n],t[n+"_hilat"]=l[n]}return t}(l,a)}var g,x,j={vmix:{label:"Mixing Rate (m3 / yr)",ymin:null,ymax:null,precision:null},vthermo:{label:"Thermohaline Mixing Rate (m3 / yr)",ymin:null,ymax:null,precision:null},tau_lolat:{label:"Productivity (tau)",ymin:null,ymax:null,precision:null},tau_hilat:{label:"Productivity (tau)",ymin:null,ymax:null,precision:null},percent_CaCO3_lolat:{label:"% CaCO3",ymin:0,ymax:100,precision:1},percent_CaCO3:{label:"% CaCO3",ymin:0,ymax:100,precision:1},vol_deep:{label:"Ocean Volume (m3)",ymin:null,ymax:null,precision:null},vol_lolat:{label:"Ocean Volume (m3)",ymin:null,ymax:null,precision:null},vol_hilat:{label:"Ocean Volume (m3)",ymin:null,ymax:null,precision:null},PO4_lolat:{label:"[PO4]",ymin:0,ymax:1,precision:3},PO4_hilat:{label:"[PO4]",ymin:0,ymax:1,precision:3},PO4_deep:{label:"[PO4]",ymin:2.4,ymax:2.6,precision:3},DIC_hilat:{label:"[DIC]",ymin:1800,ymax:2e3,precision:4},DIC_lolat:{label:"[DIC]",ymin:1800,ymax:2e3,precision:4},DIC_deep:{label:"[DIC]",ymin:2130,ymax:2150,precision:5},TA_lolat:{label:"Alkalinity",ymin:2200,ymax:2400,precision:4},TA_hilat:{label:"Alkalinity",ymin:2200,ymax:2400,precision:4},TA_deep:{label:"Alkalinity",ymin:2390,ymax:2410,precision:5},pH_deep:{label:"pH",ymin:7.5,ymax:8.5,precision:3},fCO2_deep:{label:"fCO2",ymin:350,ymax:450,precision:3},CO2_deep:{label:"[CO2]",ymin:5,ymax:15,precision:3},HCO3_deep:{label:"[HCO3]",ymin:1500,ymax:2e3,precision:4},CO3_deep:{label:"[CO3]",ymin:70,ymax:120,precision:3},pH_hilat:{label:"pH",ymin:7.5,ymax:8.5,precision:3},fCO2_hilat:{label:"fCO2",ymin:350,ymax:450,precision:3},CO2_hilat:{label:"[CO2]",ymin:5,ymax:15,precision:3},HCO3_hilat:{label:"[HCO3]",ymin:1500,ymax:2e3,precision:4},CO3_hilat:{label:"[CO3]",ymin:70,ymax:120,precision:3},pH_lolat:{label:"pH",ymin:7.5,ymax:8.5,precision:3},fCO2_lolat:{label:"fCO2",ymin:350,ymax:450,precision:3},CO2_lolat:{label:"[CO2]",ymin:5,ymax:15,precision:3},HCO3_lolat:{label:"[HCO3]",ymin:1500,ymax:2e3,precision:4},CO3_lolat:{label:"[CO3]",ymin:70,ymax:120,precision:3},c_deep:{label:"\u03a9",ymin:0,ymax:1,precision:2},c_lolat:{label:"\u03a9",ymin:0,ymax:1,precision:2},c_hilat:{label:"\u03a9",ymin:0,ymax:1,precision:2},pCO2_atmos:{label:"pCO2",ymin:350,ymax:450,precision:4},temp_lolat:{label:"Temp",ymin:20,ymax:25,precision:3},temp_hilat:{label:"Temp",ymin:2,ymax:6,precision:3},temp_deep:{label:"Temp",ymin:0,ymax:4,precision:3},sal_lolat:{label:"Temp",ymin:36,ymax:34,precision:3},sal_hilat:{label:"Temp",ymin:36,ymax:34,precision:3},sal_deep:{label:"Temp",ymin:36,ymax:34,precision:3}},E=a(14),P=a(12),A=a(52),k=a.n(A),D=(a(157),i.a.Component,function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(t){var l;return Object(r.a)(this,a),(l=e.call(this,t)).handleChange=function(t){l.props.handleChange(t)},l.handleChange=l.handleChange.bind(Object(h.a)(l)),l.fmtLabel=l.fmtLabel.bind(Object(h.a)(l)),l}return Object(p.a)(a,[{key:"fmtLabel",value:function(t){return this.props.fmt_info[0](t,this.props.fmt_info[1])}},{key:"render",value:function(){return i.a.createElement(k.a,{value:this.props.value,min:this.props.min,max:this.props.max,orientation:"vertical",onChange:this.handleChange,format:this.fmtLabel,labels:this.props.labels})}}]),a}(i.a.Component));function S(t,e){return t.toExponential(e)}function T(t,e){return t.toPrecision(e)}var I={vthermo:[S,2,.5*C.vthermo,2*C.vthermo],vmix:[S,2,.5*C.vmix,2*C.vmix],tau_hilat:[T,2,1,80],tau_lolat:[T,2,1,80],percent_CaCO3_hilat:[T,2,0,50],percent_CaCO3_lolat:[T,2,0,50],temp_hilat:[T,2,0,10],temp_lolat:[T,2,20,30]},w={vthermo:(g={},Object(P.a)(g,C.vthermo,""),Object(P.a)(g,2*C.vthermo,"x2"),Object(P.a)(g,C.vthermo/2,"/2"),g),vmix:(x={},Object(P.a)(x,C.vmix,""),Object(P.a)(x,2*C.vmix,"x2"),Object(P.a)(x,C.vmix/2,"/2"),x),tau_hilat:Object(P.a)({},C.tau_hilat,""),tau_lolat:Object(P.a)({},C.tau_lolat,""),percent_CaCO3_hilat:Object(P.a)({},C.percent_CaCO3_hilat,""),percent_CaCO3_lolat:Object(P.a)({},C.percent_CaCO3_lolat,""),temp_hilat:Object(P.a)({},C.temp_hilat,""),temp_lolat:Object(P.a)({},C.temp_lolat,"")},M={vthermo:"V<sub>thermo</sub>",vmix:"V<sub>mix</sub>",tau_hilat:"&tau;",tau_lolat:"&tau;",percent_CaCO3_hilat:"% CaCO<sub>3</sub>",percent_CaCO3_lolat:"% CaCO<sub>3</sub>",temp_hilat:"Temp",temp_lolat:"Temp"},H=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(t){var l;return Object(r.a)(this,a),(l=e.call(this,t)).handleDouble=l.handleDouble.bind(Object(h.a)(l)),l.handleHalve=l.handleHalve.bind(Object(h.a)(l)),l.handleSliderChange=l.handleSliderChange.bind(Object(h.a)(l)),l}return Object(p.a)(a,[{key:"handleDouble",value:function(t){this.props.handleUpdate(this.props.param,2*this.props.value)}},{key:"handleHalve",value:function(t){this.props.handleUpdate(this.props.param,this.props.value/2)}},{key:"handleSliderChange",value:function(t){this.props.handleUpdate(this.props.param,t)}},{key:"render",value:function(){var t=I[this.props.param][2],e=I[this.props.param][3];return i.a.createElement("div",{className:"control-set"},i.a.createElement("h3",{dangerouslySetInnerHTML:{__html:M[this.props.param]}}),i.a.createElement(D,{value:this.props.value,min:t,max:e,handleChange:this.handleSliderChange,fmt_info:I[this.props.param],labels:w[this.props.param]}),i.a.createElement("div",{className:"control-value"},I[this.props.param][0](this.props.value,I[this.props.param][1])))}}]),a}(i.a.Component),K=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(t){var l;return Object(r.a)(this,a),(l=e.call(this,t)).state={GtC_pinutubo:.05*.272,emitLabel:"Burn!"},l.handleVolcano=l.handleVolcano.bind(Object(h.a)(l)),l.handleEmissions=l.handleEmissions.bind(Object(h.a)(l)),l}return Object(p.a)(a,[{key:"handleVolcano",value:function(){this.props.handleVolcano(this.state.GtC_pinutubo)}},{key:"handleEmissions",value:function(){this.props.handleEmissions(),"Burn!"===this.state.emitLabel?this.state.emitLabel="IPCC":this.state.emitLabel="Burn!"}},{key:"render",value:function(){return i.a.createElement("div",{className:"control-section disasters",style:{zIndex:5}},i.a.createElement("h2",null,"Disasters: ",this.props.GtC_released.toFixed(2)," GtC"),i.a.createElement("div",{className:"model-controls"},i.a.createElement("div",{className:"control-set"},i.a.createElement("h3",null,"Volcano"),i.a.createElement(E.a,{onClick:this.handleVolcano,size:"sm"},"Pinatubo")),i.a.createElement("div",{className:"control-set"},i.a.createElement("h3",null,"Fossil Fuels"),i.a.createElement(E.a,{onClick:this.handleEmissions,size:"sm"},this.state.emitLabel))))}}]),a}(i.a.Component),L=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t,e=[],a=Object(n.a)(this.props.params);try{for(a.s();!(t=a.n()).done;){var l=t.value;e.push(i.a.createElement(H,{key:l,param:l,value:this.props.now[l],handleUpdate:this.props.handleUpdate}))}}catch(s){a.e(s)}finally{a.f()}return i.a.createElement("div",{className:"control-section"},i.a.createElement("h2",null,this.props.title),i.a.createElement("div",{className:"model-controls"},e))}}]),a}(i.a.Component),N=a(9);var V=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(t){var l;return Object(r.a)(this,a),(l=e.call(this,t)).interval=null,l.graph={},l}return Object(p.a)(a,[{key:"getLimits",value:function(t,e){var a=N.d(t),l=N.e(t);l>this.props.min&&(l=this.props.min),a<this.props.max&&(a=this.props.max);var i=a-l;return 0===i&&(i=10),[l-i*e,a+i*e]}},{key:"initGraph",value:function(){var t=this;this.graph.bb=N.g("#"+this.props.id).node().getBoundingClientRect();var e=this.graph.bb.height,a=this.graph.bb.width,l=e-10-40,i=a-10-40;this.graph.xScale=N.f().domain([0,this.props.npoints]).range([0,i]),this.graph.yScale=N.f().domain(this.getLimits(this.props.data[this.props.param],.05)).range([l,0]),this.graph.svg=N.g("#"+this.props.id).append("svg").attr("id","svg_"+this.props.id).attr("width",a).attr("height",e).append("g").attr("transform","translate(40, 10)"),this.graph.yAxis=N.b(this.graph.yScale).ticks(5),this.graph.svg.append("g").attr("class","y axis").call(this.graph.yAxis),this.graph.svg.append("g").attr("class","x axis").attr("transform","translate(0, "+l+")").call(N.a(this.graph.xScale)),this.graph.svg.append("text").attr("x",10).attr("y",l-10).style("text-anchor","start").text(this.props.ylabel).attr("class","ylabel"),this.graph.dataLabel=this.graph.svg.append("text").data([this.props.data[this.props.param][this.props.npoints-1].toPrecision(this.props.precision)]).attr("x",i).attr("y",10).style("text-anchor","end").attr("class","data-label").text((function(t){return t})),this.graph.line=N.c().x((function(e,a){return t.graph.xScale(a)})).y((function(e){return t.graph.yScale(e)})),this.graph.svg.append("path").attr("id","dataline").attr("d",this.graph.line(this.props.data[this.props.param]))}},{key:"updateLine",value:function(){this.graph.svg.selectAll("path#dataline").data([this.props.data[this.props.param]]).attr("d",this.graph.line)}},{key:"updateDataLabel",value:function(){this.graph.dataLabel.data([this.props.data[this.props.param][this.props.npoints-1].toPrecision(this.props.precision)]).text((function(t){return t}))}},{key:"updateYlim",value:function(){this.graph.yScale.domain(this.getLimits(this.props.data[this.props.param],.05)),this.graph.yAxis.scale(this.graph.yScale),N.g("#"+this.props.id).select(".y").transition(50).call(this.graph.yAxis)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidMount",value:function(){this.initGraph()}},{key:"componentDidUpdate",value:function(){this.updateYlim(),this.updateLine(),this.updateDataLabel()}},{key:"render",value:function(){return i.a.createElement("div",{className:"graph",id:this.props.id})}}]),a}(l.Component),z=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(t){var l;return Object(r.a)(this,a),(l=e.call(this,t)).interval=null,l.graph={},l}return Object(p.a)(a,[{key:"getLimits",value:function(t,e){var a=N.d(t),l=N.e(t);l>this.props.min&&(l=this.props.min),a<this.props.max&&(a=this.props.max);var i=a-l;return 0===i&&(i=10),[l-i*e,a+i*e]}},{key:"initGraph",value:function(){var t=this;this.graph.bb=N.g("#"+this.props.id).node().getBoundingClientRect();var e=this.graph.bb.height,a=this.graph.bb.width,l=e-12,i=a-35;this.graph.xScale=N.f().domain([0,this.props.npoints]).range([0,i]),this.graph.yScale=N.f().domain(this.getLimits(this.props.data[this.props.param],.05)).range([l,0]),this.graph.svg=N.g("#"+this.props.id).append("svg").attr("id","svg_"+this.props.id).attr("viewBox","0 0 ".concat(a," ").concat(e)).append("g").attr("transform","translate(35, 6)"),this.graph.yAxis=N.b(this.graph.yScale).ticks(2),this.graph.svg.append("g").attr("class","y axis").call(this.graph.yAxis),this.graph.line=N.c().x((function(e,a){return t.graph.xScale(a)})).y((function(e){return t.graph.yScale(e)})),this.graph.svg.append("path").attr("id","dataline").attr("d",this.graph.line(this.props.data[this.props.param]))}},{key:"updateLine",value:function(){this.graph.svg.selectAll("path#dataline").data([this.props.data[this.props.param]]).attr("d",this.graph.line)}},{key:"updateDataLabel",value:function(){this.graph.dataLabel.data([this.props.data[this.props.param][this.props.npoints-1].toPrecision(this.props.precision)]).text((function(t){return t}))}},{key:"updateYlim",value:function(){this.graph.yScale.domain(this.getLimits(this.props.data[this.props.param],.05)),this.graph.yAxis.scale(this.graph.yScale),N.g("#"+this.props.id).select(".y").transition(50).call(this.graph.yAxis)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidMount",value:function(){this.initGraph()}},{key:"componentDidUpdate",value:function(){this.updateYlim(),this.updateLine()}},{key:"render",value:function(){return i.a.createElement("div",{className:"subgraph",id:this.props.id,style:{height:this.props.height}},i.a.createElement("div",{className:"subgraph-label",dangerouslySetInnerHTML:{__html:this.props.label}}))}}]),a}(l.Component),U=(i.a.Component,function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(t){var l;return Object(r.a)(this,a),(l=e.call(this,t)).state={h:"49%"},l}return Object(p.a)(a,[{key:"render",value:function(){if(0===this.props.variables.length)return i.a.createElement("div",null);var t,e=[],a=1,l=Object(n.a)(this.props.variables);try{for(l.s();!(t=l.n()).done;){var s=t.value,o=this.props.var_info[s];e.push(i.a.createElement(z,{data:this.props.data,id:s,min:o.ymin,max:o.ymax,param:s,key:s,npoints:this.props.data[s].length,label:o.label})),a<this.props.variables.length&&e.push(i.a.createElement("hr",null)),a+=1}}catch(r){l.e(r)}finally{l.f()}return i.a.createElement("div",{className:"graph-pane",style:{left:this.props.pos[0]+"%",bottom:this.props.pos[1]+"%",width:this.props.pos[2]+"%",height:this.props.pos[3]+"%"}},e)}}]),a}(i.a.Component)),G=a(17),B=a(24),W=(a(51),function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t,e=[],a=0,l=Object(n.a)(this.props.params);try{for(l.s();!(t=l.n()).done;){var s=t.value;e.push(i.a.createElement(B.a.Item,{key:a,eventKey:s},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:b[s]}}))),a+=1}}catch(o){l.e(o)}finally{l.f()}return i.a.createElement(B.a,{onSelect:this.props.handleSelect},i.a.createElement(B.a.Toggle,{variant:"secondary",size:"sm",id:"dropdown-secondary"},this.props.param),i.a.createElement(B.a.Menu,null,e))}}]),a}(i.a.Component)),R=["#e4d269","#e46969","#d669e4"],F=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"box",id:this.props.id,style:{left:this.props.pos[0]+"%",bottom:this.props.pos[1]+"%",width:this.props.pos[2]+"%",height:this.props.pos[3]+"%",backgroundColor:this.props.color}},i.a.createElement("div",{className:"box-label",id:this.props.id},this.props.value))}}]),a}(l.Component);function Y(t,e,a,l,i){return 100*((1-.8)/2+.8*(1-(t-e)/(a-e)))}function J(t,e,a){return"hsl("+t+","+e+"%,"+a+"%)"}var q=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"getLimits",value:function(){var t=Math.min(Math.min.apply(Math,Object(G.a)(this.props.data[this.props.param+"_deep"])),Math.min.apply(Math,Object(G.a)(this.props.data[this.props.param+"_hilat"])),Math.min.apply(Math,Object(G.a)(this.props.data[this.props.param+"_lolat"]))),e=Math.max(Math.max.apply(Math,Object(G.a)(this.props.data[this.props.param+"_deep"])),Math.max.apply(Math,Object(G.a)(this.props.data[this.props.param+"_hilat"])),Math.max.apply(Math,Object(G.a)(this.props.data[this.props.param+"_lolat"])));return t===e&&(t-=1,e+=1),[t,e]}},{key:"render",value:function(){for(var t=this.getLimits(),e=this.props.npoints-1,a=this.props.data.pCO2_atmos[e],l=this.props.data[this.props.param+"_deep"][e],s=J(200,51,Y(l,t[0],t[1])),o=this.props.data[this.props.param+"_lolat"][e],n=J(200,51,Y(o,t[0],t[1])),r=this.props.data[this.props.param+"_hilat"][e],p=J(200,51,Y(r,t[0],t[1])),h=[["#5a6375","CO<sub>2</sub>"],["#e4d269","[PO<sub>4</sub>]"],["#e46969","[DIC]"],["#d669e4","Alkalinity"]],c=[],m=0;m<h.length;m++)c.push(i.a.createElement("div",{className:"legend item"},i.a.createElement("div",{className:"legend key",style:{backgroundColor:h[m][0]}}),i.a.createElement("div",{className:"legend label",dangerouslySetInnerHTML:{__html:h[m][1]}})));return i.a.createElement("div",{className:"schematic-container"},i.a.createElement("div",{className:"schematic",id:"threebox"},i.a.createElement(F,{id:"atmos",pos:[0,80,100,20],color:"white",value:"pCO2: "+a.toPrecision(this.props.var_info.pCO2_atmos.precision)}),i.a.createElement(F,{id:"deep",pos:[0,0,100,50],color:s,value:l.toPrecision(this.props.var_info[this.props.param+"_deep"].precision)}),i.a.createElement(F,{id:"lolat",pos:[40,50,60,30],color:n,value:o.toPrecision(this.props.var_info[this.props.param+"_deep"].precision)}),i.a.createElement(F,{id:"hilat",pos:[0,40,40,40],color:p,value:r.toPrecision(this.props.var_info[this.props.param+"_deep"].precision)}),i.a.createElement(U,{pos:[38,84,22,12],data:this.props.data,variables:["pCO2_atmos"],var_info:j,id:"g_atmos"}),i.a.createElement(U,{pos:[2,54,22,12],data:this.props.data,variables:this.props.plot_hilat,var_info:j,id:"g_hilat"}),i.a.createElement(U,{pos:[76,58,22,12],data:this.props.data,variables:this.props.plot_lolat,var_info:j,id:"g_lolat"}),i.a.createElement(U,{pos:[38,10,22,12],data:this.props.data,variables:this.props.plot_deep,var_info:j,id:"g_deep"}),i.a.createElement($,{fluxes:[_(-this.props.fluxes.exCO2_hilat)],sizes:[.3],centre:[18,20],colors:["#5a6375"],label:"Gas ex."}),i.a.createElement($,{fluxes:[_(-this.props.fluxes.exCO2_lolat)],sizes:[.3],centre:[70,20],colors:["#5a6375"],label:"Gas ex."}),i.a.createElement($,{fluxes:[this.props.fluxes.vthermo_PO4_hilat/this.props.data.vol_ocean[e],this.props.fluxes.vthermo_DIC_hilat/this.props.data.vol_ocean[e],this.props.fluxes.vthermo_TA_hilat/this.props.data.vol_ocean[e]],sizes:[.001,.1,.05],centre:[32,60],colors:R,label:"V<sub>thermo</sub>"}),i.a.createElement($,{fluxes:[this.props.fluxes.vthermo_PO4_lolat/this.props.data.vol_ocean[e],this.props.fluxes.vthermo_DIC_lolat/this.props.data.vol_ocean[e],this.props.fluxes.vthermo_TA_lolat/this.props.data.vol_ocean[e]],sizes:[.001,.1,.05],centre:[48,50],colors:R,label:"V<sub>thermo</sub>"}),i.a.createElement($,{fluxes:[this.props.fluxes.vthermo_PO4_hilat/this.props.data.vol_ocean[e],this.props.fluxes.vthermo_DIC_hilat/this.props.data.vol_ocean[e],this.props.fluxes.vthermo_TA_hilat/this.props.data.vol_ocean[e]],sizes:[.001,.1,.05],centre:[40,42],colors:R,id:"lohi",label:"V<sub>thermo</sub>"}),i.a.createElement($,{fluxes:[-this.props.fluxes.vmix_PO4_hilat/this.props.data.vol_ocean[e],-this.props.fluxes.vmix_DIC_hilat/this.props.data.vol_ocean[e],-this.props.fluxes.vmix_TA_hilat/this.props.data.vol_ocean[e]],sizes:[.001,.1,.05],centre:[24,60],colors:R,label:"V<sub>mix</sub>"}),i.a.createElement($,{fluxes:[-this.props.fluxes.vmix_PO4_lolat/this.props.data.vol_ocean[e],-this.props.fluxes.vmix_DIC_lolat/this.props.data.vol_ocean[e],-this.props.fluxes.vmix_TA_lolat/this.props.data.vol_ocean[e]],sizes:[.001,.1,.05],centre:[56,50],colors:R,label:"V<sub>mix</sub>"}),i.a.createElement($,{fluxes:[-this.props.fluxes.prod_PO4_hilat/this.props.data.vol_ocean[e],-this.props.fluxes.prod_DIC_hilat/this.props.data.vol_ocean[e],-this.props.fluxes.prod_TA_hilat/this.props.data.vol_ocean[e]],sizes:[.001,.1,.05],centre:[16,60],colors:R,label:"\u03c4"}),i.a.createElement($,{fluxes:[-this.props.fluxes.prod_PO4_lolat/this.props.data.vol_ocean[e],-this.props.fluxes.prod_DIC_lolat/this.props.data.vol_ocean[e],-this.props.fluxes.prod_TA_lolat/this.props.data.vol_ocean[e]],sizes:[.001,.1,.05],centre:[64,50],colors:R,label:"\u03c4"}),i.a.createElement(W,{className:"dropdown",params:this.props.ocean_vars,param:this.props.param,handleSelect:this.props.handleDropdownSelect}),i.a.createElement("div",{className:"legend box"},i.a.createElement("strong",null,"Fluxes"),c)))}}]),a}(l.Component),$=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(t){var l;return Object(r.a)(this,a),(l=e.call(this,t)).state={arrowWidthPercent:1,arrowHeightPercent:10},l.style={width:l.props.fluxes.length*l.state.arrowWidthPercent+"%",height:l.state.arrowHeightPercent+"%",left:l.props.centre[0]-l.props.fluxes.length*l.state.arrowWidthPercent/2+"%",top:l.props.centre[1]-.5*l.state.arrowHeightPercent+"%"},l}return Object(p.a)(a,[{key:"render",value:function(){for(var t=[],e=this.props.fluxes.length,a=0,l=0;l<e;l++)t.push(i.a.createElement(Q,{direction:this.props.fluxes[l],width:100/e+"%",amplitude:this.props.sizes[l],color:this.props.colors[l]})),this.props.fluxes[l]>0?a+=1:a-=1;var s={};return a<0?s.bottom="55%":s.top="55%",i.a.createElement("div",{className:"flux-pane",id:this.props.id,style:this.style},i.a.createElement("div",{className:"flux-label",dangerouslySetInnerHTML:{__html:this.props.label},style:s}),t)}}]),a}(l.Component),Q=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(t){return Object(r.a)(this,a),e.call(this,t)}return Object(p.a)(a,[{key:"size_2_percent",value:function(t){return Math.abs(50*t/this.props.amplitude)+"%"}},{key:"render",value:function(){var t={width:"95%",left:"0%",backgroundColor:this.props.color};return this.props.direction>=0?(t.bottom="50%",t.height=this.size_2_percent(this.props.direction)):(t.top="50%",t.height=this.size_2_percent(this.props.direction)),i.a.createElement("div",{className:"flux-box",style:{width:this.props.width}},i.a.createElement("div",{className:"flux-arrow",style:t}))}}]),a}(l.Component),X=a(54),Z=a(31),tt=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t,e=[],a=Object(n.a)(this.props.params);try{for(a.s();!(t=a.n()).done;){var l=t.value;e.push(i.a.createElement(Z.a,{key:l,value:l},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:b[l]}})))}}catch(s){a.e(s)}finally{a.f()}return i.a.createElement(X.a,{type:"checkbox",size:"sm",onChange:this.props.onChange,defaultValue:this.props.defaultValue},e)}}]),a}(i.a.Component),et=function(t){Object(c.a)(a,t);var e=Object(m.a)(a);function a(t){var l;for(var i in Object(r.a)(this,a),(l=e.call(this,t)).state={start_state:C,now:C,history:{},fluxes:y(C)},l.state.Ks=l.genKs(C),l.state.now)l.state.history[i]=new Array(100).fill(l.state.now[i]);l.state.schematicParam="fCO2",l.state.model_global_params=["vmix","vthermo"],l.state.model_hilat_params=["tau_hilat","percent_CaCO3_hilat","temp_hilat"],l.state.model_lolat_params=["tau_lolat","percent_CaCO3_lolat","temp_lolat"],l.state.ocean_vars=["fCO2","DIC","TA","pH","CO3","HCO3","c","PO4"],l.state.plot_atmos=["pCO2_atmos"],l.state.plot_ocean=["fCO2"];for(var s=0,o=["_deep","_hilat","_lolat"];s<o.length;s++){var n=o[s];l.state["plot"+n]=[l.state.plot_ocean[0]+n]}return l.state.start_stop_button="Stop",l.interval=null,l.emitting=!1,l.state.GtC_released=0,l.stepModel=l.stepModel.bind(Object(h.a)(l)),l.startSimulation=l.startSimulation.bind(Object(h.a)(l)),l.stopSimulation=l.stopSimulation.bind(Object(h.a)(l)),l.resetModel=l.resetModel.bind(Object(h.a)(l)),l.toggleSimulation=l.toggleSimulation.bind(Object(h.a)(l)),l.genPlotVars=l.genPlotVars.bind(Object(h.a)(l)),l.genKs=l.genKs.bind(Object(h.a)(l)),l.handleDropdownSelect=l.handleDropdownSelect.bind(Object(h.a)(l)),l.handleParamButtonChange=l.handleParamButtonChange.bind(Object(h.a)(l)),l.handleParamUpdate=l.handleParamUpdate.bind(Object(h.a)(l)),l.handleVolcano=l.handleVolcano.bind(Object(h.a)(l)),l.toggleEmissions=l.toggleEmissions.bind(Object(h.a)(l)),l}return Object(p.a)(a,[{key:"startSimulation",value:function(){var t=this;null==this.interval&&(this.interval=setInterval((function(){t.stepModel()}),50))}},{key:"stopSimulation",value:function(){clearInterval(this.interval),this.interval=null}},{key:"toggleSimulation",value:function(){null===this.interval?(this.startSimulation(),this.setState({start_stop_button:"Stop"})):(this.stopSimulation(),this.setState({start_stop_button:"Start"}))}},{key:"resetModel",value:function(){this.setState({now:C,fluxes:y(C),history:this.updateHistory(C),Ks:this.genKs(C),GtC_released:0})}},{key:"stepModel",value:function(){var t=this.state.now,e=0;this.emitting&&(t.pCO2_atmos+=d(2),e=2);var a=y(t);t=f(t,a,this.state.Ks),this.setState({now:t,fluxes:a,history:this.updateHistory(t),emissions:this.state.GtC_released+=e})}},{key:"updateHistory",value:function(t){var e=this.state.history;for(var a in this.state.now)e[a].shift(),e[a].push(t[a]);return e}},{key:"handleParamButtonChange",value:function(t){this.genPlotVars(t)}},{key:"handleVolcano",value:function(t){var e=this.state.now;e.pCO2_atmos+=d(t),this.setState({now:e,GtC_released:this.state.GtC_released+t})}},{key:"toggleEmissions",value:function(){this.emitting?this.emitting=!1:this.emitting=!0}},{key:"genPlotVars",value:function(t){for(var e={plot_ocean:t,plot_atmos:["pCO2_atmos"]},a=0,l=["_deep","_hilat","_lolat"];a<l.length;a++){var i=l[a];e["plot"+i]=[];var s,o=Object(n.a)(t);try{for(o.s();!(s=o.n()).done;){var r=s.value;e["plot"+i].push(r+i)}}catch(p){o.e(p)}finally{o.f()}}this.setState(e)}},{key:"genKs",value:function(t){var e={};return e.deep=u({Tc:t.temp_deep,Sal:t.sal_deep}),e.hilat=u({Tc:t.temp_hilat,Sal:t.sal_hilat}),e.lolat=u({Tc:t.temp_lolat,Sal:t.sal_lolat}),e}},{key:"componentDidMount",value:function(){this.startSimulation()}},{key:"componentWillUnmount",value:function(){this.stopSimulation()}},{key:"handleDropdownSelect",value:function(t){this.setState({schematicParam:t})}},{key:"handleParamUpdate",value:function(t,e){var a=this.state.now;a[t]=e,this.setState({now:a,Ks:this.genKs(a)})}},{key:"render",value:function(){return i.a.createElement("div",{id:"main-panel"},i.a.createElement("div",{className:"top-bar"},i.a.createElement("div",{className:"control-container"},i.a.createElement(L,{title:"Global",params:this.state.model_global_params,now:this.state.now,handleUpdate:this.handleParamUpdate}),i.a.createElement(L,{title:"High Latitude",params:this.state.model_hilat_params,now:this.state.now,handleUpdate:this.handleParamUpdate}),i.a.createElement(L,{title:"Low Latitude",params:this.state.model_lolat_params,now:this.state.now,handleUpdate:this.handleParamUpdate}),i.a.createElement(K,{handleVolcano:this.handleVolcano,handleEmissions:this.toggleEmissions,GtC_released:this.state.GtC_released}))),i.a.createElement("div",{className:"main-display"},i.a.createElement(q,{param:this.state.schematicParam,data:this.state.history,fluxes:this.state.fluxes,ocean_vars:this.state.ocean_vars,npoints:100,var_info:j,handleDropdownSelect:this.handleDropdownSelect,plot_hilat:this.state.plot_hilat,plot_lolat:this.state.plot_lolat,plot_deep:this.state.plot_deep})),i.a.createElement("div",{className:"bottom-bar"},i.a.createElement("div",{id:"plot-controls"},i.a.createElement(tt,{id:"plot-param-controls",params:this.state.ocean_vars,defaultValue:this.state.plot_ocean,onChange:this.handleParamButtonChange}),i.a.createElement("div",{id:"start-stop"},i.a.createElement(E.a,{onClick:this.resetModel,variant:"outline-secondary",size:"sm"},"Reset"),i.a.createElement(E.a,{onClick:this.toggleSimulation,variant:"outline-secondary",size:"sm"},this.state.start_stop_button)))))}}]),a}(i.a.Component);a(160);var at=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(et,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(at,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[145,1,2]]]);
//# sourceMappingURL=main.33a5f871.chunk.js.map