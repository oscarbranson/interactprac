(this["webpackJsonpcarbon-live-js"]=this["webpackJsonpcarbon-live-js"]||[]).push([[0],{144:function(e,t,a){e.exports=a(162)},149:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var l=a(0),s=a.n(l),i=a(51),o=a.n(i),n=(a(149),a(3)),r=a(5),p=a(6),h=a(2),c=a(8),m=a(7);function _(e){return 1e-15*e*12}function d(e){return 2.13*e}function u(e){return e/2.13}function v(e){var t=e.Tc,a=e.Sal,l=Math.sqrt(a),s=t+273.15,i=Math.log(s),o=Math.exp(9345.17/s-60.2409+23.3585*Math.log(s/100)+a*(.023517-.023656*s/100+s/100*.0047036*(s/100))),n=Math.pow(10,-3633.86/s+61.2172-9.6777*i+.011555*a-1152e-7*a*a),r=Math.pow(10,-471.78/s-25.929+3.16967*i+.01781*a-1122e-7*a*a),p=Math.exp(148.9652-13847.26/s-23.6521*i+(118.67/s-5.977+1.0495*i)*l-.01615*a),h=Math.exp((-8966.9-2890.53*l-77.942*a+1.728*a*l-.0996*a*a)/s+(148.0248+137.1942*l+1.62142*a)+(-24.4344-25.085*l-.2474*a)*i+.053105*l*s),c=Math.pow(10,-171.9065-.077993*s+2839.319/s+71.595*Math.log10(s)+(.0028426*s-.77712+178.34/s)*l-.07711*a+.0041249*a*l),m=Math.pow(10,-171.945-.077993*s+2903.293/s+71.595*Math.log10(s)+(.0017276*s-.068393+88.135/s)*l-.10018*a+.0059415*a*l),_=57.7-.118*s,d=12.0408*s-1636.75-.0327957*Math.pow(s,2)+316528e-10*Math.pow(s,3),u=83.1451*s;return{K0:o,K1:n,K2:r,KB:h,KW:p,KspA:m,KspC:c,FugFac:Math.exp(1.01325*(d+2*_)/u)}}function b(e){var t=e.DIC,a=e.TA,l=e.Sal,s=e.Ks,i=function(e){for(var t=e.DIC,a=e.TA,l=e.Sal,s=e.Ks,i=4157e-7/35*l,o=Math.pow(10,-8),n=o,r=null,p=null,h=null;Math.abs(n)>1e-15;)o-=n=(a-((r=t/(1+o/s.K1+s.K2/o))+2*(p=t/(1+o/s.K2+Math.pow(o,2)/(s.K1*s.K2))))-i*s.KB/(s.KB+o)-(h=s.KW/o)+o)/(1+(2*p+r+h)/o+i*s.KB/Math.pow(s.KB+o,2));return o}({DIC:t*=1e-6,TA:a*=1e-6,Sal:l,Ks:s}),o=-Math.log10(i),n=1e6*t/(1+s.K1/i+s.K1*s.K2/Math.pow(i,2)),r=1e6*t/(1+i/s.K1+s.K2/i),p=1e6*t/(1+i/s.K2+Math.pow(i,2)/(s.K1*s.K2)),h=n/s.K0,c=h/s.FugFac;return{pH:o,fCO2:h,CO2:n,HCO3:r,CO3:p,c:1e-6*p/(s.KspC/.0102),pCO2:c}}var O={PO4:"[PO<sub>4</sub>]",c:"\u03a9",DIC:"DIC",TA:"TA",fCO2:"fCO<sub>2</sub>",pCO2:"pCO<sub>2</sub>",pH:"pH",CO3:"[CO<sub>3</sub><sup>2-</sup>]",HCO3:"[HCO<sub>3</sub><sup>-</sup>]"},C=358e12,y={kas:.02,vmix:189e13,vthermo:63072e10,tau_hilat:50,tau_lolat:1,percent_CaCO3_hilat:10,percent_CaCO3_lolat:20,depth_lolat:100,depth_hilat:200,vol_ocean:134e16,vol_deep:129883e13,vol_lolat:3043e13,vol_hilat:1074e13,mass_atmos:5132e15,moles_atmos:1773e17,SA_ocean:C,fSA_hilat:.15,fSA_lolat:.85,SA_hilat:.15*C,SA_lolat:.85*C,temp_deep:1.92,temp_hilat:3.715,temp_lolat:22.85,sal_lolat:35.15,sal_hilat:33.5,sal_deep:34.72,PO4_lolat:.182,PO4_hilat:1.68,PO4_deep:2.38,DIC_lolat:1969,DIC_hilat:2183.1,DIC_deep:2260.5,TA_lolat:2253.4,TA_hilat:2344.1,TA_deep:2381.4,pCO2_atmos:372.8,pCO2_atmos_noExch:372.8};function f(e,t){for(var a=b({DIC:e.DIC_deep,TA:e.TA_deep,Sal:e.sal_deep,Ks:t.deep}),l=b({DIC:e.DIC_hilat,TA:e.TA_hilat,Sal:e.sal_hilat,Ks:t.hilat}),s=b({DIC:e.DIC_lolat,TA:e.TA_lolat,Sal:e.sal_lolat,Ks:t.lolat}),i=0,o=["pH","fCO2","pCO2","CO2","HCO3","CO3","c"];i<o.length;i++){var n=o[i];e[n+"_deep"]=a[n],e[n+"_lolat"]=s[n],e[n+"_hilat"]=l[n]}return e}for(var x={},g=0,E=["hilat","lolat","deep"];g<E.length;g++){var P=E[g];x[P]=v({Tc:y["temp_"+P],Sal:y["sal_"+P]})}function j(e){var t={};t.vmix_PO4_hilat=e.vmix*(e.PO4_hilat-e.PO4_deep),t.vmix_PO4_lolat=e.vmix*(e.PO4_lolat-e.PO4_deep),t.vmix_DIC_hilat=e.vmix*(e.DIC_hilat-e.DIC_deep),t.vmix_DIC_lolat=e.vmix*(e.DIC_lolat-e.DIC_deep),t.vmix_TA_hilat=e.vmix*(e.TA_hilat-e.TA_deep),t.vmix_TA_lolat=e.vmix*(e.TA_lolat-e.TA_deep),t.vthermo_PO4_deep=e.vthermo*(e.PO4_hilat-e.PO4_deep),t.vthermo_PO4_lolat=e.vthermo*(e.PO4_deep-e.PO4_lolat),t.vthermo_PO4_hilat=e.vthermo*(e.PO4_lolat-e.PO4_hilat),t.vthermo_DIC_deep=e.vthermo*(e.DIC_hilat-e.DIC_deep),t.vthermo_DIC_lolat=e.vthermo*(e.DIC_deep-e.DIC_lolat),t.vthermo_DIC_hilat=e.vthermo*(e.DIC_lolat-e.DIC_hilat),t.vthermo_TA_deep=e.vthermo*(e.TA_hilat-e.TA_deep),t.vthermo_TA_lolat=e.vthermo*(e.TA_deep-e.TA_lolat),t.vthermo_TA_hilat=e.vthermo*(e.TA_lolat-e.TA_hilat),t.prod_PO4_hilat=e.PO4_hilat*e.vol_hilat/e.tau_hilat,t.prod_PO4_lolat=e.PO4_lolat*e.vol_lolat/e.tau_lolat;var a=106+106*e.percent_CaCO3_lolat/100,l=106+106*e.percent_CaCO3_hilat/100;t.prod_DIC_hilat=t.prod_PO4_hilat*l,t.prod_DIC_lolat=t.prod_PO4_lolat*a;var s=.15*106+212*e.percent_CaCO3_lolat/100,i=.15*106+212*e.percent_CaCO3_hilat/100;return t.prod_TA_hilat=t.prod_PO4_hilat*i,t.prod_TA_lolat=t.prod_PO4_lolat*s,t.exCO2_lolat=e.kas*e.SA_lolat*(e.pCO2_atmos-e.pCO2_lolat),t.exCO2_hilat=e.kas*e.SA_hilat*(e.pCO2_atmos-e.pCO2_hilat),t}y=f(y,x);var S,T,A={vmix:{label:"Mixing Rate (m3 / yr)",ymin:null,ymax:null,precision:null},vthermo:{label:"Thermohaline Mixing Rate (m3 / yr)",ymin:null,ymax:null,precision:null},tau_lolat:{label:"Productivity (tau)",ymin:null,ymax:null,precision:null},tau_hilat:{label:"Productivity (tau)",ymin:null,ymax:null,precision:null},percent_CaCO3_lolat:{label:"% CaCO3",ymin:0,ymax:100,precision:1},percent_CaCO3:{label:"% CaCO3",ymin:0,ymax:100,precision:1},vol_deep:{label:"Ocean Volume (m3)",ymin:null,ymax:null,precision:null},vol_lolat:{label:"Ocean Volume (m3)",ymin:null,ymax:null,precision:null},vol_hilat:{label:"Ocean Volume (m3)",ymin:null,ymax:null,precision:null},PO4_lolat:{label:"[PO4]",ymin:0,ymax:1,precision:3},PO4_hilat:{label:"[PO4]",ymin:0,ymax:1,precision:3},PO4_deep:{label:"[PO4]",ymin:2.4,ymax:2.6,precision:3},DIC_hilat:{label:"[DIC]",ymin:1800,ymax:2e3,precision:4},DIC_lolat:{label:"[DIC]",ymin:1800,ymax:2e3,precision:4},DIC_deep:{label:"[DIC]",ymin:2130,ymax:2150,precision:5},TA_lolat:{label:"Alkalinity",ymin:2200,ymax:2400,precision:4},TA_hilat:{label:"Alkalinity",ymin:2200,ymax:2400,precision:4},TA_deep:{label:"Alkalinity",ymin:2390,ymax:2410,precision:5},pH_deep:{label:"pH",ymin:7.5,ymax:8.5,precision:3},fCO2_deep:{label:"fCO2",ymin:350,ymax:450,precision:3},pCO2_deep:{label:"pCO2",ymin:350,ymax:450,precision:3},CO2_deep:{label:"[CO2]",ymin:5,ymax:15,precision:3},HCO3_deep:{label:"[HCO3]",ymin:1500,ymax:2e3,precision:4},CO3_deep:{label:"[CO3]",ymin:70,ymax:120,precision:3},pH_hilat:{label:"pH",ymin:7.5,ymax:8.5,precision:3},fCO2_hilat:{label:"fCO2",ymin:350,ymax:450,precision:3},pCO2_hilat:{label:"pCO2",ymin:350,ymax:450,precision:3},CO2_hilat:{label:"[CO2]",ymin:5,ymax:15,precision:3},HCO3_hilat:{label:"[HCO3]",ymin:1500,ymax:2e3,precision:4},CO3_hilat:{label:"[CO3]",ymin:70,ymax:120,precision:3},pH_lolat:{label:"pH",ymin:7.5,ymax:8.5,precision:3},fCO2_lolat:{label:"fCO2",ymin:350,ymax:450,precision:3},pCO2_lolat:{label:"pCO2",ymin:350,ymax:450,precision:3},CO2_lolat:{label:"[CO2]",ymin:5,ymax:15,precision:3},HCO3_lolat:{label:"[HCO3]",ymin:1500,ymax:2e3,precision:4},CO3_lolat:{label:"[CO3]",ymin:70,ymax:120,precision:3},c_deep:{label:"\u03a9",ymin:0,ymax:1,precision:2},c_lolat:{label:"\u03a9",ymin:0,ymax:1,precision:2},c_hilat:{label:"\u03a9",ymin:0,ymax:1,precision:2},pCO2_atmos:{label:"pCO2",ymin:350,ymax:450,precision:4},pCO2_atmos_noExch:{label:"pCO2",ymin:350,ymax:450,precision:4},temp_lolat:{label:"Temp",ymin:20,ymax:25,precision:3},temp_hilat:{label:"Temp",ymin:2,ymax:6,precision:3},temp_deep:{label:"Temp",ymin:0,ymax:4,precision:3},sal_lolat:{label:"Temp",ymin:36,ymax:34,precision:3},sal_hilat:{label:"Temp",ymin:36,ymax:34,precision:3},sal_deep:{label:"Temp",ymin:36,ymax:34,precision:3}},D=a(12),k=a(24),I=a(25),w=a(53),M=a(9),K=a(52),H=a.n(K),N=(a(156),s.a.Component,function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var l;return Object(r.a)(this,a),(l=t.call(this,e)).handleChange=function(e){l.props.handleChange(e)},l.handleChange=l.handleChange.bind(Object(h.a)(l)),l.fmtLabel=l.fmtLabel.bind(Object(h.a)(l)),l}return Object(p.a)(a,[{key:"fmtLabel",value:function(e){return this.props.fmt_info[0](e,this.props.fmt_info[1])}},{key:"render",value:function(){return s.a.createElement(H.a,{value:this.props.value,min:this.props.min,max:this.props.max,orientation:"vertical",onChange:this.handleChange,format:this.fmtLabel,labels:this.props.labels,step:this.props.step})}}]),a}(s.a.Component));function V(e,t){return e.toExponential(t)}function L(e,t){return e.toPrecision(t)}var U={vthermo:[V,2,.5*y.vthermo,2*y.vthermo],vmix:[V,2,.5*y.vmix,2*y.vmix],tau_hilat:[L,2,1,80],tau_lolat:[L,2,1,80],percent_CaCO3_hilat:[L,2,0,50],percent_CaCO3_lolat:[L,2,0,50],temp_hilat:[L,2,0,10],temp_lolat:[L,2,20,30]},z={vthermo:(S={},Object(M.a)(S,y.vthermo,""),Object(M.a)(S,2*y.vthermo,"x2"),Object(M.a)(S,y.vthermo/2,"/2"),S),vmix:(T={},Object(M.a)(T,y.vmix,""),Object(M.a)(T,2*y.vmix,"x2"),Object(M.a)(T,y.vmix/2,"/2"),T),tau_hilat:Object(M.a)({},y.tau_hilat,""),tau_lolat:Object(M.a)({},y.tau_lolat,""),percent_CaCO3_hilat:Object(M.a)({},y.percent_CaCO3_hilat,""),percent_CaCO3_lolat:Object(M.a)({},y.percent_CaCO3_lolat,""),temp_hilat:Object(M.a)({},y.temp_hilat,""),temp_lolat:Object(M.a)({},y.temp_lolat,"")},G={temp_hilat:.1,temp_lolat:.1},B={vthermo:"V<sub>thermo</sub>",vmix:"V<sub>mix</sub>",tau_hilat:"&tau;",tau_lolat:"&tau;",percent_CaCO3_hilat:"% CaCO<sub>3</sub>",percent_CaCO3_lolat:"% CaCO<sub>3</sub>",temp_hilat:"Temp",temp_lolat:"Temp"},Y=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var l;return Object(r.a)(this,a),(l=t.call(this,e)).handleDouble=l.handleDouble.bind(Object(h.a)(l)),l.handleHalve=l.handleHalve.bind(Object(h.a)(l)),l.handleSliderChange=l.handleSliderChange.bind(Object(h.a)(l)),l}return Object(p.a)(a,[{key:"handleDouble",value:function(e){this.props.handleUpdate(this.props.param,2*this.props.value)}},{key:"handleHalve",value:function(e){this.props.handleUpdate(this.props.param,this.props.value/2)}},{key:"handleSliderChange",value:function(e){this.props.handleUpdate(this.props.param,e)}},{key:"render",value:function(){var e=U[this.props.param][2],t=U[this.props.param][3];return s.a.createElement("div",{className:"control-set"},s.a.createElement("h3",{dangerouslySetInnerHTML:{__html:B[this.props.param]}}),s.a.createElement(N,{value:this.props.value,min:e,max:t,handleChange:this.handleSliderChange,fmt_info:U[this.props.param],labels:z[this.props.param],step:G[this.props.param]}),s.a.createElement("div",{className:"control-value"},U[this.props.param][0](this.props.value,U[this.props.param][1])))}}]),a}(s.a.Component),F=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var l;return Object(r.a)(this,a),(l=t.call(this,e)).state={GtC_pinutubo:.05*.272,emitLabel:"Burn!"},l.handleVolcano=l.handleVolcano.bind(Object(h.a)(l)),l.handleEmissions=l.handleEmissions.bind(Object(h.a)(l)),l}return Object(p.a)(a,[{key:"handleVolcano",value:function(){this.props.handleVolcano(this.state.GtC_pinutubo)}},{key:"handleEmissions",value:function(){this.props.handleEmissions(),"Burn!"===this.state.emitLabel?this.setState({emitLabel:"Stop."}):this.setState({emitLabel:"Burn!"})}},{key:"render",value:function(){return s.a.createElement("div",{className:"control-section disasters",style:{zIndex:5}},s.a.createElement("h2",null,"Carbon Release: ",this.props.GtC_released.toFixed(2)," GtC"),s.a.createElement("div",{className:"model-controls"},s.a.createElement("div",{className:"control-set"},s.a.createElement("h3",null,"Fossil Fuels"),s.a.createElement(D.a,{onClick:this.handleEmissions,size:"sm"},this.state.emitLabel)),s.a.createElement("div",{className:"control-set"},s.a.createElement("h3",null,"Volcano"),s.a.createElement(D.a,{onClick:this.handleVolcano,size:"sm"},"Pinatubo"))))}}]),a}(s.a.Component),W=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e,t=[],a=Object(n.a)(this.props.params);try{for(a.s();!(e=a.n()).done;){var l=e.value;t.push(s.a.createElement(Y,{key:l,param:l,value:this.props.now[l],handleUpdate:this.props.handleUpdate}))}}catch(i){a.e(i)}finally{a.f()}return s.a.createElement("div",{className:"control-section"},s.a.createElement("h2",null,this.props.title),s.a.createElement("div",{className:"model-controls"},t))}}]),a}(s.a.Component),R=a(15),J=a(11),X=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var l;Object(r.a)(this,a),(l=t.call(this,e)).interval=null,l.graph={},l.state={ymin:1/0,ymax:-1/0};var s,i=Object(n.a)(l.props.variables);try{for(i.s();!(s=i.n()).done;){var o=s.value,p=l.props.var_info[o];p.ymin<l.state.ymin&&(l.state.ymin=p.ymin),p.ymax>l.state.ymax&&(l.state.ymax=p.ymax)}}catch(h){i.e(h)}finally{i.f()}return l.graph.data=l.make_data(),l}return Object(p.a)(a,[{key:"getLimits",value:function(e){var t=1/0,a=-1/0;for(var l in this.props.variables){var s=J.e(this.props.data[this.props.variables[l]]),i=J.d(this.props.data[this.props.variables[l]]);t>s&&(t=s),a<i&&(a=i)}t>this.state.ymin&&(t=this.state.ymin),a<this.state.ymax&&(a=this.state.ymax);var o=a-t;return 0===o&&(o=10),[t-o*e,a+o*e]}},{key:"make_data",value:function(){var e,t=[],a=Object(n.a)(this.props.variables);try{for(a.s();!(e=a.n()).done;){for(var l=e.value,s=this.props.data[l],i=[],o=1-s.length,r=0;r<s.length;r++)i.push([o,s[r]]),o+=1;t.push(i)}}catch(p){a.e(p)}finally{a.f()}return t}},{key:"initGraph",value:function(){var e=this;this.graph.bb=J.g("#"+this.props.id).node().getBoundingClientRect();var t=this.graph.bb.height,a=this.graph.bb.width,l=t-20-6,s=a-35-6;for(var i in this.graph.xScale=J.f().domain([-this.props.npoints,0]).range([0,s]),this.graph.yScale=J.f().domain(this.getLimits(.05)).range([l,0]),this.graph.svg=J.g("#"+this.props.id).append("svg").attr("id","svg_"+this.props.id).attr("viewBox","0 0 ".concat(a," ").concat(t)).append("g").attr("transform","translate(35, 6)"),this.graph.yAxis=J.b(this.graph.yScale).ticks(2),this.graph.svg.append("g").attr("class","y axis").call(this.graph.yAxis),this.graph.xAxis=J.a(this.graph.xScale).ticks(2),this.graph.svg.append("g").attr("class","x axis").attr("transform","translate(0,65)").call(this.graph.xAxis),this.graph.lines=[],this.props.variables)this.graph.lines.push(J.c().x((function(t){return e.graph.xScale(t[0])})).y((function(t){return e.graph.yScale(t[1])})));for(var o in this.graph.data)this.graph.svg.append("path").attr("id","dataline").attr("id",this.props.variables[o]).attr("d",this.graph.lines[o](this.graph.data[o]))}},{key:"updateLine",value:function(){for(var e in this.graph.data=this.make_data(),this.graph.data)this.graph.svg.selectAll("path#"+this.props.variables[e]).attr("d",this.graph.lines[e](this.graph.data[e]))}},{key:"updateYlim",value:function(){this.graph.yScale.domain(this.getLimits(.05)),this.graph.yAxis.scale(this.graph.yScale),J.g("#"+this.props.id).select(".y").call(this.graph.yAxis)}},{key:"updateXlim",value:function(){this.graph.xScale.domain([-this.props.npoints,0]),this.graph.xAxis.scale(this.graph.xScale),J.g("#"+this.props.id).select(".x").call(this.graph.xAxis)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidMount",value:function(){this.initGraph()}},{key:"componentDidUpdate",value:function(){this.updateXlim(),this.updateYlim(),this.updateLine()}},{key:"render",value:function(){return s.a.createElement("div",{className:"graph-pane",style:{left:this.props.pos[0]+"%",bottom:this.props.pos[1]+"%",width:this.props.pos[2]+"%",height:this.props.pos[3]+"%"}},s.a.createElement("div",{className:"subgraph",id:this.props.id,style:{height:this.props.height}},s.a.createElement("div",{className:"subgraph-label",dangerouslySetInnerHTML:{__html:this.props.label}})))}}]),a}(l.Component),q=["CO<sub>2</sub>","[PO<sub>4</sub>]","[DIC]","Alkalinity"],$=["#888e9b","#d3ca98","#e98787","#e7abef"],Q=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"box",id:this.props.id,style:{left:this.props.pos[0]+"%",bottom:this.props.pos[1]+"%",width:this.props.pos[2]+"%",height:this.props.pos[3]+"%",backgroundColor:this.props.color}},s.a.createElement("div",{className:"box-value",id:this.props.id},this.props.value),s.a.createElement("div",{className:"box-label",id:this.props.id},this.props.label+": "+this.props.GtC.toFixed(0)+" GtC"))}}]),a}(l.Component);function Z(e,t,a,l,s){return 100*((1-.8)/2+.8*(1-(e-t)/(a-t)))}function ee(e,t,a){return"hsl("+e+","+t+"%,"+a+"%)"}var te=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"getLimits",value:function(){var e=Math.min(Math.min.apply(Math,Object(R.a)(this.props.data[this.props.param+"_deep"])),Math.min.apply(Math,Object(R.a)(this.props.data[this.props.param+"_hilat"])),Math.min.apply(Math,Object(R.a)(this.props.data[this.props.param+"_lolat"]))),t=Math.max(Math.max.apply(Math,Object(R.a)(this.props.data[this.props.param+"_deep"])),Math.max.apply(Math,Object(R.a)(this.props.data[this.props.param+"_hilat"])),Math.max.apply(Math,Object(R.a)(this.props.data[this.props.param+"_lolat"])));return e===t&&(e-=1,t+=1),[e,t]}},{key:"render",value:function(){for(var e=this.getLimits(),t=this.props.data.pCO2_atmos.length-1,a=this.props.data.pCO2_atmos[t],l=this.props.data[this.props.param+"_deep"][t],i=ee(200,51,Z(l,e[0],e[1])),o=this.props.data[this.props.param+"_lolat"][t],n=ee(200,51,Z(o,e[0],e[1])),r=this.props.data[this.props.param+"_hilat"][t],p=ee(200,51,Z(r,e[0],e[1])),h=d(this.props.data.pCO2_atmos[t]),c=_(.001*this.props.data.DIC_deep[t]*this.props.data.vol_deep[t]),m=_(.001*this.props.data.DIC_lolat[t]*this.props.data.vol_lolat[t]),u=_(.001*this.props.data.DIC_hilat[t]*this.props.data.vol_hilat[t]),v=[],b=0;b<$.length;b++)v.push(s.a.createElement("div",{className:"legend item"},s.a.createElement("div",{className:"legend key",style:{backgroundColor:$[b]}}),s.a.createElement("div",{className:"legend label",dangerouslySetInnerHTML:{__html:q[b]}})));return s.a.createElement("div",{className:"schematic-container"},s.a.createElement("div",{className:"schematic",id:"threebox"},s.a.createElement(Q,{id:"atmos",pos:[0,80,100,20],color:"white",value:"pCO2: "+a.toPrecision(this.props.var_info.pCO2_atmos.precision),label:"Atmosphere",GtC:h}),s.a.createElement(Q,{id:"deep",pos:[0,0,100,50],color:i,value:l.toPrecision(this.props.var_info[this.props.param+"_deep"].precision),label:"Deep Ocean",GtC:c}),s.a.createElement(Q,{id:"lolat",pos:[35,50,65,30],color:n,value:o.toPrecision(this.props.var_info[this.props.param+"_deep"].precision),label:"Low Lat. Surface Ocean",GtC:m}),s.a.createElement(Q,{id:"hilat",pos:[0,40,35,40],color:p,value:r.toPrecision(this.props.var_info[this.props.param+"_deep"].precision),label:"High Lat. Surface Ocean",GtC:u}),s.a.createElement(X,{pos:[38,84,22,12],data:this.props.data,npoints:this.props.npoints,variables:["pCO2_atmos_noExch","pCO2_atmos"],var_info:A,label:"pCO<sub>2</sub>",id:"g_atmos_noex"}),s.a.createElement(X,{pos:[2,54,22,12],data:this.props.data,npoints:this.props.npoints,variables:[this.props.plot_hilat],var_info:A,label:O[this.props.param],id:"g_hilat"}),s.a.createElement(X,{pos:[76,58,22,12],data:this.props.data,npoints:this.props.npoints,variables:[this.props.plot_lolat],var_info:A,label:O[this.props.param],id:"g_lolat"}),s.a.createElement(X,{pos:[38,10,22,12],data:this.props.data,npoints:this.props.npoints,variables:[this.props.plot_deep],var_info:A,label:O[this.props.param],id:"g_deep"}),s.a.createElement(ae,{fluxes:[_(-this.props.fluxes.exCO2_hilat)],sizes:[.3],centre:[18,20],colors:[$[0]],label:"Gas exch.",id:"gas"}),s.a.createElement(ae,{fluxes:[_(-this.props.fluxes.exCO2_lolat)],sizes:[.3],centre:[70,20],colors:[$[0]],label:"Gas exch.",id:"gas"}),s.a.createElement(ae,{fluxes:[this.props.fluxes.vthermo_PO4_hilat/this.props.data.vol_ocean[t],this.props.fluxes.vthermo_DIC_hilat/this.props.data.vol_ocean[t],this.props.fluxes.vthermo_TA_hilat/this.props.data.vol_ocean[t]],sizes:[.001,.1,.05],centre:[32,60],colors:$.slice(1),label:"V<sub>thermo</sub>"}),s.a.createElement(ae,{fluxes:[this.props.fluxes.vthermo_PO4_lolat/this.props.data.vol_ocean[t],this.props.fluxes.vthermo_DIC_lolat/this.props.data.vol_ocean[t],this.props.fluxes.vthermo_TA_lolat/this.props.data.vol_ocean[t]],sizes:[.001,.1,.05],centre:[43,50],colors:$.slice(1),label:"V<sub>thermo</sub>"}),s.a.createElement(ae,{fluxes:[this.props.fluxes.vthermo_PO4_hilat/this.props.data.vol_ocean[t],this.props.fluxes.vthermo_DIC_hilat/this.props.data.vol_ocean[t],this.props.fluxes.vthermo_TA_hilat/this.props.data.vol_ocean[t]],sizes:[.001,.1,.05],centre:[35,42],colors:$.slice(1),id:"lohi",label:"V<sub>thermo</sub>"}),s.a.createElement(ae,{fluxes:[-this.props.fluxes.vmix_PO4_hilat/this.props.data.vol_ocean[t],-this.props.fluxes.vmix_DIC_hilat/this.props.data.vol_ocean[t],-this.props.fluxes.vmix_TA_hilat/this.props.data.vol_ocean[t]],sizes:[.001,.1,.05],centre:[24,60],colors:$.slice(1),label:"V<sub>mix</sub>"}),s.a.createElement(ae,{fluxes:[-this.props.fluxes.vmix_PO4_lolat/this.props.data.vol_ocean[t],-this.props.fluxes.vmix_DIC_lolat/this.props.data.vol_ocean[t],-this.props.fluxes.vmix_TA_lolat/this.props.data.vol_ocean[t]],sizes:[.001,.1,.05],centre:[56,50],colors:$.slice(1),label:"V<sub>mix</sub>"}),s.a.createElement(ae,{fluxes:[-this.props.fluxes.prod_PO4_hilat/this.props.data.vol_ocean[t],-this.props.fluxes.prod_DIC_hilat/this.props.data.vol_ocean[t],-this.props.fluxes.prod_TA_hilat/this.props.data.vol_ocean[t]],sizes:[.001,.1,.05],centre:[16,60],colors:$.slice(1),label:"\u03c4"}),s.a.createElement(ae,{fluxes:[-this.props.fluxes.prod_PO4_lolat/this.props.data.vol_ocean[t],-this.props.fluxes.prod_DIC_lolat/this.props.data.vol_ocean[t],-this.props.fluxes.prod_TA_lolat/this.props.data.vol_ocean[t]],sizes:[.001,.1,.05],centre:[64,50],colors:$.slice(1),label:"\u03c4"}),s.a.createElement("div",{className:"legend box"},s.a.createElement("h3",null,"Net Fluxes"),v)))}}]),a}(l.Component),ae=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var l;return Object(r.a)(this,a),(l=t.call(this,e)).state={arrowWidthPercent:1,arrowHeightPercent:10},l.style={width:l.props.fluxes.length*l.state.arrowWidthPercent+"%",height:l.state.arrowHeightPercent+"%",left:l.props.centre[0]-l.props.fluxes.length*l.state.arrowWidthPercent/2+"%",top:l.props.centre[1]-.5*l.state.arrowHeightPercent+"%"},l}return Object(p.a)(a,[{key:"render",value:function(){for(var e=[],t=this.props.fluxes.length,a=0,l=0;l<t;l++)e.push(s.a.createElement(le,{direction:this.props.fluxes[l],width:100/t+"%",amplitude:this.props.sizes[l],color:this.props.colors[l]})),this.props.fluxes[l]>0?a+=1:a-=1;var i={};return a<0?i.bottom="55%":i.top="55%",s.a.createElement("div",{className:"flux-pane",id:this.props.id,style:this.style},s.a.createElement("div",{className:"flux-label",dangerouslySetInnerHTML:{__html:this.props.label},style:i}),e)}}]),a}(l.Component),le=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"size_2_percent",value:function(e){return Math.abs(50*e/this.props.amplitude)+"%"}},{key:"render",value:function(){var e={width:"95%",left:"0%",backgroundColor:this.props.color};return this.props.direction>=0?(e.bottom="50%",e.height=this.size_2_percent(this.props.direction)):(e.top="50%",e.height=this.size_2_percent(this.props.direction)),s.a.createElement("div",{className:"flux-box",style:{width:this.props.width}},s.a.createElement("div",{className:"flux-arrow",style:e}))}}]),a}(l.Component),se=a(34),ie=a(23),oe=(a(50),s.a.Component,function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e,t=[],a=Object(n.a)(this.props.params);try{for(a.s();!(e=a.n()).done;){var l=e.value;t.push(s.a.createElement(ie.a,{key:l,value:l},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:O[l]}})))}}catch(i){a.e(i)}finally{a.f()}return s.a.createElement(se.a,{type:"radio",name:"plot_params",size:"sm",onChange:this.props.onChange,defaultValue:this.props.defaultValue},t)}}]),a}(s.a.Component)),ne=d(372.8),re=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var l;for(var s in Object(r.a)(this,a),(l=t.call(this,e)).state={start_state:y,now:y,history:{},fluxes:j(y),npoints:200,year_field:200,frameTime:20},l.state.Ks=l.genKs(y),l.state.now)l.state.history[s]=new Array(2).fill(l.state.now[s]);l.state.yearsPerSecond=1/l.state.frameTime*1e3,l.state.schematicParam="pCO2",l.state.model_global_params=["vmix","vthermo"],l.state.model_hilat_params=["tau_hilat","percent_CaCO3_hilat","temp_hilat"],l.state.model_lolat_params=["tau_lolat","percent_CaCO3_lolat","temp_lolat"],l.state.ocean_vars=["pCO2","DIC","TA","pH","CO3","HCO3","PO4"],l.state.plot_atmos=["pCO2_atmos"],l.state.plot_ocean=["pCO2"];for(var i=0,o=["_deep","_hilat","_lolat"];i<o.length;i++){var n=o[i];l.state["plot"+n]=[l.state.plot_ocean[0]+n]}return l.state.start_stop_button="Pause",l.state.running=!0,l.interval=null,l.emitting=!1,l.state.GtC_released=0,l.stepModel=l.stepModel.bind(Object(h.a)(l)),l.startSimulation=l.startSimulation.bind(Object(h.a)(l)),l.stopSimulation=l.stopSimulation.bind(Object(h.a)(l)),l.resetModel=l.resetModel.bind(Object(h.a)(l)),l.toggleSimulation=l.toggleSimulation.bind(Object(h.a)(l)),l.genPlotVars=l.genPlotVars.bind(Object(h.a)(l)),l.genKs=l.genKs.bind(Object(h.a)(l)),l.handleDropdownSelect=l.handleDropdownSelect.bind(Object(h.a)(l)),l.handleParamButtonChange=l.handleParamButtonChange.bind(Object(h.a)(l)),l.handleParamToggle=l.handleParamToggle.bind(Object(h.a)(l)),l.handleParamUpdate=l.handleParamUpdate.bind(Object(h.a)(l)),l.handleVolcano=l.handleVolcano.bind(Object(h.a)(l)),l.toggleEmissions=l.toggleEmissions.bind(Object(h.a)(l)),l.onChangeYears=l.onChangeYears.bind(Object(h.a)(l)),l.onYearsEnter=l.onYearsEnter.bind(Object(h.a)(l)),l.handleUpdateYears=l.handleUpdateYears.bind(Object(h.a)(l)),l.handleSpeedUp=l.handleSpeedUp.bind(Object(h.a)(l)),l.handleSlowDown=l.handleSlowDown.bind(Object(h.a)(l)),l}return Object(p.a)(a,[{key:"startSimulation",value:function(){var e=this;null==this.interval&&(this.interval=setInterval((function(){e.stepModel()}),this.state.frameTime)),this.setState({running:!0})}},{key:"stopSimulation",value:function(){clearInterval(this.interval),this.interval=null,this.setState({running:!1})}},{key:"toggleSimulation",value:function(){null===this.interval?(this.startSimulation(),this.setState({start_stop_button:"Pause"})):(this.stopSimulation(),this.setState({start_stop_button:"Run"}))}},{key:"resetModel",value:function(){this.setState({now:y,fluxes:j(y),history:this.updateHistory(y),Ks:this.genKs(y),GtC_released:0})}},{key:"stepModel",value:function(){var e=this.state.now,t=this.state.GtC_released;this.emitting&&(e.pCO2_atmos+=u(2),t+=2);var a=j(e);(e=function(e,t,a){var l=Object.assign({},e);return l.PO4_deep+=(t.vmix_PO4_hilat+t.vmix_PO4_lolat+t.vthermo_PO4_deep+t.prod_PO4_hilat+t.prod_PO4_lolat)/e.vol_deep,l.PO4_hilat+=(-t.vmix_PO4_hilat+t.vthermo_PO4_hilat-t.prod_PO4_hilat)/e.vol_hilat,l.PO4_lolat+=(-t.vmix_PO4_lolat+t.vthermo_PO4_lolat-t.prod_PO4_lolat)/e.vol_lolat,l.DIC_deep+=(t.vmix_DIC_hilat+t.vmix_DIC_lolat+t.vthermo_DIC_deep+t.prod_DIC_hilat+t.prod_DIC_lolat)/e.vol_deep,l.DIC_hilat+=(-t.vmix_DIC_hilat+t.vthermo_DIC_hilat-t.prod_DIC_hilat+1e3*t.exCO2_hilat)/e.vol_hilat,l.DIC_lolat+=(-t.vmix_DIC_lolat+t.vthermo_DIC_lolat-t.prod_DIC_lolat+1e3*t.exCO2_lolat)/e.vol_lolat,l.TA_deep+=(t.vmix_TA_hilat+t.vmix_TA_lolat+t.vthermo_TA_deep+t.prod_TA_hilat+t.prod_TA_lolat)/e.vol_deep,l.TA_hilat+=(-t.vmix_TA_hilat+t.vthermo_TA_hilat-t.prod_TA_hilat)/e.vol_hilat,l.TA_lolat+=(-t.vmix_TA_lolat+t.vthermo_TA_lolat-t.prod_TA_lolat)/e.vol_lolat,l.pCO2_atmos+=12*(-t.exCO2_hilat-t.exCO2_lolat)/213e13,l=f(l,a)}(e,a,this.state.Ks)).pCO2_atmos_noExch=u(ne+this.state.GtC_released),this.setState({now:e,fluxes:a,history:this.updateHistory(e),GtC_released:t})}},{key:"updateHistory",value:function(e){var t=this.state.history,a=t.DIC_deep.length;for(var l in this.state.now)a>=this.state.npoints&&(t[l]=t[l].slice(a-this.state.npoints+1)),t[l].push(e[l]);return t}},{key:"handleParamButtonChange",value:function(e){this.setState(this.genPlotVars(e))}},{key:"handleParamToggle",value:function(e){var t=this.genPlotVars([e]);t.schematicParam=e,this.setState(t)}},{key:"handleVolcano",value:function(e){var t=this.state.now;t.pCO2_atmos+=u(e),this.setState({now:t,GtC_released:this.state.GtC_released+e})}},{key:"toggleEmissions",value:function(){this.emitting?this.emitting=!1:this.emitting=!0}},{key:"genPlotVars",value:function(e){for(var t={plot_ocean:e,plot_atmos:["pCO2_atmos"]},a=0,l=["_deep","_hilat","_lolat"];a<l.length;a++){var s=l[a];t["plot"+s]=[];var i,o=Object(n.a)(e);try{for(o.s();!(i=o.n()).done;){var r=i.value;t["plot"+s].push(r+s)}}catch(p){o.e(p)}finally{o.f()}}return t}},{key:"genKs",value:function(e){var t={};return t.deep=v({Tc:e.temp_deep,Sal:e.sal_deep}),t.hilat=v({Tc:e.temp_hilat,Sal:e.sal_hilat}),t.lolat=v({Tc:e.temp_lolat,Sal:e.sal_lolat}),t}},{key:"componentDidMount",value:function(){this.startSimulation()}},{key:"componentWillUnmount",value:function(){this.stopSimulation()}},{key:"handleDropdownSelect",value:function(e){this.setState({schematicParam:e})}},{key:"handleParamUpdate",value:function(e,t){var a=this.state.now;a[e]=t,this.setState({now:a,Ks:this.genKs(a)})}},{key:"onChangeYears",value:function(e){this.setState({year_field:e.target.value})}},{key:"onYearsEnter",value:function(e){"Enter"===e.key&&this.setState({npoints:this.state.year_field})}},{key:"handleUpdateYears",value:function(){this.setState({npoints:this.state.year_field})}},{key:"handleSpeedUp",value:function(){var e=this,t=this.state.frameTime/2,a=1/t*1e3;clearInterval(this.interval),this.interval=setInterval((function(){e.stepModel()}),t),this.setState({frameTime:t,yearsPerSecond:a})}},{key:"handleSlowDown",value:function(){var e=this,t=2*this.state.frameTime,a=1/t*1e3;clearInterval(this.interval),this.interval=setInterval((function(){e.stepModel()}),t),this.setState({frameTime:t,yearsPerSecond:a})}},{key:"render",value:function(){return s.a.createElement("div",{id:"main-panel"},s.a.createElement("div",{className:"top-bar"},s.a.createElement("div",{className:"control-container"},s.a.createElement(W,{title:"Global",params:this.state.model_global_params,now:this.state.now,handleUpdate:this.handleParamUpdate}),s.a.createElement(W,{title:"High Latitude",params:this.state.model_hilat_params,now:this.state.now,handleUpdate:this.handleParamUpdate}),s.a.createElement(W,{title:"Low Latitude",params:this.state.model_lolat_params,now:this.state.now,handleUpdate:this.handleParamUpdate}),s.a.createElement(F,{handleVolcano:this.handleVolcano,handleEmissions:this.toggleEmissions,GtC_released:this.state.GtC_released}))),s.a.createElement("div",{className:"main-display"},s.a.createElement(te,{param:this.state.schematicParam,data:this.state.history,fluxes:this.state.fluxes,ocean_vars:this.state.ocean_vars,npoints:this.state.npoints,var_info:A,handleDropdownSelect:this.handleDropdownSelect,plot_hilat:this.state.plot_hilat,plot_lolat:this.state.plot_lolat,plot_deep:this.state.plot_deep})),s.a.createElement("div",{className:"bottom-bar"},s.a.createElement("div",{id:"plot-controls"},s.a.createElement(oe,{id:"plot-param-toggle",params:this.state.ocean_vars,defaultValue:this.state.plot_ocean,onChange:this.handleParamToggle}),s.a.createElement("div",{id:"time-controls"},s.a.createElement(I.a,{size:"sm",className:"control-bit"},s.a.createElement(I.a.Prepend,null,s.a.createElement(I.a.Text,{id:"basic-addon1"},"Model Years")),s.a.createElement(w.a,{placeholder:"200","aria-label":"200","aria-describedby":"basic-addon2",onChange:this.onChangeYears,onKeyPress:this.onYearsEnter}),s.a.createElement(I.a.Append,null,s.a.createElement(D.a,{onClick:this.handleUpdateYears,size:"sm"},"Set"))),s.a.createElement(k.a,{size:"sm",id:"speed-controls",className:"control-bit"},s.a.createElement(D.a,{onClick:this.handleSlowDown,size:"sm"},"\u2193"),s.a.createElement("div",{id:"speed-label",dangerouslySetInnerHTML:{__html:"Speed<br>"+this.state.yearsPerSecond+" yr/s"}}),s.a.createElement(D.a,{onClick:this.handleSpeedUp,size:"sm"},"\u2191")),s.a.createElement(k.a,{size:"sm",className:"control-bit"},s.a.createElement(D.a,{onClick:this.resetModel,size:"sm"},"Reset"),s.a.createElement(D.a,{onClick:this.toggleSimulation,size:"sm"},this.state.start_stop_button)))),s.a.createElement("div",{className:"bottom-credit"},"\xa9"," ",s.a.createElement("a",{href:"mailto:ob266@cam.ac.uk"},"Oscar Branson"),", Department of Earth Sciences, University of Cambridge")))}}]),a}(s.a.Component);a(161);var pe=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[144,1,2]]]);
//# sourceMappingURL=main.d60433ad.chunk.js.map