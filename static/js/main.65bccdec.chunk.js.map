{"version":3,"sources":["components/csys.jsx","components/ThreeBox_full.jsx","components/ControlElements.jsx","components/ModelControls.jsx","components/Graph.jsx","components/GraphPane.jsx","components/Schematic.jsx","components/ParamDropdown.jsx","components/ParamButtons.jsx","components/Model.jsx","App.js","serviceWorker.js","index.js"],"names":["moles2GtC","moles","GtC2uatm","GtC","calc_Ks","Tc","Sal","sqrtSal","Math","sqrt","T","lnT","log","K0","exp","K1","pow","K2","KW","KB","KspC","log10","KspA","calc_csys","DIC","TA","Ks","H","BT","diff_H","HCO3","CO3","OH","abs","give_DIC_TA","pH","CO2","fCO2","c","paramLabels","PO4","SA_ocean","start_state","vol_ocean","calc_fluxes","state","fluxes","vmix_PO4_hilat","vmix","PO4_hilat","PO4_deep","vmix_PO4_lolat","PO4_lolat","vmix_DIC_hilat","DIC_hilat","DIC_deep","vmix_DIC_lolat","DIC_lolat","vmix_TA_hilat","TA_hilat","TA_deep","vmix_TA_lolat","TA_lolat","vthermo_PO4_deep","vthermo","vthermo_PO4_lolat","vthermo_PO4_hilat","vthermo_DIC_deep","vthermo_DIC_lolat","vthermo_DIC_hilat","vthermo_TA_deep","vthermo_TA_lolat","vthermo_TA_hilat","prod_PO4_hilat","vol_hilat","tau_hilat","prod_PO4_lolat","vol_lolat","tau_lolat","f_DIC_lolat","percent_CaCO3_lolat","f_DIC_hilat","percent_CaCO3_hilat","prod_DIC_hilat","prod_DIC_lolat","f_TA_lolat","f_TA_hilat","prod_TA_hilat","prod_TA_lolat","exCO2_lolat","kas","SA_lolat","pCO2_atmos","fCO2_lolat","exCO2_hilat","SA_hilat","fCO2_hilat","step","newState","Object","assign","vol_deep","csys_deep","csys_hilat","csys_lolat","cvar","update_csys","var_info","label","ymin","ymax","precision","VerticalSlider","React","Component","props","handleChange","value","bind","fmtLabel","this","fmt_info","min","max","orientation","onChange","format","labels","fmt_sci","toExponential","fmt_pre","toPrecision","paramFormats","temp_hilat","temp_lolat","sliderLabels","ControlSet","handleDouble","handleHalve","handleSliderChange","e","handleUpdate","param","className","dangerouslySetInnerHTML","__html","Disasters","GtC_pinutubo","emitLabel","handleVolcano","handleEmissions","style","zIndex","GtC_released","toFixed","onClick","size","ModelControls","controls","params","p","push","key","now","title","Graph","interval","graph","a","pad","mx","d3","mn","rn","bb","id","node","getBoundingClientRect","svg_height","height","svg_width","width","xScale","domain","npoints","range","yScale","getLimits","data","svg","append","attr","yAxis","ticks","call","text","ylabel","dataLabel","d","line","x","_","i","y","selectAll","scale","select","transition","clearInterval","initGraph","updateYlim","updateLine","updateDataLabel","SubGraph","SubGraphPane","h","variables","length","graphs","info","left","pos","bottom","flux_labels","flux_colors","Box","backgroundColor","color","mapValue","val","s","parseHSL","l","Schematic","gMin","gMax","limits","ind","val_atmos","val_deep","col_deep","val_lolat","col_lolat","val_hilat","col_hilat","legend","plot_hilat","plot_lolat","plot_deep","sizes","centre","colors","slice","Fluxes","arrowWidthPercent","arrowHeightPercent","top","arrows","n","direction","amplitude","labelPos","Arrow","arrowStyle","size_2_percent","ParamToggle","buttons","ToggleButton","ToggleButtonGroup","type","name","defaultValue","Model","history","genKs","Array","fill","box","plot_ocean","running","emitting","stepModel","startSimulation","stopSimulation","resetModel","toggleSimulation","genPlotVars","handleDropdownSelect","handleParamButtonChange","handleParamToggle","handleParamUpdate","toggleEmissions","setInterval","setState","start_stop_button","updateHistory","new_GtC","emissions","newHisotry","shift","schematicParam","plotvars","temp_deep","sal_deep","sal_hilat","sal_lolat","model_global_params","model_hilat_params","model_lolat_params","ocean_vars","variant","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.65bccdec.chunk.js","sourcesContent":["// functions for calculating C chemistry\n\nvar BT35 = 415.7e-6 / 35.;\n\nexport function moles2uatm(moles) {\n    return moles * 12 / 2.13e15\n}\n\nexport function uatm2moles(uatm) {\n    return uatm * 2.13e15 / 12\n}\n\nexport function GtC2moles(GtC) {\n    return GtC * 1e15 / 12\n}\n\nexport function moles2GtC(moles) {\n    return moles * 1e-15 * 12\n}\n\nexport function uatm2GtC(uatm) {\n    return uatm * 2.13\n}\n\nexport function GtC2uatm(GtC) {\n    return GtC / 2.13\n}\n\nexport function calc_Ks({ Tc, Sal }) {\n    let sqrtSal = Math.sqrt(Sal);\n    let T = Tc + 273.15;\n    let lnT = Math.log(T);\n\n    let K0 = Math.exp(-60.2409 + 93.4517 * 100 / T + 23.3585 * Math.log(T / 100) + Sal * (0.023517 - 0.023656 * T / 100 + 0.0047036 * (T / 100) * (T / 100)));  // Weiss74\n    let K1 = Math.pow(10, -3633.86 / T + 61.2172 - 9.67770 * lnT + 0.011555 * Sal - 0.0001152 * Sal * Sal)  // Dickson\n    let K2 = Math.pow(10, -471.78 / T - 25.9290 + 3.16967 * lnT + 0.01781 * Sal - 0.0001122 * Sal * Sal);\n\n    let KW = Math.exp(148.9652 - 13847.26 / T - 23.6521 * lnT + (118.67 / T - 5.977 + 1.0495 * lnT) * sqrtSal - 0.01615 * Sal)\n    let KB = Math.exp((-8966.90 - 2890.53 * sqrtSal - 77.942 * Sal + 1.728 * Sal * sqrtSal - 0.0996 * Sal * Sal) / T + (148.0248 + 137.1942 * sqrtSal + 1.62142 * Sal) + (-24.4344 - 25.085 * sqrtSal - 0.2474 * Sal) * lnT + 0.053105 * sqrtSal * T);  // Dickson90b\n\n    let KspC = Math.pow(10, (-171.9065 - 0.077993 * T + 2839.319 / T + 71.595 * Math.log10(T) + (-0.77712 + 0.0028426 * T + 178.34 / T) * sqrtSal - 0.07711 * Sal + 0.0041249 * Sal * sqrtSal))\n    let KspA = Math.pow(10, (-171.945 - 0.077993 * T + 2903.293 / T + 71.595 * Math.log10(T) + (-0.068393 + 0.0017276 * T + 88.135 / T) * sqrtSal - 0.10018 * Sal + 0.0059415 * Sal * sqrtSal))\n\n    return {\n        K0: K0,\n        K1: K1,\n        K2: K2,\n        KB: KB,\n        KW: KW,\n        KspA: KspA,\n        KspC: KspC\n    }\n}\n\nexport function give_DIC_TA({ DIC, TA, Sal, Ks}) {\n    // Returns [H], units: mol/kg\n\n    let BT = BT35 * Sal;\n    let pH = 8.;\n    let H = 10 ** -pH;\n    let diff_H = H;\n    let tiny_diff_H = 1e-15;\n\n    let HCO3 = null;\n    let CO3 = null;\n    let CAlk = null;\n    let BAlk = null;\n    let OH = null;\n    let residual = null;\n    let slope = null;\n\n    while (Math.abs(diff_H) > tiny_diff_H) {\n        HCO3 = DIC / (1 + H / Ks.K1 + Ks.K2 / H);\n        CO3 = DIC / (1 + H / Ks.K2 + H**2 / (Ks.K1 * Ks.K2))\n        CAlk = HCO3 + 2 * CO3;\n        BAlk = BT * Ks.KB / (Ks.KB + H);\n        OH = Ks.KW / H;\n\n        residual = TA - CAlk - BAlk - OH + H;\n        slope = 1 + (2 * CO3 + HCO3 + OH) / H + BT * Ks.KB / (Ks.KB + H) ** 2\n\n        diff_H = residual / slope;\n        H -= diff_H;\n    }\n\n    return H\n}\n\nexport function give_H_CO2({H, CO2, Ks}) {\n    // Returns DIC, units: mol/kg\n    return CO2 * (1 + Ks.K1 / H + Ks.K1 * Ks.K2 / H ** 2)  // DIC\n}\n\n// For adding CO2 with conserved TA.\nexport function give_fCO2_TA({ fCO2, TA, Sal, Ks}) {\n    // Returns DIC, units: mol/kg\n    let BT = BT35 * Sal;\n\n    let CO2 = fCO2 * Ks.K0;\n    let pH = 8.;\n    let H = 10 ** -pH;\n    let diff_H = H;\n    let tiny_diff_H = 1e-15;\n\n    let HCO3 = null;\n    let CO3 = null;\n    let CAlk = null;\n    let BAlk = null;\n    let OH = null;\n    let residual = null;\n    let slope = null;\n\n    while (Math.abs(diff_H) > tiny_diff_H) {\n        HCO3 = Ks.K1 * CO2 / H;\n        CO3 = Ks.K1 * Ks.K2 * CO2 / H ** 2;\n        CAlk = HCO3 + 2 * CO3;\n        BAlk = BT * Ks.KB / (Ks.KB + H);\n        OH = Ks.KW / H;\n\n        residual = TA - CAlk - BAlk - OH + H;\n        slope = 1 + (2 * CO3 + HCO3 + OH) / H + BT * Ks.KB / (Ks.KB + H) ** 2\n\n        diff_H = residual / slope;\n        H -= diff_H;\n    }\n\n    return CO2 * (1 + Ks.K1 / H + Ks.K1 * Ks.K2 / H ** 2)  // DIC\n    // return H\n}\n\nexport function DIC_from_fCO2({ fCO2, TA, Sal, Ks }) {\n    TA *= 1e-6;\n    fCO2 *= 1e-6;\n\n    // let Ks = calc_Ks({ Tc: Temp, Sal: Sal })\n\n    let DIC = give_fCO2_TA({fCO2: fCO2, TA:TA, Sal: Sal, Ks:Ks})\n\n    return DIC\n}\n\nexport function calc_csys({ DIC, TA, Sal, Ks }) {\n    TA = TA * 1e-6;\n    DIC = DIC * 1e-6;\n\n    // let Ks = calc_Ks({ Tc: Temp, Sal: Sal })\n\n    let H = give_DIC_TA({DIC: DIC, TA:TA, Sal: Sal, Ks:Ks})\n\n    let pH = -Math.log10(H)\n    let CO2 = 1e6 * DIC / (1 + Ks.K1 / H + Ks.K1 * Ks.K2 / H**2)\n    let HCO3 = 1e6 * DIC / (1 + H / Ks.K1 + Ks.K2 / H);\n    let CO3 = 1e6 * DIC / (1 + H / Ks.K2 + H ** 2 / (Ks.K1 * Ks.K2));\n    let fCO2 = CO2 / Ks.K0;\n\n    // Saturation measure\n    let c = 1e-6 * CO3 / (Ks.KspC / 10.2e-3)\n\n    return {\n        pH: pH,\n        fCO2: fCO2,\n        CO2: CO2,\n        HCO3: HCO3,\n        CO3: CO3,\n        c: c\n    }\n}\n\n","import { calc_csys, GtC2uatm, moles2uatm, uatm2moles } from './csys';\n\nfunction calc_percent_CaCO3(c, cb, percent_CaCO3) {\n    if (c >= cb) {\n        return percent_CaCO3\n    } else {\n        return percent_CaCO3 * c / cb\n    }\n}\n\nfunction dPO4_deep(state) {\n    return (state.vmix * state.PO4_hilat -\n        state.vmix * state.PO4_deep +\n        state.vthermo * state.PO4_hilat -\n        state.vthermo * state.PO4_deep +\n        (state.PO4_hilat * state.vol_hilat / state.tau_hilat) +\n        (state.PO4_lolat * state.vol_lolat / state.tau_lolat)) / state.vol_deep\n}\n\nfunction dPO4_hilat(state) {\n    return (state.vmix * state.PO4_deep -\n        state.vmix * state.PO4_hilat +\n        state.vthermo * state.PO4_lolat -\n        state.vthermo * state.PO4_hilat -\n        (state.PO4_hilat * state.vol_hilat / state.tau_hilat)) / state.vol_hilat\n}\n\nfunction dPO4_lolat(state) {\n    return (state.vthermo * state.PO4_deep -\n        state.vthermo * state.PO4_lolat -\n        (state.PO4_lolat * state.vol_lolat / state.tau_lolat)) / state.vol_lolat\n}\n\n// Form from Zeebe 2012 (LOSCAR)\nfunction dCO2_lolat(state, Ks) {\n    // console.log(state.pCO2_atmos * Ks.lolat.K0 - state.CO2_lolat)\n    return state.kas * state.SA_lolat * (state.pCO2_atmos - state.fCO2_lolat)  // mol yr-1\n}\n\nfunction dCO2_hilat(state, Ks) {\n    // console.log(state.pCO2_atmos * Ks.hilat.K0 - state.CO2_hilat)\n    return state.kas * state.SA_hilat * (state.pCO2_atmos - state.fCO2_hilat)  // mol yr-1\n}\n\nfunction dpCO2(state, Ks) {\n    let q0 = 2.2e15 / 12;  // convert from uatm to moles\n    let del_moles_C = (\n        state.kas * state.SA_hilat * (state.fCO2_hilat - state.pCO2_atmos) + \n        state.kas * state.SA_lolat * (state.fCO2_lolat - state.pCO2_atmos)\n        );\n    let del_uatm_CO2 = del_moles_C / q0;\n    // console.log(del_uatm_CO2)\n    return del_uatm_CO2\n}\n\nfunction dDIC_deep(state) {\n    let f_DIC_lolat = 106 + 106 * state.percent_CaCO3_lolat / 100;\n    let f_DIC_hilat = 106 + 106 * state.percent_CaCO3_hilat / 100;\n    return (\n        state.vmix * (state.DIC_hilat - state.DIC_deep) +\n        state.vthermo * (state.DIC_hilat - state.DIC_deep) +\n        f_DIC_hilat * (state.PO4_hilat * state.vol_hilat / state.tau_hilat) +\n        f_DIC_lolat * (state.PO4_lolat * state.vol_lolat / state.tau_lolat)\n        ) / state.vol_deep\n}\n\nfunction dDIC_hilat(state, Ks) {\n    let f_DIC = 106 + 106 * state.percent_CaCO3_hilat / 100;\n    // console.log(1e3 * dCO2_hilat(state, Ks) / state.vol_hilat)\n    return (\n        state.vmix * (state.DIC_deep - state.DIC_hilat)\n        + state.vthermo * (state.DIC_lolat - state.DIC_hilat)\n        - f_DIC * (state.PO4_hilat * state.vol_hilat / state.tau_hilat)\n        + 1e6 * dCO2_hilat(state, Ks)\n        ) / state.vol_hilat\n}\n\nfunction dDIC_lolat(state, Ks) {\n    let f_DIC = 106 + 106 * state.percent_CaCO3_lolat / 100;\n    // console.log(1e3 * dCO2_lolat(state, Ks) / state.vol_lolat)\n    return (\n        state.vthermo * (state.DIC_deep - state.DIC_lolat)\n        - f_DIC * (state.PO4_lolat * state.vol_lolat / state.tau_lolat)\n        + 1e6 * dCO2_lolat(state, Ks)\n        ) / state.vol_lolat\n}\n\nfunction dTA_deep(state) {\n    let f_TA_lolat = 0.15 * 106 + 2 * 106 * state.percent_CaCO3_lolat / 100;\n    let f_TA_hilat = 0.15 * 106 + 2 * 106 * state.percent_CaCO3_hilat / 100;\n    return (state.vmix * state.TA_hilat -\n        state.vmix * state.TA_deep +\n        state.vthermo * state.TA_hilat -\n        state.vthermo * state.TA_deep +\n        f_TA_hilat * (state.PO4_hilat * state.vol_hilat / state.tau_hilat) +\n        f_TA_lolat * (state.PO4_lolat * state.vol_lolat / state.tau_lolat)) / state.vol_deep\n}\n\nfunction dTA_hilat(state) {\n    let f_TA = 0.15 * 106 + 2 * (106 * state.percent_CaCO3_hilat / 100);\n    return (state.vmix * state.TA_deep -\n        state.vmix * state.TA_hilat +\n        state.vthermo * state.TA_lolat -\n        state.vthermo * state.TA_hilat -\n        f_TA * (state.PO4_hilat * state.vol_hilat / state.tau_hilat)) / state.vol_hilat\n}\n\nfunction dTA_lolat(state) {\n    let f_TA = 0.15 * 106 + 2 * (106 * state.percent_CaCO3_lolat / 100);\n    return (state.vthermo * state.TA_deep -\n        state.vthermo * state.TA_lolat -\n        f_TA * (state.PO4_lolat * state.vol_lolat / state.tau_lolat)) / state.vol_lolat\n}\n\n\n// const total_DIC = 2100;\n// const total_TA = 2200;\n\n// From Table 8.2.4 of Sarmiento & Gruber mean global ocean\n// const total_DIC = 2256;\n// const total_TA = 2364;\n\nexport const paramLabels = {\n    PO4: '[PO<sub>4</sub>]',\n    c: '\\u03A9',\n    DIC: 'DIC',\n    TA: 'TA',\n    fCO2: 'fCO<sub>2</sub>',\n    pH: 'pH',\n    CO3: '[CO<sub>3</sub><sup>2-</sup>]',\n    HCO3: '[HCO<sub>3</sub><sup>-</sup>]',\n}\n\n// Box setup\nconst SA_ocean = 358e12;  // m2\nconst vol_ocean = 1.34e18  // m3\nconst fSA_hilat = 0.15;\nconst depth_hilat = 200;  // m\nconst vol_hilat = SA_ocean * fSA_hilat * depth_hilat;  // m3\nconst fSA_lolat = 1 - fSA_hilat;\nconst depth_lolat = 100;  // m\nconst vol_lolat = SA_ocean * fSA_lolat * depth_lolat;  // m3\n\nconst Sv_2_m3yr = 1e6 * (60 * 60 * 24 * 365);\nconst vthermo = 20;  // Sv\nconst vmix = 10;  // Sv\n\nexport const start_state = {\n    'kas': 0.02,  // air-sea gas exchange mol (uatm m2 yr-1)-1\n    // 'vmix': 1.2e15,\n    'vmix': 1.89e15,  // m3 yr-1\n    // 'vthermo': 6.3072e14,\n    'vthermo': 6.3072e14,  // m3 yr-1\n    'tau_hilat': 50,  // yr\n    'tau_lolat': 1,  // yr\n    'percent_CaCO3_hilat': 10,\n    'percent_CaCO3_lolat': 20,\n    'depth_lolat': depth_lolat,\n    'depth_hilat': depth_hilat,\n    'vol_ocean': vol_ocean,\n    'vol_deep': vol_ocean - vol_lolat - vol_hilat,  // m3\n    'vol_lolat': vol_lolat,  // m3\n    'vol_hilat': vol_hilat,  // m3\n    'mass_atmos': 5.132e18,  // kg\n    'moles_atmos': 1.773e20,  // moles\n    'SA_ocean': SA_ocean,  // m2\n    'fSA_hilat': fSA_hilat,\n    'fSA_lolat': fSA_lolat,\n    'SA_hilat': SA_ocean * fSA_hilat,\n    'SA_lolat': SA_ocean * fSA_lolat,\n    // Temp and sal from Table A.3 of Sarmiento & Gruber\n    'temp_deep': 1.92,\n    'temp_hilat': (4.21 + 3.22) / 2,\n    'temp_lolat': 22.85,\n    'sal_lolat': 35.15,\n    'sal_hilat': 33.5,\n    'sal_deep': 34.72,\n    'PO4_lolat': 0.0484,  //0.31,\n    'PO4_hilat': 1.66,  //(0.89 + 1.54) / 2,\n    'PO4_deep': 2.38,\n    'DIC_lolat': 1958, // 1972,  //1958,  // total_DIC,\n    'DIC_hilat': 2006,  // 2192,  //(2006 + 2082) / 2,  // total_DIC,\n    'DIC_deep': 2260,  //2279,  // total_DIC,\n    'TA_lolat': 2315,  // 2244,  // 2315,  // total_TA,\n    'TA_hilat': 2291,  //2341,  // (2257 + 2291) / 2,  // total_TA,\n    'TA_deep': 2380.4,  // total_TA,\n    'c_lolat': 1,\n    'c_hilat': 1,\n    'c_deep': 1,\n    'fCO2_lolat': 399,\n    'fCO2_hilat': 369,\n    'fCO2_deep': 502,\n    'pH_lolat': 7.99,\n    'pH_hilat': 8.23,\n    'pH_deep': 7.97,\n    'CO2_lolat': 9,\n    'CO2_hilat': 9,\n    'CO2_deep': 9,\n    'HCO3_lolat': 1900,\n    'HCO3_hilat': 1900,\n    'HCO3_deep': 1900,\n    'CO3_lolat': 300,\n    'CO3_hilat': 300,\n    'CO3_deep': 300,\n    'pCO2_atmos': 389,\n};\n\n\nfunction update_csys(state, Ks) {\n    let csys_deep = calc_csys({\n        DIC: state['DIC_deep'],\n        TA: state['TA_deep'],\n        Sal: state['sal_deep'],\n        Ks: Ks['deep']\n    })\n\n    let csys_hilat = calc_csys({\n        DIC: state['DIC_hilat'],\n        TA: state['TA_hilat'],\n        Sal: state['sal_hilat'],\n        Ks: Ks['hilat']\n    })\n\n    let csys_lolat = calc_csys({\n        DIC: state['DIC_lolat'],\n        TA: state['TA_lolat'],\n        Sal: state['sal_lolat'],\n        Ks: Ks['lolat']\n    })\n\n    for (let cvar of ['pH', 'fCO2', 'CO2', 'HCO3', 'CO3', 'c']) {\n        state[cvar + '_deep'] = csys_deep[cvar]\n        state[cvar + '_lolat'] = csys_lolat[cvar]\n        state[cvar + '_hilat'] = csys_hilat[cvar]\n    }\n\n    return state\n}\n\nfunction calc_pCO2_atmos(state) {\n    return (state.fCO2_hilat * state.vol_hilat + state.fCO2_lolat * state.vol_lolat) / (state.vol_hilat + state.vol_lolat)\n}\n\nexport function calc_fluxes(state) {\n    let fluxes = {};\n    // vmix\n    fluxes.vmix_PO4_hilat = state.vmix * (state.PO4_hilat - state.PO4_deep);\n    fluxes.vmix_PO4_lolat = state.vmix * (state.PO4_lolat - state.PO4_deep);\n    // fluxes.vmix_PO4_lolat = 0;\n    fluxes.vmix_DIC_hilat = state.vmix * (state.DIC_hilat - state.DIC_deep);\n    fluxes.vmix_DIC_lolat = state.vmix * (state.DIC_lolat - state.DIC_deep);\n    // fluxes.vmix_DIC_lolat = 0;\n    fluxes.vmix_TA_hilat = state.vmix * (state.TA_hilat - state.TA_deep);\n    fluxes.vmix_TA_lolat = state.vmix * (state.TA_lolat - state.TA_deep);\n    // fluxes.vmix_TA_lolat = 0;\n\n    // vthermo\n    fluxes.vthermo_PO4_deep = state.vthermo * (state.PO4_hilat - state.PO4_deep);\n    fluxes.vthermo_PO4_lolat = state.vthermo * (state.PO4_deep - state.PO4_lolat);\n    fluxes.vthermo_PO4_hilat = state.vthermo * (state.PO4_lolat - state.PO4_hilat);\n    fluxes.vthermo_DIC_deep = state.vthermo * (state.DIC_hilat - state.DIC_deep);\n    fluxes.vthermo_DIC_lolat = state.vthermo * (state.DIC_deep - state.DIC_lolat);\n    fluxes.vthermo_DIC_hilat = state.vthermo * (state.DIC_lolat - state.DIC_hilat);\n    fluxes.vthermo_TA_deep = state.vthermo * (state.TA_hilat - state.TA_deep);\n    fluxes.vthermo_TA_lolat = state.vthermo * (state.TA_deep - state.TA_lolat);\n    fluxes.vthermo_TA_hilat = state.vthermo * (state.TA_lolat - state.TA_hilat);\n\n    // productivity\n    fluxes.prod_PO4_hilat = (state.PO4_hilat * state.vol_hilat / state.tau_hilat);\n    fluxes.prod_PO4_lolat = (state.PO4_lolat * state.vol_lolat / state.tau_lolat);\n    let f_DIC_lolat = 106 + 106 * state.percent_CaCO3_lolat / 100;\n    let f_DIC_hilat = 106 + 106 * state.percent_CaCO3_hilat / 100;\n    fluxes.prod_DIC_hilat = fluxes.prod_PO4_hilat * f_DIC_hilat\n    fluxes.prod_DIC_lolat = fluxes.prod_PO4_lolat * f_DIC_lolat\n    let f_TA_lolat = 0.15 * 106 + 2 * 106 * state.percent_CaCO3_lolat / 100;\n    let f_TA_hilat = 0.15 * 106 + 2 * 106 * state.percent_CaCO3_hilat / 100;\n    fluxes.prod_TA_hilat = fluxes.prod_PO4_hilat * f_TA_hilat\n    fluxes.prod_TA_lolat = fluxes.prod_PO4_lolat * f_TA_lolat\n\n    // CO2 exchange (moles yr-1)\n    fluxes.exCO2_lolat = state.kas * state.SA_lolat * (state.pCO2_atmos - state.fCO2_lolat)\n    fluxes.exCO2_hilat = state.kas * state.SA_hilat * (state.pCO2_atmos - state.fCO2_hilat)\n\n    return fluxes\n}\n\nexport function step(state, fluxes, Ks) {\n    // let fluxes = calc_fluxes(state);\n    let newState = Object.assign({}, state);\n    // let newState = state;\n\n    newState.PO4_deep += (fluxes.vmix_PO4_hilat + fluxes.vmix_PO4_lolat + fluxes.vthermo_PO4_deep + fluxes.prod_PO4_hilat + fluxes.prod_PO4_lolat) / state.vol_deep\n    newState.PO4_hilat += (- fluxes.vmix_PO4_hilat + fluxes.vthermo_PO4_hilat - fluxes.prod_PO4_hilat) / state.vol_hilat\n    newState.PO4_lolat += (- fluxes.vmix_PO4_lolat + fluxes.vthermo_PO4_lolat - fluxes.prod_PO4_lolat) / state.vol_lolat\n\n    newState.DIC_deep += (fluxes.vmix_DIC_hilat + fluxes.vmix_DIC_lolat + fluxes.vthermo_DIC_deep + fluxes.prod_DIC_hilat + fluxes.prod_DIC_lolat) / state.vol_deep\n    newState.DIC_hilat += (- fluxes.vmix_DIC_hilat + fluxes.vthermo_DIC_hilat - fluxes.prod_DIC_hilat + 1e3 * fluxes.exCO2_hilat) / state.vol_hilat\n    newState.DIC_lolat += (- fluxes.vmix_DIC_lolat + fluxes.vthermo_DIC_lolat - fluxes.prod_DIC_lolat + 1e3 * fluxes.exCO2_lolat) / state.vol_lolat\n\n    newState.TA_deep += (fluxes.vmix_TA_hilat + fluxes.vmix_TA_lolat + fluxes.vthermo_TA_deep + fluxes.prod_TA_hilat + fluxes.prod_TA_lolat) / state.vol_deep\n    newState.TA_hilat += (- fluxes.vmix_TA_hilat + fluxes.vthermo_TA_hilat - fluxes.prod_TA_hilat) / state.vol_hilat\n    newState.TA_lolat += (- fluxes.vmix_TA_lolat + fluxes.vthermo_TA_lolat - fluxes.prod_TA_lolat) / state.vol_lolat\n\n    newState.pCO2_atmos += moles2uatm(- fluxes.exCO2_hilat - fluxes.exCO2_lolat)\n\n    newState = update_csys(newState, Ks);\n    \n    return newState\n}\n\nexport const var_info = {\n    // variable: [label, min, max]\n    'vmix': {\n        label: 'Mixing Rate (m3 / yr)',\n        ymin: null,\n        ymax: null,\n        precision: null\n    },\n    'vthermo': {\n        label: 'Thermohaline Mixing Rate (m3 / yr)',\n        ymin: null,\n        ymax: null,\n        precision: null\n    },\n    'tau_lolat': {\n        label: 'Productivity (tau)',\n        ymin: null,\n        ymax: null,\n        precision: null\n    },\n    'tau_hilat': {\n        label: 'Productivity (tau)',\n        ymin: null,\n        ymax: null,\n        precision: null\n    },\n    'percent_CaCO3_lolat': {\n        label: '% CaCO3',\n        ymin: 0,\n        ymax: 100,\n        precision: 1\n    },\n    'percent_CaCO3': {\n        label: '% CaCO3',\n        ymin: 0,\n        ymax: 100,\n        precision: 1\n    },\n    'vol_deep': {\n        label: 'Ocean Volume (m3)',\n        ymin: null,\n        ymax: null,\n        precision: null\n    },\n    'vol_lolat': {\n        label: 'Ocean Volume (m3)',\n        ymin: null,\n        ymax: null,\n        precision: null\n    },\n    'vol_hilat': {\n        label: 'Ocean Volume (m3)',\n        ymin: null,\n        ymax: null,\n        precision: null\n    },\n    'PO4_lolat': {\n        label: '[PO4]',\n        ymin: 0,\n        ymax: 1,\n        precision: 3\n    },\n    'PO4_hilat': {\n        label: '[PO4]',\n        ymin: 0,\n        ymax: 1,\n        precision: 3\n    },\n    'PO4_deep': {\n        label: '[PO4]',\n        ymin: 2.4,\n        ymax: 2.6,\n        precision: 3\n    },\n    'DIC_hilat': {\n        label: '[DIC]',\n        ymin: 1800,\n        ymax: 2000,\n        precision: 4\n    },\n    'DIC_lolat': {\n        label: '[DIC]',\n        ymin: 1800,\n        ymax: 2000,\n        precision: 4\n    },\n    'DIC_deep': {\n        label: '[DIC]',\n        ymin: 2130,\n        ymax: 2150,\n        precision: 5\n    },\n    'TA_lolat': {\n        label: 'Alkalinity',\n        ymin: 2200,\n        ymax: 2400,\n        precision: 4\n    },\n    'TA_hilat': {\n        label: 'Alkalinity',\n        ymin: 2200,\n        ymax: 2400,\n        precision: 4\n    },\n    'TA_deep': {\n        label: 'Alkalinity',\n        ymin: 2390,\n        ymax: 2410,\n        precision: 5\n    },\n    'pH_deep': {\n        label: 'pH',\n        ymin: 7.5,\n        ymax: 8.5,\n        precision: 3\n    },\n    'fCO2_deep': {\n        label: 'fCO2',\n        ymin: 350,\n        ymax: 450,\n        precision: 3\n    },\n    'CO2_deep': {\n        label: '[CO2]',\n        ymin: 5,\n        ymax: 15,\n        precision: 3\n    },\n    'HCO3_deep': {\n        label: '[HCO3]',\n        ymin: 1500,\n        ymax: 2000,\n        precision: 4\n    },\n    'CO3_deep': {\n        label: '[CO3]',\n        ymin: 70,\n        ymax: 120,\n        precision: 3\n    },\n    'pH_hilat': {\n        label: 'pH',\n        ymin: 7.5,\n        ymax: 8.5,\n        precision: 3\n    },\n    'fCO2_hilat': {\n        label: 'fCO2',\n        ymin: 350,\n        ymax: 450,\n        precision: 3\n    },\n    'CO2_hilat': {\n        label: '[CO2]',\n        ymin: 5,\n        ymax: 15,\n        precision: 3\n    },\n    'HCO3_hilat': {\n        label: '[HCO3]',\n        ymin: 1500,\n        ymax: 2000,\n        precision: 4\n    },\n    'CO3_hilat': {\n        label: '[CO3]',\n        ymin: 70,\n        ymax: 120,\n        precision: 3\n    },\n    'pH_lolat': {\n        label: 'pH',\n        ymin: 7.5,\n        ymax: 8.5,\n        precision: 3\n    },\n    'fCO2_lolat': {\n        label: 'fCO2',\n        ymin: 350,\n        ymax: 450,\n        precision: 3\n    },\n    'CO2_lolat': {\n        label: '[CO2]',\n        ymin: 5,\n        ymax: 15,\n        precision: 3\n    },\n    'HCO3_lolat': {\n        label: '[HCO3]',\n        ymin: 1500,\n        ymax: 2000,\n        precision: 4\n    },\n    'CO3_lolat': {\n        label: '[CO3]',\n        ymin: 70,\n        ymax: 120,\n        precision: 3\n    },\n    'c_deep': {\n        label: '\\u03A9',\n        ymin: 0,\n        ymax: 1,\n        precision: 2\n    },\n    'c_lolat': {\n        label: '\\u03A9',\n        ymin: 0,\n        ymax: 1,\n        precision: 2\n    },\n    'c_hilat': {\n        label: '\\u03A9',\n        ymin: 0,\n        ymax: 1,\n        precision: 2\n    },\n    'pCO2_atmos': {\n        label: 'pCO2',\n        ymin: 350,\n        ymax: 450,\n        precision: 4\n    },\n    'temp_lolat': {\n        label: 'Temp',\n        ymin: 20,\n        ymax: 25,\n        precision: 3\n    },\n    'temp_hilat': {\n        label: 'Temp',\n        ymin: 2,\n        ymax: 6,\n        precision: 3\n    },\n    'temp_deep': {\n        label: 'Temp',\n        ymin: 0,\n        ymax: 4,\n        precision: 3\n    },\n    'sal_lolat': {\n        label: 'Temp',\n        ymin: 36,\n        ymax: 34,\n        precision: 3\n    },\n    'sal_hilat': {\n        label: 'Temp',\n        ymin: 36,\n        ymax: 34,\n        precision: 3\n    },\n    'sal_deep': {\n        label: 'Temp',\n        ymin: 36,\n        ymax: 34,\n        precision: 3\n    },\n};","import React from 'react';\nimport Slider from 'react-rangeslider'\nimport 'react-rangeslider/lib/index.css'\n\nexport class Button extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.handleClick = this.handleClick.bind(this)\n    }\n\n    handleClick() {\n        this.props.onClick()\n    }\n\n    render() {\n        return (\n            <button className=\"button\" onClick={this.handleClick}>\n                {this.props.label}\n            </button>\n        )\n    }\n\n}\n\n// https://whoisandy.github.io/react-rangeslider/\nexport class VerticalSlider extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.handleChange = this.handleChange.bind(this)\n        this.fmtLabel = this.fmtLabel.bind(this)\n    }\n\n    handleChange = value => {\n        this.props.handleChange(value)\n      };\n\n    fmtLabel(value) {\n        return this.props.fmt_info[0](value, this.props.fmt_info[1])\n    }\n\n    render() {\n        return (\n            <Slider \n                value={this.props.value}\n                min={this.props.min}\n                max={this.props.max}\n                orientation='vertical'\n                onChange={this.handleChange}\n                format={this.fmtLabel}\n                labels={this.props.labels}\n            />\n        )\n    }\n\n}\n\n","import React from 'react';\nimport Button from 'react-bootstrap/Button';\nimport { VerticalSlider } from './ControlElements';\nimport { start_state } from './ThreeBox_full'\n\nfunction fmt_sci(value, precision) {\n    return value.toExponential(precision)\n}\n\nfunction fmt_pre(value, precision) {\n    return value.toPrecision(precision)\n}\n\nconst paramFormats = {\n    vthermo: [fmt_sci, 2, start_state.vthermo * 0.5, start_state.vthermo * 2],\n    vmix: [fmt_sci, 2, start_state.vmix * 0.5, start_state.vmix * 2],\n    tau_hilat: [fmt_pre, 2, 1, 80],\n    tau_lolat: [fmt_pre, 2, 1, 80],\n    percent_CaCO3_hilat: [fmt_pre, 2, 0, 50],\n    percent_CaCO3_lolat: [fmt_pre, 2, 0, 50],\n    temp_hilat: [fmt_pre, 2, 0, 10],\n    temp_lolat: [fmt_pre, 2, 20, 30]\n}\n\nconst sliderLabels = {\n    vthermo: {[start_state.vthermo]: '', [start_state.vthermo * 2]: 'x2', [start_state.vthermo / 2]: '/2'},\n    vmix: {[start_state.vmix]: '', [start_state.vmix * 2]: 'x2', [start_state.vmix / 2]: '/2'},\n    tau_hilat: {[start_state.tau_hilat]: ''},\n    tau_lolat: {[start_state.tau_lolat]: ''},\n    percent_CaCO3_hilat: {[start_state.percent_CaCO3_hilat]: ''},\n    percent_CaCO3_lolat: {[start_state.percent_CaCO3_lolat]: ''},\n    temp_hilat: {[start_state.temp_hilat]: ''},\n    temp_lolat: {[start_state.temp_lolat]: ''},\n}\n\nconst labels = {\n    vthermo: 'V<sub>thermo</sub>',\n    vmix: 'V<sub>mix</sub>',\n    tau_hilat: '&tau;',\n    tau_lolat: '&tau;',\n    percent_CaCO3_hilat: '% CaCO<sub>3</sub>',\n    percent_CaCO3_lolat: '% CaCO<sub>3</sub>',\n    temp_hilat: 'Temp',\n    temp_lolat: 'Temp',\n}\n\nexport class ControlSet extends React.Component {\n    constructor(props) {\n        super(props)\n        this.handleDouble = this.handleDouble.bind(this);\n        this.handleHalve = this.handleHalve.bind(this);    \n        this.handleSliderChange = this.handleSliderChange.bind(this);    \n    }\n\n    handleDouble(e) {\n        this.props.handleUpdate(this.props.param, this.props.value * 2)\n    }\n\n    handleHalve(e) {\n        this.props.handleUpdate(this.props.param, this.props.value / 2)\n    }\n\n    handleSliderChange(value) {\n        this.props.handleUpdate(this.props.param, value)\n    }\n\n    render () {\n        let min = paramFormats[this.props.param][2];\n        let max = paramFormats[this.props.param][3];\n        return (\n            <div className=\"control-set\">\n                <h3 dangerouslySetInnerHTML={{__html: labels[this.props.param]}}></h3>\n                <VerticalSlider value={this.props.value} min={min} max={max} handleChange={this.handleSliderChange} fmt_info={paramFormats[this.props.param]} labels={sliderLabels[this.props.param]}/>\n                <div className=\"control-value\">\n                {paramFormats[this.props.param][0](this.props.value, paramFormats[this.props.param][1])}\n                </div>\n            </div>\n        )\n    } \n}\n\nexport class Disasters extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            GtC_pinutubo: 0.05 * 0.272,\n            emitLabel: 'Burn!'\n        }\n    \n        this.handleVolcano = this.handleVolcano.bind(this)\n        this.handleEmissions = this.handleEmissions.bind(this)\n    }\n\n    handleVolcano() {\n        this.props.handleVolcano(this.state.GtC_pinutubo)\n    }\n\n    handleEmissions() {\n        this.props.handleEmissions()\n        if (this.state.emitLabel === 'Burn!') {\n            this.state.emitLabel = 'IPCC';\n        } else {\n            this.state.emitLabel = 'Burn!';\n        }\n    }\n\n    render () {\n        return (\n        <div className=\"control-section disasters\" style={{zIndex: 5}}>\n            <h2>Carbon Release: {this.props.GtC_released.toFixed(2)} GtC</h2>\n            <div className=\"model-controls\">\n            <div className=\"control-set\">\n                <h3>Fossil Fuels</h3>\n                <Button onClick={this.handleEmissions} size=\"sm\">{this.state.emitLabel}</Button>\n                {/* <div className=\"control-value\">\n                \n                </div> */}\n            </div>\n            <div className=\"control-set\">\n                <h3>Volcano</h3>\n                {/* <VerticalSlider/> */}\n                {/* <Button size=\"sm\">St. Helens</Button> */}\n                <Button onClick={this.handleVolcano} size=\"sm\">Pinatubo</Button>\n            </div>\n            </div>\n        </div>\n        )\n    }\n}\n\n\nexport class ModelControls extends React.Component {\n    render () {\n        let controls = [];\n        for (let p of this.props.params) {\n            controls.push(\n                <ControlSet \n                    key={p}\n                    param={p}\n                    value={this.props.now[p]}\n                    handleUpdate={this.props.handleUpdate}\n                />\n            )\n        }\n\n        return (\n            <div className=\"control-section\">\n                <h2>{this.props.title}</h2>\n                <div className=\"model-controls\">\n                    {controls}\n                </div>\n            </div>\n        )\n    } \n}","import React, { Component } from 'react'\nimport * as d3 from 'd3';\n// import {axisLeft} from 'd3-axis'\n\nfunction responsivefy(svg) {\n  // get container + svg aspect ratio\n  var container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\")),\n      height = parseInt(svg.style(\"height\")),\n      aspect = width / height;\n\n  // add viewBox and preserveAspectRatio properties,\n  // and call resize so that svg resizes on inital page load\n  svg.attr(\"viewBox\", \"0 0 \" + width + \" \" + height)\n      .attr(\"perserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n  // to register multiple listeners for same event type, \n  // you need to add namespace, i.e., 'click.foo'\n  // necessary if you call invoke this function for multiple svgs\n  // api docs: https://github.com/mbostock/d3/wiki/Selections#on\n  d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n  // get width of container and resize svg to fit it\n  function resize() {\n      var targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n  }\n}\n\nexport class Graph extends Component {\n  constructor(props) {\n    super(props);\n    this.interval = null;\n    this.graph = {};\n  }\n\n  getLimits(a, pad) {\n    let mx = d3.max(a);\n    let mn = d3.min(a);\n    if (mn > this.props.min) {mn = this.props.min};\n    if (mx < this.props.max) {mx = this.props.max};\n    let rn = mx - mn;\n    if (rn === 0) {\n      rn = 10;\n    }\n    return [mn - rn * pad, mx + rn * pad]\n  }\n\n  initGraph() {\n    // size and padding\n    var margin = 10;\n    var axis_margin = 40;\n    this.graph.bb = d3.select(\"#\" + this.props.id).node().getBoundingClientRect();\n\n    var svg_height = this.graph.bb.height,\n        svg_width = this.graph.bb.width;\n      \n    var height = svg_height - margin - axis_margin,\n        width = svg_width - margin - axis_margin;\n\n    this.graph.xScale = d3.scaleLinear()\n      .domain([0, this.props.npoints])\n      .range([0, width]);\n\n    this.graph.yScale = d3.scaleLinear()\n      .domain(this.getLimits(this.props.data[this.props.param], 0.05))\n      .range([height, 0]);\n\n    this.graph.svg = d3.select(\"#\" + this.props.id)\n      .append('svg')\n        .attr('id', 'svg_' + this.props.id)\n        .attr('width', svg_width)\n        .attr('height', svg_height)\n      .append('g')\n        .attr('transform', 'translate(' + axis_margin + ', ' + margin + ')')\n        // .attr('transform', 'translate(' + this.graph.bb.width * 0.05 + ', ' + this.graph.bb.height * 0.1 + ')')\n        // .attr('transform', 'translate(0,' + this.graph.bb.height * 0.1 + ')')\n    \n    this.graph.yAxis = d3.axisLeft(this.graph.yScale).ticks(5)\n    \n    this.graph.svg.append('g')\n      .attr(\"class\", \"y axis\")\n      // .attr(\"transform\", \"translate(0,0)\")\n      .call(this.graph.yAxis)\n    \n    this.graph.svg.append('g')\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0, \" + height + \")\")\n      .call(d3.axisBottom(this.graph.xScale))\n\n    this.graph.svg.append(\"text\")\n      .attr(\"x\", margin)\n      .attr(\"y\", height - margin)\n      .style(\"text-anchor\", \"start\")\n      .text(this.props.ylabel)\n      .attr(\"class\", \"ylabel\")\n\n    this.graph.dataLabel = this.graph.svg.append(\"text\")\n      .data([this.props.data[this.props.param][this.props.npoints - 1].toPrecision(this.props.precision)])\n      .attr(\"x\", width)\n      .attr(\"y\", margin)\n      .style(\"text-anchor\", \"end\")\n      .attr(\"class\", \"data-label\")\n      .text(function(d) {return d})\n      // .text(\"test\")\n\n    this.graph.line = d3.line()\n      .x((_, i) => this.graph.xScale(i))\n      .y((d) => this.graph.yScale(d))\n    \n    this.graph.svg.append('path')\n      .attr('id', 'dataline')\n      .attr('d', this.graph.line(this.props.data[this.props.param]))\n  }\n\n  updateLine() {\n    this.graph.svg.selectAll('path#dataline')\n    .data([this.props.data[this.props.param]])\n    .attr('d', this.graph.line)\n  }\n\n  updateDataLabel() {\n    this.graph.dataLabel\n      .data([this.props.data[this.props.param][this.props.npoints - 1].toPrecision(this.props.precision)])\n      .text(function(d) { return d })\n  }\n\n  updateYlim() {\n    this.graph.yScale.domain(this.getLimits(this.props.data[this.props.param], 0.05))\n    this.graph.yAxis.scale(this.graph.yScale)\n    d3.select(\"#\" + this.props.id).select('.y').transition(50).call(this.graph.yAxis)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  componentDidMount() {\n    this.initGraph()\n  }\n\n  componentDidUpdate() {\n    this.updateYlim()\n    this.updateLine()\n    this.updateDataLabel()\n  }\n\n  render() {\n    return (\n      <div className=\"graph\" id={this.props.id}></div>\n    )\n  }\n}\n\n\nexport class SubGraph extends Component {\n  constructor(props) {\n    super(props);\n    this.interval = null;\n    this.graph = {};\n  }\n\n  getLimits(a, pad) {\n    let mx = d3.max(a);\n    let mn = d3.min(a);\n    if (mn > this.props.min) {mn = this.props.min};\n    if (mx < this.props.max) {mx = this.props.max};\n    let rn = mx - mn;\n    if (rn === 0) {\n      rn = 10;\n    }\n    return [mn - rn * pad, mx + rn * pad]\n  }\n\n  initGraph() {\n    // size and padding\n    var margin = 6;\n    var axis_margin = 35;\n    this.graph.bb = d3.select(\"#\" + this.props.id).node().getBoundingClientRect();\n\n    var svg_height = this.graph.bb.height,\n        svg_width = this.graph.bb.width;\n      \n    var height = svg_height - 2 * margin,\n        width = svg_width - axis_margin;\n\n    this.graph.xScale = d3.scaleLinear()\n      .domain([0, this.props.npoints])\n      .range([0, width]);\n\n    this.graph.yScale = d3.scaleLinear()\n      .domain(this.getLimits(this.props.data[this.props.param], 0.05))\n      .range([height, 0]);\n\n    this.graph.svg = d3.select(\"#\" + this.props.id)\n      .append('svg')\n        .attr('id', 'svg_' + this.props.id)\n        .attr('viewBox', `0 0 ${svg_width} ${svg_height}`)\n      .append('g')\n        .attr('transform', 'translate(' + axis_margin + ', ' + margin + ')')\n    \n    this.graph.yAxis = d3.axisLeft(this.graph.yScale).ticks(2)\n    \n    this.graph.svg.append('g')\n      .attr(\"class\", \"y axis\")\n      // .attr(\"transform\", \"translate(0,0)\")\n      .call(this.graph.yAxis)\n    \n    // this.graph.svg.append('g')\n    //   .attr(\"class\", \"x axis\")\n    //   .attr(\"transform\", \"translate(0, \" + height + \")\")\n    //   .call(d3.axisBottom(this.graph.xScale))\n\n    // this.graph.svg.append(\"text\")\n    //   .attr(\"x\", margin)\n    //   .attr(\"y\", height - margin)\n    //   .style(\"text-anchor\", \"start\")\n    //   .text(this.props.ylabel)\n    //   .attr(\"class\", \"ylabel\")\n\n    // this.graph.dataLabel = this.graph.svg.append(\"text\")\n    //   .data([this.props.data[this.props.param][this.props.npoints - 1].toPrecision(this.props.precision)])\n    //   .attr(\"x\", width)\n    //   .attr(\"y\", margin)\n    //   .style(\"text-anchor\", \"end\")\n    //   .attr(\"class\", \"data-label\")\n    //   .text(function(d) {return d})\n      // .text(\"test\")\n\n    this.graph.line = d3.line()\n      .x((_, i) => this.graph.xScale(i))\n      .y((d) => this.graph.yScale(d))\n    \n    this.graph.svg.append('path')\n      .attr('id', 'dataline')\n      .attr('d', this.graph.line(this.props.data[this.props.param]))\n  }\n\n  updateLine() {\n    this.graph.svg.selectAll('path#dataline')\n    .data([this.props.data[this.props.param]])\n    .attr('d', this.graph.line)\n  }\n\n  updateDataLabel() {\n    this.graph.dataLabel\n      .data([this.props.data[this.props.param][this.props.npoints - 1].toPrecision(this.props.precision)])\n      .text(function(d) { return d })\n  }\n\n  updateYlim() {\n    this.graph.yScale.domain(this.getLimits(this.props.data[this.props.param], 0.05))\n    this.graph.yAxis.scale(this.graph.yScale)\n    d3.select(\"#\" + this.props.id).select('.y').transition(50).call(this.graph.yAxis)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  componentDidMount() {\n    this.initGraph()\n  }\n\n  componentDidUpdate() {\n    this.updateYlim()\n    this.updateLine()\n    // this.updateDataLabel()\n  }\n\n  render() {\n    return (\n      <div className=\"subgraph\" id={this.props.id} style={{height: this.props.height}}>\n        <div className=\"subgraph-label\" dangerouslySetInnerHTML={{__html: this.props.label}}></div>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { SubGraph, Graph } from './Graph'\n// import { ParamButtons } from './ParamButtons'\n\nexport class GraphPane extends React.Component {\n    // constructor(props) {\n    //     super(props)\n    //     console.log(this.props)\n    // }\n\n    // onParamChange(p) {\n    //     console.log(p)\n\n    // }\n\n    render () {\n        let graphs = [];\n        for (let key of this.props.variables) {\n            let info = this.props.var_info[key]\n            graphs.push(\n                <Graph \n                    data = {this.props.data}\n                    id = {key}\n                    min = {info['ymin']}\n                    max = {info['ymax']}\n                    param = {key}\n                    key = {key}\n                    npoints = {this.props.npoints}\n                    ylabel = {info['label']}\n                    precision = {info['precision']}\n                />\n            )\n        }\n\n        return (\n            <div className='graph-container' style={{width: this.props.width}}>\n                <h3>{this.props.title}</h3> \n                {/* <ParamButtons params={this.props.variables} onChange={this.onParamChange}/> */}\n                {graphs}\n            </div>\n        )\n    } \n}\n\nexport class SubGraphPane extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            h: '49%'\n        }\n    }\n\n    // onParamChange(p) {\n    //     console.log(p)\n\n    // }\n\n    render () {\n        if (this.props.variables.length === 0) {\n            return <div></div>\n        }\n\n        let graphs = [];\n        let i = 1;\n        for (let key of this.props.variables) {\n            let info = this.props.var_info[key]\n            graphs.push(\n                <SubGraph \n                    data = {this.props.data}\n                    id = {key}\n                    min = {info['ymin']}\n                    max = {info['ymax']}\n                    param = {key}\n                    key = {key}\n                    npoints = {this.props.data[key].length}\n                    label = {info['label']}\n                    // height = { this.state.h }\n                    // precision = {info['precision']}\n                />\n            )\n            if (i < this.props.variables.length) {\n                graphs.push(<hr/>)\n            }\n\n            i += 1;\n        }\n\n        return (\n            <div className='graph-pane' style={{\n                left: this.props.pos[0] + '%',\n                bottom: this.props.pos[1] + '%', \n                width: this.props.pos[2] + '%', \n                height: this.props.pos[3] + '%',\n              }}>\n                {/* <ParamButtons params={this.props.variables} onChange={this.onParamChange}/> */}\n                {graphs}\n            </div>\n        )\n    } \n}","import React, { Component } from 'react'\nimport { ParamDropdown } from './ParamDropdown'\nimport { moles2GtC } from './csys'\nimport { SubGraphPane } from './GraphPane';\nimport { var_info, paramLabels } from './ThreeBox_full'\n\nconst divid = \"threebox\"\n\nconst flux_labels = ['CO<sub>2</sub>', '[PO<sub>4</sub>]', '[DIC]', 'Alkalinity']\nconst flux_colors = [\"#888e9b\", \"#d3ca98\", \"#e98787\", \"#e7abef\"]  // CO2, PO4, DIC, TA\nconst plot_bkg = \"black\"\n\nexport class Box extends Component {\n  render() {\n    return (\n    <div className=\"box\" id={this.props.id} \n    style={{\n      left: this.props.pos[0] + '%',\n      bottom: this.props.pos[1] + '%', \n      width: this.props.pos[2] + '%', \n      height: this.props.pos[3] + '%',\n      backgroundColor: this.props.color\n    }}>\n      <div className='box-label' id={this.props.id}>{this.props.value}</div>\n    </div>\n    )\n  }\n}\n\nfunction mapValue(val, min, max, h, s) {\n  let range = 0.8;\n  return 100 * ((1 - range) / 2 + range * (1 - (val - min) / (max - min)))\n}\n\nfunction parseHSL(h, s, l) {\n  return \"hsl(\" + h + \",\" + s + \"%,\" + l + \"%)\"\n}\n\nfunction neg_color(lightness) {\n  let delta_lightness = 50;\n  if (lightness > 50) {\n    return lightness - delta_lightness\n  } else {\n    return lightness + delta_lightness\n  }\n}\n\nexport class Schematic extends Component {\n\n  getLimits() {\n    let gMin = Math.min(\n      Math.min(...this.props.data[this.props.param + '_deep']),\n      Math.min(...this.props.data[this.props.param + '_hilat']),\n      Math.min(...this.props.data[this.props.param + '_lolat'])\n    );\n    let gMax = Math.max(\n      Math.max(...this.props.data[this.props.param + '_deep']),\n      Math.max(...this.props.data[this.props.param + '_hilat']),\n      Math.max(...this.props.data[this.props.param + '_lolat'])\n    );\n    if (gMin === gMax) {\n      gMin -= 1;\n      gMax += 1;\n    }\n    return [gMin, gMax]\n  }\n  \n  render() {\n    let limits = this.getLimits();\n    let ind = this.props.npoints - 1;\n\n    // Define color pallette\n    let h = 200;\n    let s = 51;\n\n    let val_atmos = this.props.data['pCO2_atmos'][ind];\n\n    let val_deep = this.props.data[this.props.param + '_deep'][ind];\n    let l_deep = mapValue(val_deep, limits[0], limits[1]);\n    let col_deep = parseHSL(h, s, l_deep);\n\n    let val_lolat = this.props.data[this.props.param + '_lolat'][ind];\n    let l_lolat = mapValue(val_lolat, limits[0], limits[1]);\n    let col_lolat = parseHSL(h, s, l_lolat);\n    \n    let val_hilat = this.props.data[this.props.param + '_hilat'][ind];\n    let l_hilat = mapValue(val_hilat, limits[0], limits[1]);\n    let col_hilat = parseHSL(h, s, l_hilat);\n\n    // Generate legend\n    let legend = [];\n    for (let i = 0; i < flux_colors.length; i++) {\n      // console.log(legend_items[i])\n      legend.push(\n        <div className='legend item'>\n          <div className='legend key' style={{backgroundColor: flux_colors[i]}}></div>\n          <div className='legend label' dangerouslySetInnerHTML={{__html: flux_labels[i]}}></div>\n        </div>\n      )\n    }\n    // console.log([this.props.fluxes.vthermo_PO4_hilat / this.props.data.vol_deep[ind]])\n\n    return (\n      <div className=\"schematic-container\">\n      <div className=\"schematic\" id={divid}>\n        {/* Boxes */}\n        <Box \n          id='atmos'\n          pos = {[0, 80, 100, 20]}\n          color = \"white\"\n          value = {\"pCO2: \" + val_atmos.toPrecision(this.props.var_info['pCO2_atmos']['precision'])}\n        />\n        <Box \n          id='deep'\n          pos = {[0, 0, 100, 50]}\n          color = {col_deep}\n          value = {val_deep.toPrecision(this.props.var_info[this.props.param + '_deep']['precision'])}\n        />\n        <Box \n          id='lolat'\n          pos = {[40, 50, 60, 30]}\n          color = {col_lolat}\n          value = {val_lolat.toPrecision(this.props.var_info[this.props.param + '_deep']['precision'])}\n        />\n        <Box \n          id='hilat'\n          pos = {[0, 40, 40, 40]}\n          color = {col_hilat}\n          value = {val_hilat.toPrecision(this.props.var_info[this.props.param + '_deep']['precision'])}\n        />\n        {/* Graphs */}\n        <SubGraphPane\n          pos = {[38, 84, 22, 12]}\n          data={this.props.data}\n          variables={['pCO2_atmos']}\n          var_info={var_info}\n          id = 'g_atmos'\n        />\n\n        <SubGraphPane\n          pos = {[2, 54, 22, 12]}\n          data={this.props.data}\n          variables={this.props.plot_hilat}\n          var_info={var_info}\n          id = 'g_hilat'\n        />\n\n        <SubGraphPane\n          pos = {[76, 58, 22, 12]}\n          data={this.props.data}\n          variables={this.props.plot_lolat}\n          var_info={var_info}\n          id = 'g_lolat'\n        />\n\n        <SubGraphPane\n          pos = {[38, 10, 22, 12]}\n          data={this.props.data}\n          variables={this.props.plot_deep}\n          var_info={var_info}\n          id = 'g_deep'\n        />\n\n        {/* Flux Arrows */}\n        {/* CO2 Exchange */}\n        <Fluxes fluxes={[moles2GtC(-this.props.fluxes.exCO2_hilat)]} sizes={[0.3]} centre={[18, 20]} colors={[flux_colors[0]]} label='Gas exch.' id='gas'/>\n        <Fluxes fluxes={[moles2GtC(-this.props.fluxes.exCO2_lolat)]} sizes={[0.3]} centre={[70, 20]} colors={[flux_colors[0]]} label='Gas exch.' id='gas'/>\n        {/* Thermohaline Mixing */}\n        <Fluxes \n          fluxes={[this.props.fluxes.vthermo_PO4_hilat / this.props.data.vol_ocean[ind], this.props.fluxes.vthermo_DIC_hilat / this.props.data.vol_ocean[ind], this.props.fluxes.vthermo_TA_hilat / this.props.data.vol_ocean[ind]]}\n          sizes={[0.001, 0.1, 0.05]}\n          centre={[32, 60]}\n          colors={flux_colors.slice(1)}\n          label=\"V<sub>thermo</sub>\"\n          />\n        <Fluxes \n          fluxes={[this.props.fluxes.vthermo_PO4_lolat / this.props.data.vol_ocean[ind], this.props.fluxes.vthermo_DIC_lolat / this.props.data.vol_ocean[ind], this.props.fluxes.vthermo_TA_lolat / this.props.data.vol_ocean[ind]]}\n          sizes={[0.001, 0.1, 0.05]}\n          centre={[48, 50]}\n          colors={flux_colors.slice(1)}\n          label=\"V<sub>thermo</sub>\"\n          />\n        <Fluxes \n          fluxes={[this.props.fluxes.vthermo_PO4_hilat / this.props.data.vol_ocean[ind], this.props.fluxes.vthermo_DIC_hilat / this.props.data.vol_ocean[ind], this.props.fluxes.vthermo_TA_hilat / this.props.data.vol_ocean[ind]]}\n          sizes={[0.001, 0.1, 0.05]}\n          centre={[40, 42]} \n          colors={flux_colors.slice(1)}\n          id='lohi' \n          label=\"V<sub>thermo</sub>\"\n          />\n        {/* Diffusive Mixing */}\n        <Fluxes \n          fluxes={[-this.props.fluxes.vmix_PO4_hilat / this.props.data.vol_ocean[ind], -this.props.fluxes.vmix_DIC_hilat / this.props.data.vol_ocean[ind], -this.props.fluxes.vmix_TA_hilat / this.props.data.vol_ocean[ind]]}\n          sizes={[0.001, 0.1, 0.05]}\n          centre={[24, 60]}\n          colors={flux_colors.slice(1)}\n          label=\"V<sub>mix</sub>\"\n          />\n        <Fluxes \n          fluxes={[-this.props.fluxes.vmix_PO4_lolat / this.props.data.vol_ocean[ind], -this.props.fluxes.vmix_DIC_lolat / this.props.data.vol_ocean[ind], -this.props.fluxes.vmix_TA_lolat / this.props.data.vol_ocean[ind]]}\n          sizes={[0.001, 0.1, 0.05]}\n          centre={[56, 50]}\n          colors={flux_colors.slice(1)}\n          label=\"V<sub>mix</sub>\"\n          />\n        {/* Productivity */}\n        <Fluxes \n          fluxes={[-this.props.fluxes.prod_PO4_hilat / this.props.data.vol_ocean[ind], -this.props.fluxes.prod_DIC_hilat / this.props.data.vol_ocean[ind], -this.props.fluxes.prod_TA_hilat / this.props.data.vol_ocean[ind]]}\n          sizes={[0.001, 0.1, 0.05]}\n          centre={[16, 60]}\n          colors={flux_colors.slice(1)}\n          label=\"&tau;\"\n          />\n        <Fluxes \n          fluxes={[-this.props.fluxes.prod_PO4_lolat / this.props.data.vol_ocean[ind], -this.props.fluxes.prod_DIC_lolat / this.props.data.vol_ocean[ind], -this.props.fluxes.prod_TA_lolat / this.props.data.vol_ocean[ind]]}\n          sizes={[0.001, 0.1, 0.05]}\n          centre={[64, 50]}\n          colors={flux_colors.slice(1)}\n          label=\"&tau;\"\n          />\n        {/* Parameter Selection */}\n        {/* <ParamDropdown className='dropdown'\n                        params={this.props.ocean_vars}\n                        param={this.props.param} \n                        handleSelect={this.props.handleDropdownSelect}/> */}\n        <div className='legend box'>\n          <h3>Net Fluxes</h3>\n          {legend}\n        </div>\n      \n      </div>\n      </div>\n    )\n  }\n}\n\nclass Fluxes extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      arrowWidthPercent: 1,\n      arrowHeightPercent: 10,\n    }\n\n    this.style = {\n      width: this.props.fluxes.length * this.state.arrowWidthPercent + \"%\",\n      height: this.state.arrowHeightPercent + \"%\",\n      left: this.props.centre[0] - this.props.fluxes.length * this.state.arrowWidthPercent / 2 + '%',\n      top: this.props.centre[1] - this.state.arrowHeightPercent * 0.5 + \"%\"\n    }\n  }\n\n  render() {\n    let arrows = [];\n    let n = this.props.fluxes.length;\n    let pos = 0;\n    for (let i = 0; i < n; i++) {\n      arrows.push(\n        <Arrow direction={this.props.fluxes[i]} width={100 / n + '%'} amplitude={this.props.sizes[i]} color={this.props.colors[i]}/>\n      )\n      if (this.props.fluxes[i] > 0) {\n        pos += 1;\n      } else {\n        pos -= 1;\n      }\n    }\n    \n    let labelPos = {}\n    if (pos < 0) {\n       labelPos.bottom = '55%'\n      } else {\n        labelPos.top = '55%'\n      }\n\n    return (\n      <div className=\"flux-pane\" id={this.props.id} style={this.style}>\n        <div className=\"flux-label\" dangerouslySetInnerHTML={{__html: this.props.label}} style={labelPos}></div>\n        {arrows}\n      </div>\n    )\n  }\n}\n\nclass Arrow extends Component {\n  constructor(props) {\n    super(props)\n  }\n\n  size_2_percent(size) {\n    return Math.abs(50 * size / this.props.amplitude) + '%'\n  }\n\n  render() {\n    let arrowStyle = {\n      width: \"95%\",\n      left: \"0%\",\n      backgroundColor: this.props.color\n    }\n    if (this.props.direction >= 0) {\n      arrowStyle.bottom = \"50%\"\n      arrowStyle.height = this.size_2_percent(this.props.direction)\n    } else {\n      arrowStyle.top = \"50%\"\n      arrowStyle.height = this.size_2_percent(this.props.direction)\n    }\n\n    // console.log(arrowStyle)\n\n    return ( \n      <div className='flux-box' style={{width: this.props.width}}>\n        <div className='flux-arrow' style={arrowStyle}>\n          \n        </div>\n      </div>\n      )\n  }\n\n}\n\n\n// class hFluxes extends Component {\n//   constructor(props) {\n//     super(props)\n\n//     this.state = {\n//       arrowWidthPercent: 10,\n//       arrowHeightPercent: 2,\n//     }\n\n//     this.style = {\n//       width: this.props.fluxes.length * this.state.arrowWidthPercent + \"%\",\n//       height: this.state.arrowHeightPercent + \"%\",\n//       left: this.props.centre[0] - this.props.fluxes.length * this.state.arrowWidthPercent / 2 + '%',\n//       top: this.props.centre[1] - this.state.arrowHeightPercent * 0.5 + \"%\"\n//     }\n//   }\n\n//   render() {\n//     let arrows = [];\n//     let n = this.props.fluxes.length;\n//     for (let i = 0; i < n; i++) {\n//       arrows.push(\n//         <Arrow direction={this.props.fluxes[i]} width={100 / n + '%'} amplitude={this.props.sizes[i]}/>\n//       )\n//     }\n    \n//     return (\n//       <div className=\"arrow-pane\" style={this.style}>\n//         {arrows}\n//       </div>\n//     )\n//   }\n// }\n\n// class hArrow extends Component {\n//   constructor(props) {\n//     super(props)\n//   }\n\n//   size_2_percent(size) {\n//     return Math.abs(50 * size / this.props.amplitude) + '%'\n//   }\n\n//   render() {\n//     let arrowStyle = {\n//       width: \"95%\",\n//       left: \"0%\"\n//     }\n//     if (this.props.direction >= 0) {\n//       arrowStyle.bottom = \"50%\"\n//       arrowStyle.height = this.size_2_percent(this.props.direction)\n//     } else {\n//       arrowStyle.top = \"50%\"\n//       arrowStyle.height = this.size_2_percent(this.props.direction)\n//     }\n\n//     // console.log(arrowStyle)\n\n//     return ( \n//       <div className='flux-box' style={{width: this.props.width}}>\n//         <div className='flux-arrow' style={arrowStyle}>\n          \n//         </div>\n//       </div>\n//       )\n//   }\n\n// }","import React from 'react';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {paramLabels} from './ThreeBox_full'\n\nexport class ParamDropdown extends React.Component {\n\n    render() {\n        let opts = [];\n        let i = 0;\n        for (let param of this.props.params) {\n            opts.push(\n                <Dropdown.Item key={i} eventKey={param}>\n                    <div dangerouslySetInnerHTML={{__html: paramLabels[param]}}></div>\n                </Dropdown.Item>\n            )\n            i += 1;\n        }\n\n        return (\n            <Dropdown onSelect={this.props.handleSelect}>\n            <Dropdown.Toggle variant=\"secondary\" size=\"sm\" id=\"dropdown-secondary\">\n                {this.props.param}\n            </Dropdown.Toggle>\n            <Dropdown.Menu>\n                {opts}\n            </Dropdown.Menu>\n            </Dropdown>\n        )\n    }\n}","import React from 'react';\nimport ToggleButtonGroup from 'react-bootstrap/ToggleButtonGroup'\nimport ToggleButton from 'react-bootstrap/ToggleButton'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {paramLabels} from './ThreeBox_full'\n\nexport class ParamButtons extends React.Component {\n    render() {\n        let buttons = [];\n        for (let p of this.props.params) {\n            buttons.push(\n                <ToggleButton key={p} value={p}><div dangerouslySetInnerHTML={{__html: paramLabels[p]}}></div></ToggleButton>\n            )\n        }\n        return (\n            <ToggleButtonGroup type=\"checkbox\" size='sm' onChange={this.props.onChange} defaultValue={this.props.defaultValue}>\n                {buttons}\n            </ToggleButtonGroup>\n        )\n    }\n}\n\nexport class ParamToggle extends React.Component {\n    render() {\n        let buttons = [];\n        for (let p of this.props.params) {\n            buttons.push(\n                <ToggleButton key={p} value={p}><div dangerouslySetInnerHTML={{__html: paramLabels[p]}}></div></ToggleButton>\n            )\n        }\n        return (\n            <ToggleButtonGroup type=\"radio\" name=\"plot_params\" size='sm' onChange={this.props.onChange} defaultValue={this.props.defaultValue}>\n                {buttons}\n            </ToggleButtonGroup>\n        )\n    }\n}","import React from 'react';\nimport { start_state, step, calc_fluxes, var_info} from './ThreeBox_full';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\nimport Button from 'react-bootstrap/Button'\nimport ToggleButton from 'react-bootstrap/ToggleButton'\nimport { Disasters, ModelControls } from './ModelControls'\nimport { GraphPane } from './GraphPane';\nimport { Schematic } from './Schematic';\nimport { ParamButtons, ParamToggle } from './ParamButtons';\nimport {calc_Ks, GtC2uatm, moles2uatm} from './csys'\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n\nconst frameTime = 50;\nconst npoints = 200;\n\nexport class Model extends React.Component {\n    constructor(props) {\n        super(props)\n\n        // Set model state\n        this.state = {\n            start_state: start_state,\n            now: start_state,\n            history: {},\n            fluxes: calc_fluxes(start_state),\n        };\n        // Calculate Ks\n        this.state['Ks'] = this.genKs(start_state)\n\n        // Set arrays to record model state\n        for (let key in this.state.now) {\n            this.state.history[key] = new Array(npoints).fill(this.state.now[key]);\n          };\n        \n        //   Default parameter to show in schematic\n        this.state['schematicParam'] = 'fCO2'\n        \n        // Model Params\n        this.state['model_global_params'] = ['vmix', 'vthermo'] \n        this.state['model_hilat_params'] = ['tau_hilat', 'percent_CaCO3_hilat', 'temp_hilat']\n        this.state['model_lolat_params'] = ['tau_lolat', 'percent_CaCO3_lolat', 'temp_lolat']\n\n        //   Default plot setup\n        this.state['ocean_vars'] = ['fCO2', 'DIC', 'TA', 'pH', 'CO3', 'HCO3', 'c', 'PO4'];\n        this.state['plot_atmos'] = ['pCO2_atmos',];\n        this.state['plot_ocean'] = ['fCO2']\n        for (let box of ['_deep', '_hilat', '_lolat']) {\n            this.state['plot' + box] = [this.state.plot_ocean[0] + box]\n        }\n\n        // Whether or not to run the model.\n        this.state['start_stop_button'] = \"Stop\";\n\n        this.state.running = true;\n        this.interval = null;\n\n        this.emitting = false;\n        this.state.GtC_released = 0;\n\n        this.stepModel = this.stepModel.bind(this);\n        this.startSimulation = this.startSimulation.bind(this)\n        this.stopSimulation = this.stopSimulation.bind(this)\n        this.resetModel = this.resetModel.bind(this)\n        this.toggleSimulation = this.toggleSimulation.bind(this)\n        this.genPlotVars = this.genPlotVars.bind(this)\n        this.genKs = this.genKs.bind(this)\n\n\n        this.handleDropdownSelect = this.handleDropdownSelect.bind(this)\n        this.handleParamButtonChange = this.handleParamButtonChange.bind(this)\n        this.handleParamToggle = this.handleParamToggle.bind(this)\n        this.handleParamUpdate = this.handleParamUpdate.bind(this)\n\n        this.handleVolcano = this.handleVolcano.bind(this)\n        this.toggleEmissions = this.toggleEmissions.bind(this)\n        \n        // let sw = calc_csys({DIC: 1980, TA: 2300, Sal: 34.78, Temp: 25})\n        // console.log(sw)\n        // let Ks = calc_Ks({Sal: 34.78, Tc: 25})\n        // let H = give_DIC_TA({DIC: 1980e-6, TA: 2300e-6, Sal: 34.78, Ks: Ks})\n        // console.log(-Math.log10(H))\n        // console.log(calc_DIC({fCO2: sw.fCO2, TA: 2300, Sal: 34.78, Temp: 25}))\n    }\n\n    startSimulation() {\n        if (this.interval == null) {\n            this.interval = setInterval(() => {\n                this.stepModel()\n            }, frameTime);\n        }\n        this.setState({running: true})\n    }\n\n    stopSimulation() {\n        clearInterval(this.interval);\n        this.interval = null;\n        this.setState({running: false})\n    }\n\n    toggleSimulation() {\n        if (this.interval === null) {\n            this.startSimulation()\n            this.setState({start_stop_button: \"Stop\"})\n        }  else {\n            this.stopSimulation()\n            this.setState({start_stop_button: \"Run\"})\n        }\n    }\n\n    resetModel() {\n        this.setState({\n            now: start_state, \n            fluxes: calc_fluxes(start_state),\n            history: this.updateHistory(start_state),\n            Ks: this.genKs(start_state),\n            GtC_released: 0})\n    }\n\n    stepModel() {\n        // Update Model State\n        let newState = this.state.now;\n        let GtC_release = 2;\n        let new_GtC = 0;\n    \n        if (this.emitting) {\n            newState.pCO2_atmos += GtC2uatm(GtC_release)\n            new_GtC = GtC_release;\n        }\n\n        let fluxes = calc_fluxes(newState)\n\n        newState = step(newState, fluxes, this.state.Ks);\n        // update state\n        this.setState({\n            now: newState, \n            fluxes: fluxes, \n            history: this.updateHistory(newState), \n            emissions: this.state.GtC_released += new_GtC});\n    };\n\n    updateHistory(newState) {\n        let newHisotry = this.state.history;\n        for (let key in this.state.now) {\n            newHisotry[key].shift();\n            newHisotry[key].push(newState[key])\n        }\n        return newHisotry\n    }\n\n    handleParamButtonChange(params) {\n        // this.setState({plot_ocean: params})\n        this.setState(this.genPlotVars(params))\n        // console.log(params)\n    }\n\n    handleParamToggle(param) {\n        // this.setState({plot_ocean: params})\n        // this.genPlotVars(params)\n        let newState = this.genPlotVars([param])\n        newState.schematicParam = param\n        this.setState(newState)\n    }\n\n    handleVolcano(GtC) {\n        // Size of eruption (Pinatubo = 0.05 Gt CO2, or 0.05 * 0.272 Gt C)\n        let newState = this.state.now\n        newState.pCO2_atmos += GtC2uatm(GtC)\n        // console.log([GtC, GtC2uatm(GtC)])\n        this.setState({now: newState, GtC_released: this.state.GtC_released + GtC});\n    }\n\n    toggleEmissions() {\n        if (this.emitting) {\n            this.emitting = false;\n        } else {\n            this.emitting = true;\n        }\n    }\n\n    // handleHumans() {\n    //     console.log('burn')\n\n    //     let newState = this.state.now;\n    //     let emit = 1e6 * 2.6e15 // micromoles of C per year\n\n    //     let surf_vol = this.state.now.vol_hilat + this.state.now.vol_lolat;\n    //     newState.DIC_hilat += emit * this.state.now.vol_hilat / surf_vol / this.state.now.vol_hilat; \n    //     newState.DIC_lolat += emit * this.state.now.vol_lolat / surf_vol / this.state.now.vol_lolat; \n    // }\n\n    genPlotVars(params) {\n        let plotvars ={\n            'plot_ocean': params,\n            'plot_atmos': ['pCO2_atmos']\n        }\n        for (let box of ['_deep', '_hilat', '_lolat']) {\n            plotvars['plot' + box] = []\n            for (let p of params) {\n                plotvars['plot' + box].push(p + box)\n            }\n        }\n        return plotvars\n    }\n\n    genKs(state) {\n        let Ks = {};\n        Ks['deep'] = calc_Ks({Tc:state.temp_deep, Sal: state.sal_deep})\n        Ks['hilat'] = calc_Ks({Tc:state.temp_hilat, Sal: state.sal_hilat})\n        Ks['lolat'] = calc_Ks({Tc:state.temp_lolat, Sal: state.sal_lolat})\n        return Ks\n    }\n\n    componentDidMount() {\n        this.startSimulation()\n    }\n\n    componentWillUnmount() {\n        this.stopSimulation()\n    }\n\n    handleDropdownSelect(param) {\n        this.setState({schematicParam: param})\n    }\n\n    handleParamUpdate(key, value){\n        // console.log(key, value)\n        let newState = this.state.now;\n        newState[key] = value;\n        this.setState({now: newState, Ks: this.genKs(newState)});\n        // this.updateHistory(newState);\n        // this.setState({now: newState, history: this.state.history, Ks: Ks});\n    }\n\n    render() {\n    return (\n        <div id='main-panel'>\n            <div className=\"top-bar\">\n                <div className=\"control-container\">\n                    <ModelControls title=\"Global\" params={this.state.model_global_params} now={this.state.now} handleUpdate={this.handleParamUpdate}/>\n                    <ModelControls title=\"High Latitude\" params={this.state.model_hilat_params} now={this.state.now} handleUpdate={this.handleParamUpdate}/>\n                    <ModelControls title=\"Low Latitude\" params={this.state.model_lolat_params} now={this.state.now} handleUpdate={this.handleParamUpdate}/>\n                    <Disasters handleVolcano={this.handleVolcano} handleEmissions={this.toggleEmissions} GtC_released={this.state.GtC_released}/>\n                </div>\n            </div>\n            <div className='main-display'>\n            {/* <div id='schematic-container'> */}\n                <Schematic param={this.state.schematicParam} data={this.state.history} fluxes={this.state.fluxes} ocean_vars={this.state.ocean_vars} npoints={npoints} var_info={var_info} handleDropdownSelect={this.handleDropdownSelect} \n                           plot_hilat={this.state.plot_hilat} plot_lolat={this.state.plot_lolat} plot_deep={this.state.plot_deep}/>\n            {/* </div> */}\n            </div>\n            <div className=\"bottom-bar\">\n                <div id=\"plot-controls\">\n                    {/* <ParamButtons id='plot-param-controls' params={this.state.ocean_vars} defaultValue={this.state.plot_ocean} onChange={this.handleParamButtonChange}/> */}\n                    <ParamToggle id='plot-param-toggle' params={this.state.ocean_vars} defaultValue={this.state.plot_ocean} onChange={this.handleParamToggle}/>\n                    <div id='start-stop'>\n                    <Button onClick={this.resetModel} variant=\"outline-secondary\" size=\"sm\" id='model-reset'>Reset</Button>\n                    {/* <ButtonGroup> */}\n                        {/* <Button onClick={this.toggleSimulation} variant=\"outline-secondary\" size=\"sm\" id=\"model-toggle\">{this.state.start_stop_button}</Button> */}\n                        <ToggleButton type=\"checkbox\" variant=\"outline-secondary\" onChange={this.toggleSimulation} value={1}>{this.state.start_stop_button}</ToggleButton>\n                    {/* </ButtonGroup> */}\n                    </div>\n                </div>\n            </div>\n            {/* <div id=\"graph-panel\">\n            < GraphPane \n                width= \"100%\"\n                title= \"Atmosphere\"\n                data = {this.state.history}\n                variables = {this.state.plot_atmos}\n                var_info = {var_info}\n                npoints = {npoints}\n            />\n            < GraphPane \n                width= \"46.5vw\"\n                title= \"High Lat. Surface\"\n                data = {this.state.history}\n                variables = {this.state.plot_hilat}\n                var_info = {var_info}\n                npoints = {npoints}\n            />\n\n            < GraphPane \n                width= \"46.5vw\"\n                title= \"Low Lat. Surface\"\n                data = {this.state.history}\n                variables = {this.state.plot_lolat}\n                var_info = {var_info}\n                npoints = {npoints}\n            />\n\n            < GraphPane \n                width= \"100%\"\n                title= \"Deep\"\n                data = {this.state.history}\n                variables = {this.state.plot_deep}\n                var_info = {var_info}\n                npoints = {npoints}\n            />\n            </div> */}\n        </div>\n        )\n    };\n}","import React from 'react';\nimport { Model } from './components/Model';\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Model />\n      {/* <header>\n        <div>Carbon Live</div>\n      </header>\n      <div>\n        <Model />\n      </div> */}\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}